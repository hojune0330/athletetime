<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>라이브 채팅 | 애슬리트 타임</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Malgun Gothic', sans-serif;
      -webkit-tap-highlight-color: transparent;
      overscroll-behavior-y: contain;
      background: #0a0a0a;
    }
    
    /* 다크 테마 스크롤바 */
    ::-webkit-scrollbar {
      width: 6px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
    }
    
    ::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 3px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    /* 메시지 애니메이션 */
    @keyframes slideInRight {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    @keyframes fadeInUp {
      from {
        transform: translateY(10px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    /* 메시지 스타일 */
    .message-enter {
      animation: slideInRight 0.3s ease-out;
    }
    
    .message-item {
      padding: 8px 12px;
      margin: 4px 0;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.2s;
    }
    
    .message-item:hover {
      background: rgba(255, 255, 255, 0.08);
      transform: translateX(4px);
    }
    
    /* 유저 레벨 배지 */
    .user-badge {
      display: inline-flex;
      align-items: center;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: 600;
      margin-right: 4px;
    }
    
    .badge-vip {
      background: linear-gradient(135deg, #ffd700, #ffed4e);
      color: #000;
    }
    
    .badge-moderator {
      background: linear-gradient(135deg, #10b981, #34d399);
      color: #fff;
    }
    
    .badge-subscriber {
      background: linear-gradient(135deg, #8b5cf6, #a78bfa);
      color: #fff;
    }
    
    .badge-new {
      background: linear-gradient(135deg, #3b82f6, #60a5fa);
      color: #fff;
    }
    
    /* 이모지 리액션 */
    .emoji-reaction {
      position: absolute;
      font-size: 24px;
      animation: floatUp 3s ease-out forwards;
      pointer-events: none;
    }
    
    @keyframes floatUp {
      0% {
        transform: translateY(0) scale(0);
        opacity: 1;
      }
      20% {
        transform: translateY(-20px) scale(1.2);
      }
      100% {
        transform: translateY(-200px) scale(0.8);
        opacity: 0;
      }
    }
    
    /* 스트리머 메시지 하이라이트 */
    .streamer-message {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(245, 158, 11, 0.2));
      border: 1px solid rgba(239, 68, 68, 0.5);
    }
    
    /* 멘션 하이라이트 */
    .mention {
      color: #60a5fa;
      font-weight: 600;
      cursor: pointer;
    }
    
    .mention:hover {
      text-decoration: underline;
    }
    
    /* 입력창 스타일 */
    .input-container {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .chat-input {
      background: transparent;
      color: white;
      resize: none;
      outline: none;
    }
    
    .chat-input::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }
    
    /* 이모티콘 패널 */
    .emoji-panel {
      background: rgba(20, 20, 20, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      max-height: 300px;
      overflow-y: auto;
    }
    
    .emoji-item {
      cursor: pointer;
      padding: 8px;
      transition: all 0.2s;
      border-radius: 8px;
    }
    
    .emoji-item:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: scale(1.2);
    }
    
    /* 슈퍼챗 스타일 */
    .super-chat {
      background: linear-gradient(135deg, #ffd700, #ffed4e);
      color: #000;
      padding: 12px;
      margin: 8px 0;
      border-radius: 12px;
      border: 2px solid #ffd700;
      animation: pulse 2s infinite;
    }
    
    /* 온라인 유저 카운터 */
    .viewer-count {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: rgba(239, 68, 68, 0.2);
      border: 1px solid rgba(239, 68, 68, 0.5);
      border-radius: 20px;
    }
    
    .live-dot {
      width: 8px;
      height: 8px;
      background: #ef4444;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }
    
    /* 새 메시지 알림 */
    .new-message-alert {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(59, 130, 246, 0.9);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      animation: bounce 1s infinite;
      z-index: 100;
    }
    
    /* 채팅 속도 제어 */
    .slow-mode-indicator {
      background: rgba(245, 158, 11, 0.2);
      border: 1px solid rgba(245, 158, 11, 0.5);
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 12px;
      color: #fbbf24;
    }
    
    /* 유저 프로필 카드 */
    .user-profile-card {
      position: absolute;
      background: rgba(20, 20, 20, 0.98);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 12px;
      z-index: 1000;
      min-width: 200px;
    }
    
    /* 액션 버튼들 */
    .action-button {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      color: white;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .action-button:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.1);
    }
    
    /* 모바일 최적화 */
    @media (max-width: 640px) {
      .message-item {
        font-size: 14px;
      }
      
      .user-badge {
        font-size: 9px;
      }
    }
  </style>
</head>
<body>
  <div id="app" class="flex flex-col h-screen bg-black text-white">
    <!-- 헤더 -->
    <header class="bg-gradient-to-r from-purple-600 to-pink-600 p-3 shadow-xl">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <button onclick="history.back()" class="text-white">
            <i class="fas fa-arrow-left text-xl"></i>
          </button>
          <h1 class="text-lg font-bold">라이브 채팅</h1>
        </div>
        
        <!-- 시청자 수 -->
        <div class="viewer-count">
          <div class="live-dot"></div>
          <span class="text-sm font-semibold" id="viewerCount">1,234</span>
          <i class="fas fa-users text-xs"></i>
        </div>
      </div>
    </header>

    <!-- 채팅 영역 -->
    <div class="flex-1 flex flex-col relative overflow-hidden">
      <!-- 채팅 메시지 컨테이너 -->
      <div id="chatContainer" class="flex-1 overflow-y-auto p-4 space-y-1">
        <!-- 웰컴 메시지 -->
        <div class="text-center py-8">
          <div class="inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-full border border-purple-500/30">
            <i class="fas fa-broadcast-tower text-purple-400"></i>
            <span class="text-sm text-gray-300">채팅방에 오신 것을 환영합니다!</span>
          </div>
        </div>
        
        <!-- 채팅 메시지들이 여기에 추가됨 -->
        <div id="messageList"></div>
      </div>
      
      <!-- 새 메시지 알림 (숨김 상태) -->
      <div id="newMessageAlert" class="new-message-alert hidden">
        <i class="fas fa-arrow-down mr-2"></i>
        새 메시지
      </div>
      
      <!-- 이모지 리액션 컨테이너 -->
      <div id="emojiReactionContainer" class="absolute inset-0 pointer-events-none"></div>
    </div>

    <!-- 하단 입력 영역 -->
    <div class="input-container border-t p-3">
      <!-- 슬로우 모드 표시 -->
      <div id="slowModeIndicator" class="slow-mode-indicator mb-2 hidden">
        <i class="fas fa-clock mr-1"></i>
        슬로우 모드: <span id="slowModeTime">5</span>초 대기
      </div>
      
      <!-- 입력 필드 -->
      <div class="flex gap-2 items-end">
        <!-- 이모티콘 버튼 -->
        <button onclick="toggleEmojiPanel()" class="action-button">
          <i class="far fa-smile"></i>
        </button>
        
        <!-- 텍스트 입력 -->
        <div class="flex-1 relative">
          <textarea 
            id="messageInput"
            class="chat-input w-full px-3 py-2 rounded-lg"
            placeholder="메시지를 입력하세요..."
            rows="1"
            maxlength="200"
            onkeydown="handleInputKeydown(event)"
            oninput="adjustTextareaHeight(this)"></textarea>
          
          <!-- 글자 수 표시 -->
          <span class="absolute right-2 bottom-2 text-xs text-gray-500" id="charCount">0/200</span>
        </div>
        
        <!-- 전송 버튼 -->
        <button onclick="sendMessage()" class="action-button bg-gradient-to-r from-purple-600 to-pink-600">
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
      
      <!-- 이모티콘 패널 -->
      <div id="emojiPanel" class="emoji-panel hidden absolute bottom-full mb-2 left-4 right-4 p-3 grid grid-cols-8 gap-1">
        <!-- 이모티콘들이 여기에 추가됨 -->
      </div>
    </div>
    
    <!-- 유저 프로필 카드 (숨김) -->
    <div id="userProfileCard" class="user-profile-card hidden">
      <!-- 프로필 정보가 여기에 표시됨 -->
    </div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

  <script>
    // Firebase 설정
    const firebaseConfig = {
      apiKey: "AIzaSyDKJGqP2E0qBMXZI4_4lXxcqtLLyWMNe9o",
      authDomain: "athlete-time-community.firebaseapp.com",
      projectId: "athlete-time-community",
      storageBucket: "athlete-time-community.appspot.com",
      messagingSenderId: "936784789813",
      appId: "1:936784789813:web:1234567890abcdef"
    };
    
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();
    
    // 전역 변수
    let currentUser = null;
    let lastMessageTime = 0;
    let slowModeDelay = 0;
    let isAtBottom = true;
    let unsubscribe = null;
    
    // 이모티콘 목록
    const emojis = ['😀', '😂', '🥰', '😎', '🤔', '👍', '👏', '💪', '🔥', '❤️', '🎉', '🏃‍♂️', '🏃‍♀️', '⚡', '💯', '🚀', '😭', '😱', '🤣', '👀'];
    const reactionEmojis = ['❤️', '👍', '😂', '😮', '😢', '👏', '🔥'];
    
    // 유저 배지 타입
    const userBadges = {
      vip: { icon: '👑', class: 'badge-vip', text: 'VIP' },
      moderator: { icon: '🛡️', class: 'badge-moderator', text: 'MOD' },
      subscriber: { icon: '⭐', class: 'badge-subscriber', text: 'SUB' },
      new: { icon: '🌟', class: 'badge-new', text: 'NEW' }
    };
    
    // 초기화
    window.addEventListener('DOMContentLoaded', () => {
      initializeApp();
    });
    
    function initializeApp() {
      // 익명 로그인
      auth.signInAnonymously().then((result) => {
        currentUser = {
          uid: result.user.uid,
          name: generateRandomUsername(),
          badge: Math.random() > 0.7 ? 'new' : null,
          level: Math.floor(Math.random() * 50) + 1
        };
        
        // 채팅 구독 시작
        subscribeToChat();
        
        // 이모티콘 패널 초기화
        initializeEmojiPanel();
        
        // 스크롤 이벤트 리스너
        setupScrollListener();
        
        // 온라인 카운터 시작
        startViewerCounter();
      });
    }
    
    // 랜덤 유저네임 생성
    function generateRandomUsername() {
      const adjectives = ['빠른', '강한', '민첩한', '열정적인', '최고의', '프로'];
      const nouns = ['러너', '스프린터', '마라토너', '선수', '챔피언', '에이스'];
      return adjectives[Math.floor(Math.random() * adjectives.length)] + 
             nouns[Math.floor(Math.random() * nouns.length)] +
             Math.floor(Math.random() * 999);
    }
    
    // 채팅 구독
    function subscribeToChat() {
      const chatRef = db.collection('liveChat')
        .orderBy('timestamp', 'desc')
        .limit(100);
      
      unsubscribe = chatRef.onSnapshot((snapshot) => {
        snapshot.docChanges().forEach((change) => {
          if (change.type === 'added') {
            const message = change.doc.data();
            displayMessage(message);
          }
        });
        
        if (isAtBottom) {
          scrollToBottom();
        } else {
          showNewMessageAlert();
        }
      });
    }
    
    // 메시지 표시
    function displayMessage(message) {
      const messageList = document.getElementById('messageList');
      const messageDiv = document.createElement('div');
      messageDiv.className = 'message-item message-enter';
      
      // 스트리머 메시지 확인
      if (message.isStreamer) {
        messageDiv.classList.add('streamer-message');
      }
      
      // 슈퍼챗 확인
      if (message.superChat) {
        messageDiv.className = 'super-chat message-enter';
      }
      
      // 배지 HTML
      let badgeHTML = '';
      if (message.badge && userBadges[message.badge]) {
        const badge = userBadges[message.badge];
        badgeHTML = `<span class="user-badge ${badge.class}">${badge.icon} ${badge.text}</span>`;
      }
      
      // 레벨 표시
      const levelColor = message.level > 30 ? 'text-yellow-400' : 
                        message.level > 10 ? 'text-blue-400' : 
                        'text-gray-400';
      
      // 멘션 처리
      let processedMessage = escapeHtml(message.text);
      processedMessage = processedMessage.replace(/@(\w+)/g, '<span class="mention">@$1</span>');
      
      messageDiv.innerHTML = `
        <div class="flex items-start gap-2">
          <div class="flex-shrink-0">
            <span class="${levelColor} text-xs font-bold">Lv.${message.level || 1}</span>
          </div>
          <div class="flex-1">
            <div class="flex items-center gap-1 mb-1">
              ${badgeHTML}
              <span class="font-semibold text-sm ${message.isStreamer ? 'text-red-400' : 'text-gray-300'}">${escapeHtml(message.username)}</span>
              <span class="text-xs text-gray-500">${formatTime(message.timestamp)}</span>
            </div>
            <div class="text-gray-100">${processedMessage}</div>
            ${message.superChat ? `<div class="text-xs mt-1 font-bold">💰 ${message.superChat}원</div>` : ''}
          </div>
        </div>
      `;
      
      // 클릭 이벤트 (유저 프로필)
      messageDiv.addEventListener('click', (e) => {
        if (e.target.classList.contains('mention')) {
          const username = e.target.textContent.substring(1);
          showUserProfile(username, e.clientX, e.clientY);
        }
      });
      
      messageList.appendChild(messageDiv);
      
      // 오래된 메시지 제거
      while (messageList.children.length > 100) {
        messageList.removeChild(messageList.firstChild);
      }
      
      // 이모지 리액션 트리거
      if (message.text.includes('❤️') || message.text.includes('🔥')) {
        triggerEmojiReaction(message.text.includes('❤️') ? '❤️' : '🔥');
      }
    }
    
    // 메시지 전송
    function sendMessage() {
      const input = document.getElementById('messageInput');
      const text = input.value.trim();
      
      if (!text) return;
      
      // 슬로우 모드 체크
      const now = Date.now();
      if (slowModeDelay > 0 && now - lastMessageTime < slowModeDelay * 1000) {
        showSlowModeWarning();
        return;
      }
      
      // 메시지 전송
      db.collection('liveChat').add({
        username: currentUser.name,
        text: text,
        timestamp: firebase.firestore.FieldValue.serverTimestamp(),
        userId: currentUser.uid,
        badge: currentUser.badge,
        level: currentUser.level,
        isStreamer: false,
        superChat: null
      });
      
      input.value = '';
      adjustTextareaHeight(input);
      updateCharCount();
      lastMessageTime = now;
      
      // 전송 애니메이션
      animateSendButton();
    }
    
    // 이모티콘 패널
    function initializeEmojiPanel() {
      const panel = document.getElementById('emojiPanel');
      emojis.forEach(emoji => {
        const emojiDiv = document.createElement('div');
        emojiDiv.className = 'emoji-item text-2xl text-center';
        emojiDiv.textContent = emoji;
        emojiDiv.onclick = () => insertEmoji(emoji);
        panel.appendChild(emojiDiv);
      });
    }
    
    function toggleEmojiPanel() {
      const panel = document.getElementById('emojiPanel');
      panel.classList.toggle('hidden');
    }
    
    function insertEmoji(emoji) {
      const input = document.getElementById('messageInput');
      input.value += emoji;
      updateCharCount();
      toggleEmojiPanel();
      input.focus();
    }
    
    // 이모지 리액션
    function triggerEmojiReaction(emoji) {
      const container = document.getElementById('emojiReactionContainer');
      const reaction = document.createElement('div');
      reaction.className = 'emoji-reaction';
      reaction.textContent = emoji;
      reaction.style.left = Math.random() * 80 + 10 + '%';
      reaction.style.bottom = '100px';
      
      container.appendChild(reaction);
      
      setTimeout(() => {
        container.removeChild(reaction);
      }, 3000);
    }
    
    // 스크롤 관련
    function setupScrollListener() {
      const container = document.getElementById('chatContainer');
      container.addEventListener('scroll', () => {
        const threshold = 100;
        isAtBottom = container.scrollHeight - container.scrollTop - container.clientHeight < threshold;
        
        if (isAtBottom) {
          hideNewMessageAlert();
        }
      });
    }
    
    function scrollToBottom() {
      const container = document.getElementById('chatContainer');
      container.scrollTop = container.scrollHeight;
    }
    
    function showNewMessageAlert() {
      if (!isAtBottom) {
        document.getElementById('newMessageAlert').classList.remove('hidden');
      }
    }
    
    function hideNewMessageAlert() {
      document.getElementById('newMessageAlert').classList.add('hidden');
    }
    
    // 새 메시지 알림 클릭
    document.getElementById('newMessageAlert')?.addEventListener('click', () => {
      scrollToBottom();
      hideNewMessageAlert();
    });
    
    // 시청자 카운터
    function startViewerCounter() {
      updateViewerCount();
      setInterval(updateViewerCount, 5000);
    }
    
    function updateViewerCount() {
      const base = 1000;
      const variation = Math.floor(Math.random() * 500);
      const count = base + variation;
      document.getElementById('viewerCount').textContent = count.toLocaleString();
    }
    
    // 슬로우 모드
    function showSlowModeWarning() {
      const indicator = document.getElementById('slowModeIndicator');
      indicator.classList.remove('hidden');
      
      let timeLeft = slowModeDelay;
      const interval = setInterval(() => {
        timeLeft--;
        document.getElementById('slowModeTime').textContent = timeLeft;
        
        if (timeLeft <= 0) {
          clearInterval(interval);
          indicator.classList.add('hidden');
        }
      }, 1000);
    }
    
    // 유저 프로필
    function showUserProfile(username, x, y) {
      const card = document.getElementById('userProfileCard');
      card.innerHTML = `
        <div class="flex items-center gap-3 mb-2">
          <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center">
            <span class="text-white font-bold">${username[0].toUpperCase()}</span>
          </div>
          <div>
            <div class="font-bold">${username}</div>
            <div class="text-xs text-gray-400">레벨 ${Math.floor(Math.random() * 50) + 1}</div>
          </div>
        </div>
        <div class="flex gap-2">
          <button class="px-3 py-1 bg-purple-600 rounded-full text-xs">팔로우</button>
          <button class="px-3 py-1 bg-gray-700 rounded-full text-xs">차단</button>
        </div>
      `;
      
      card.style.left = Math.min(x, window.innerWidth - 220) + 'px';
      card.style.top = Math.min(y, window.innerHeight - 150) + 'px';
      card.classList.remove('hidden');
      
      setTimeout(() => {
        card.classList.add('hidden');
      }, 3000);
    }
    
    // 유틸리티 함수들
    function handleInputKeydown(event) {
      if (event.key === 'Enter' && !event.shiftKey) {
        event.preventDefault();
        sendMessage();
      }
    }
    
    function adjustTextareaHeight(textarea) {
      textarea.style.height = 'auto';
      textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
    }
    
    function updateCharCount() {
      const input = document.getElementById('messageInput');
      const count = input.value.length;
      document.getElementById('charCount').textContent = `${count}/200`;
    }
    
    function animateSendButton() {
      const button = document.querySelector('.action-button.bg-gradient-to-r');
      button.style.transform = 'scale(0.9)';
      setTimeout(() => {
        button.style.transform = 'scale(1)';
      }, 100);
    }
    
    function formatTime(timestamp) {
      if (!timestamp) return '';
      const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);
      return date.toLocaleTimeString('ko-KR', { 
        hour: '2-digit', 
        minute: '2-digit' 
      });
    }
    
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
    
    // 입력 이벤트 리스너
    document.getElementById('messageInput')?.addEventListener('input', updateCharCount);
    
    // 페이지 언로드 시 정리
    window.addEventListener('beforeunload', () => {
      if (unsubscribe) {
        unsubscribe();
      }
    });
    
    // 테스트 메시지 생성 (개발용)
    function generateTestMessages() {
      const testMessages = [
        { username: '빠른러너123', text: '와 대박이다 ㅋㅋㅋ', badge: 'vip', level: 45 },
        { username: '프로마라토너', text: '오늘 기록 진짜 좋네요! 🔥', badge: 'subscriber', level: 23 },
        { username: '스트리머', text: '여러분 감사합니다! ❤️', isStreamer: true, level: 99 },
        { username: '열정러너', text: '저도 한번 도전해보고 싶어요!', badge: 'new', level: 5 },
        { username: '최고의선수', text: '@프로마라토너 님 대단하시네요 👏', badge: null, level: 15 },
        { username: 'VIP후원자', text: '응원합니다! 화이팅!', superChat: 10000, badge: 'vip', level: 50 }
      ];
      
      testMessages.forEach((msg, index) => {
        setTimeout(() => {
          displayMessage({
            ...msg,
            timestamp: new Date(),
            userId: 'test' + index
          });
        }, index * 1000);
      });
    }
    
    // 개발 모드에서 테스트 메시지 활성화
    if (window.location.hostname === 'localhost') {
      setTimeout(generateTestMessages, 2000);
    }
  </script>
</body>
</html>