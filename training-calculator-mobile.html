<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ê³ ê¸‰ í›ˆë ¨ í˜ì´ìŠ¤ ê³„ì‚°ê¸° - ëª¨ë°”ì¼ | Athlete Time</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .training-zone-easy { background: linear-gradient(135deg, #10b981, #059669); }
    .training-zone-marathon { background: linear-gradient(135deg, #3b82f6, #2563eb); }
    .training-zone-threshold { background: linear-gradient(135deg, #f59e0b, #d97706); }
    .training-zone-interval { background: linear-gradient(135deg, #ef4444, #dc2626); }
    .training-zone-repetition { background: linear-gradient(135deg, #a855f7, #9333ea); }
    
    .zone-card {
      transition: all 0.3s ease;
    }
    
    .zone-card:active {
      transform: scale(0.98);
    }
    
    .checkbox-custom {
      width: 24px;
      height: 24px;
      accent-color: #9333ea;
    }
    
    .radio-custom {
      width: 24px;
      height: 24px;
      accent-color: #9333ea;
    }
    
    @keyframes slideIn {
      from {
        transform: translateY(20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    
    .slide-in {
      animation: slideIn 0.5s ease;
    }
    
    .training-day {
      transition: all 0.3s ease;
    }
    
    .high-intensity {
      border-left: 4px solid #ef4444;
      background: linear-gradient(to right, rgba(239, 68, 68, 0.1), transparent);
    }
    
    .medium-intensity {
      border-left: 4px solid #3b82f6;
      background: linear-gradient(to right, rgba(59, 130, 246, 0.1), transparent);
    }
    
    .low-intensity {
      border-left: 4px solid #10b981;
      background: linear-gradient(to right, rgba(16, 185, 129, 0.1), transparent);
    }
    
    .rest-day {
      border-left: 4px solid #6b7280;
      background: linear-gradient(to right, rgba(107, 114, 128, 0.1), transparent);
    }
    
    /* Mobile specific adjustments */
    input[type="number"], input[type="text"], select {
      font-size: 16px !important; /* Prevent zoom on iOS */
    }
    
    .step-indicator {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    .step-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #e5e7eb;
      transition: all 0.3s ease;
    }
    
    .step-dot.active {
      background: #9333ea;
      transform: scale(1.2);
    }
    
    .step-line {
      flex: 1;
      height: 2px;
      background: #e5e7eb;
      margin: 0 5px;
    }
    
    .step-line.active {
      background: #9333ea;
    }
  </style>
</head>
<body class="bg-gray-50">
  <div class="min-h-screen">
    <!-- Header -->
    <div class="gradient-bg text-white p-3 sticky top-0 z-50">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-lg font-bold">ê³ ê¸‰ í›ˆë ¨ ê³„ì‚°ê¸°</h1>
          <p class="text-xs opacity-90">ê°œì¸ ë§ì¶¤í˜• í›ˆë ¨ ê³„íš</p>
        </div>
        <button onclick="window.location.href='index.html'" class="p-2">
          <i class="fas fa-home text-xl"></i>
        </button>
      </div>
    </div>

    <!-- Step Indicator -->
    <div class="bg-white px-4 py-3 shadow-sm">
      <div class="step-indicator">
        <div class="step-dot active" id="step1-dot"></div>
        <div class="step-line" id="step1-line"></div>
        <div class="step-dot" id="step2-dot"></div>
        <div class="step-line" id="step2-line"></div>
        <div class="step-dot" id="step3-dot"></div>
      </div>
      <div class="flex justify-between text-xs text-gray-600 mt-1">
        <span>ê¸°ë³¸ì •ë³´</span>
        <span>í›ˆë ¨ì„¤ì •</span>
        <span>ìƒíƒœì²´í¬</span>
      </div>
    </div>

    <!-- Main Content -->
    <div class="p-4 pb-20">
      <!-- Step 1: Basic Information -->
      <div id="step1" class="profile-section">
        <div class="bg-white rounded-lg shadow p-4 mb-4">
          <h2 class="text-lg font-bold mb-3 flex items-center">
            <i class="fas fa-user-circle mr-2 text-purple-600"></i>
            ê¸°ë³¸ ì •ë³´ ì…ë ¥
          </h2>
          
          <!-- Gender Selection -->
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">ì„±ë³„</label>
            <div class="grid grid-cols-2 gap-2">
              <button onclick="selectGender('male')" id="male-btn" 
                class="p-3 border-2 rounded-lg transition-all text-center">
                <i class="fas fa-mars text-xl mb-1 text-blue-500"></i>
                <div class="text-sm">ë‚¨ì„±</div>
              </button>
              <button onclick="selectGender('female')" id="female-btn"
                class="p-3 border-2 rounded-lg transition-all text-center">
                <i class="fas fa-venus text-xl mb-1 text-pink-500"></i>
                <div class="text-sm">ì—¬ì„±</div>
              </button>
            </div>
          </div>

          <!-- Base Record Input -->
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">
              <i class="fas fa-stopwatch mr-1 text-purple-600"></i>
              ê¸°ì¤€ ê¸°ë¡ ì…ë ¥
            </label>
            <select id="eventSelect" class="w-full p-3 border rounded-lg mb-2 text-base">
              <option value="">ì¢…ëª© ì„ íƒ</option>
              <option value="800m">800m</option>
              <option value="1500m">1500m</option>
              <option value="3000m">3000m</option>
              <option value="5000m">5000m</option>
              <option value="10000m">10000m</option>
              <option value="half">í•˜í”„ë§ˆë¼í†¤</option>
              <option value="full">í’€ë§ˆë¼í†¤</option>
            </select>
            
            <div class="grid grid-cols-3 gap-2">
              <input type="number" id="hours" placeholder="ì‹œ" min="0" max="23" 
                class="p-3 border rounded-lg text-center text-base">
              <input type="number" id="minutes" placeholder="ë¶„" min="0" max="59" 
                class="p-3 border rounded-lg text-center text-base">
              <input type="number" id="seconds" placeholder="ì´ˆ" min="0" max="59" 
                class="p-3 border rounded-lg text-center text-base">
            </div>
          </div>

          <button onclick="goToStep2()" 
            class="w-full bg-purple-600 text-white py-3 rounded-lg font-medium active:bg-purple-700">
            ë‹¤ìŒ ë‹¨ê³„ <i class="fas fa-arrow-right ml-2"></i>
          </button>
        </div>
      </div>

      <!-- Step 2: Training Settings -->
      <div id="step2" class="profile-section hidden">
        <div class="bg-white rounded-lg shadow p-4 mb-4">
          <h2 class="text-lg font-bold mb-3 flex items-center">
            <i class="fas fa-dumbbell mr-2 text-purple-600"></i>
            í›ˆë ¨ ì„¤ì •
          </h2>

          <!-- Training Frequency -->
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">í›ˆë ¨ ë¹ˆë„</label>
            <div class="grid grid-cols-2 gap-2">
              <button onclick="selectFrequency('1x')" id="freq-1x-btn"
                class="p-3 border-2 rounded-lg transition-all text-center">
                <i class="fas fa-calendar-day text-xl mb-1 text-green-500"></i>
                <div class="text-sm font-medium">1ì¼ 1íšŒ</div>
                <div class="text-xs text-gray-600">ê¸°ë³¸ í›ˆë ¨</div>
              </button>
              <button onclick="selectFrequency('2x')" id="freq-2x-btn"
                class="p-3 border-2 rounded-lg transition-all text-center">
                <i class="fas fa-calendar-week text-xl mb-1 text-blue-500"></i>
                <div class="text-sm font-medium">1ì¼ 2íšŒ</div>
                <div class="text-xs text-gray-600">ì§‘ì¤‘ í›ˆë ¨</div>
              </button>
            </div>
          </div>

          <!-- Training Intensity -->
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">í›ˆë ¨ ê°•ë„</label>
            <div class="space-y-2">
              <button onclick="selectIntensity('beginner')" id="intensity-beginner-btn"
                class="w-full p-3 border-2 rounded-lg transition-all text-left flex items-center">
                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3">
                  <span class="text-green-600 font-bold">ì´ˆ</span>
                </div>
                <div>
                  <div class="font-medium">ì´ˆê¸‰</div>
                  <div class="text-xs text-gray-600">í›ˆë ¨ ê²½ë ¥ 1ë…„ ë¯¸ë§Œ</div>
                </div>
              </button>
              
              <button onclick="selectIntensity('intermediate')" id="intensity-intermediate-btn"
                class="w-full p-3 border-2 rounded-lg transition-all text-left flex items-center">
                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                  <span class="text-blue-600 font-bold">ì¤‘</span>
                </div>
                <div>
                  <div class="font-medium">ì¤‘ê¸‰</div>
                  <div class="text-xs text-gray-600">í›ˆë ¨ ê²½ë ¥ 1-3ë…„</div>
                </div>
              </button>
              
              <button onclick="selectIntensity('advanced')" id="intensity-advanced-btn"
                class="w-full p-3 border-2 rounded-lg transition-all text-left flex items-center">
                <div class="w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3">
                  <span class="text-red-600 font-bold">ê³ </span>
                </div>
                <div>
                  <div class="font-medium">ê³ ê¸‰</div>
                  <div class="text-xs text-gray-600">í›ˆë ¨ ê²½ë ¥ 3ë…„ ì´ìƒ</div>
                </div>
              </button>
            </div>
          </div>

          <div class="flex gap-2">
            <button onclick="goToStep1()" 
              class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-medium">
              <i class="fas fa-arrow-left mr-2"></i> ì´ì „
            </button>
            <button onclick="goToStep3()" 
              class="flex-1 bg-purple-600 text-white py-3 rounded-lg font-medium">
              ë‹¤ìŒ <i class="fas fa-arrow-right ml-2"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Step 3: Condition Checklist -->
      <div id="step3" class="profile-section hidden">
        <div class="bg-white rounded-lg shadow p-4 mb-4">
          <h2 class="text-lg font-bold mb-3 flex items-center">
            <i class="fas fa-clipboard-check mr-2 text-purple-600"></i>
            í˜„ì¬ ìƒíƒœ ì²´í¬
          </h2>
          
          <p class="text-sm text-gray-600 mb-3">í•´ë‹¹ë˜ëŠ” í•­ëª©ì„ ëª¨ë‘ ì„ íƒí•˜ì„¸ìš”</p>

          <div class="space-y-2 mb-4">
            <label class="flex items-center p-3 bg-gray-50 rounded-lg">
              <input type="checkbox" id="injury-recovery" class="checkbox-custom mr-3">
              <div>
                <div class="font-medium">ë¶€ìƒ íšŒë³µ ì¤‘</div>
                <div class="text-xs text-gray-600">ê°•ë„ 30% ê°ì†Œ</div>
              </div>
            </label>

            <label class="flex items-center p-3 bg-gray-50 rounded-lg">
              <input type="checkbox" id="high-fatigue" class="checkbox-custom mr-3">
              <div>
                <div class="font-medium">ë†’ì€ í”¼ë¡œë„</div>
                <div class="text-xs text-gray-600">íšŒë³µ ì‹œê°„ ì¦ê°€</div>
              </div>
            </label>

            <label class="flex items-center p-3 bg-gray-50 rounded-lg">
              <input type="checkbox" id="competition-prep" class="checkbox-custom mr-3">
              <div>
                <div class="font-medium">ëŒ€íšŒ ì¤€ë¹„ (4ì£¼ ì´ë‚´)</div>
                <div class="text-xs text-gray-600">í…Œì´í¼ë§ ì ìš©</div>
              </div>
            </label>

            <label class="flex items-center p-3 bg-gray-50 rounded-lg">
              <input type="checkbox" id="off-season" class="checkbox-custom mr-3">
              <div>
                <div class="font-medium">ë¹„ì‹œì¦Œ ê¸°ê°„</div>
                <div class="text-xs text-gray-600">ê¸°ì´ˆ ì²´ë ¥ ì¤‘ì‹¬</div>
              </div>
            </label>

            <label class="flex items-center p-3 bg-gray-50 rounded-lg">
              <input type="checkbox" id="altitude-training" class="checkbox-custom mr-3">
              <div>
                <div class="font-medium">ê³ ì§€ëŒ€ í›ˆë ¨</div>
                <div class="text-xs text-gray-600">ê°•ë„ ì¡°ì ˆ í•„ìš”</div>
              </div>
            </label>

            <label class="flex items-center p-3 bg-gray-50 rounded-lg">
              <input type="checkbox" id="hot-weather" class="checkbox-custom mr-3">
              <div>
                <div class="font-medium">ë”ìš´ ë‚ ì”¨ (30Â°C+)</div>
                <div class="text-xs text-gray-600">í˜ì´ìŠ¤ ì¡°ì ˆ</div>
              </div>
            </label>

            <label class="flex items-center p-3 bg-gray-50 rounded-lg">
              <input type="checkbox" id="time-constraint" class="checkbox-custom mr-3">
              <div>
                <div class="font-medium">ì‹œê°„ ì œì•½</div>
                <div class="text-xs text-gray-600">íš¨ìœ¨ì  í›ˆë ¨</div>
              </div>
            </label>

            <label class="flex items-center p-3 bg-gray-50 rounded-lg">
              <input type="checkbox" id="muscle-soreness" class="checkbox-custom mr-3">
              <div>
                <div class="font-medium">ê·¼ìœ¡í†µ</div>
                <div class="text-xs text-gray-600">íšŒë³µ ìš´ë™ ì¶”ê°€</div>
              </div>
            </label>

            <label class="flex items-center p-3 bg-gray-50 rounded-lg">
              <input type="checkbox" id="stress" class="checkbox-custom mr-3">
              <div>
                <div class="font-medium">ìŠ¤íŠ¸ë ˆìŠ¤/ìˆ˜ë©´ ë¶€ì¡±</div>
                <div class="text-xs text-gray-600">ê°•ë„ 20% ê°ì†Œ</div>
              </div>
            </label>

            <label class="flex items-center p-3 bg-gray-50 rounded-lg">
              <input type="checkbox" id="returning" class="checkbox-custom mr-3">
              <div>
                <div class="font-medium">í›ˆë ¨ ë³µê·€ (2ì£¼ ì´ìƒ íœ´ì‹)</div>
                <div class="text-xs text-gray-600">ì ì§„ì  ì¦ê°€</div>
              </div>
            </label>

            <label class="flex items-center p-3 bg-gray-50 rounded-lg">
              <input type="checkbox" id="cross-training" class="checkbox-custom mr-3">
              <div>
                <div class="font-medium">í¬ë¡œìŠ¤ íŠ¸ë ˆì´ë‹ ë³‘í–‰</div>
                <div class="text-xs text-gray-600">ë‹¬ë¦¬ê¸° ë³¼ë¥¨ ì¡°ì ˆ</div>
              </div>
            </label>
          </div>

          <div class="flex gap-2">
            <button onclick="goToStep2()" 
              class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-medium">
              <i class="fas fa-arrow-left mr-2"></i> ì´ì „
            </button>
            <button onclick="generateTrainingPlan()" 
              class="flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-medium">
              <i class="fas fa-calculator mr-2"></i> ê³„íš ìƒì„±
            </button>
          </div>
        </div>
      </div>

      <!-- Results Section -->
      <div id="results" class="hidden">
        <!-- Profile Summary -->
        <div class="bg-white rounded-lg shadow p-4 mb-4">
          <h3 class="font-bold mb-2 text-sm">í”„ë¡œí•„ ìš”ì•½</h3>
          <div id="profileSummary" class="text-xs space-y-1"></div>
        </div>

        <!-- VDOT and Training Zones -->
        <div class="bg-white rounded-lg shadow p-4 mb-4">
          <h3 class="font-bold mb-2 text-sm">VDOT ë° í›ˆë ¨ êµ¬ì—­</h3>
          <div id="vdotDisplay" class="text-2xl font-bold text-purple-600 mb-3"></div>
          
          <div id="trainingZones" class="space-y-2">
            <!-- Training zones will be inserted here -->
          </div>
        </div>

        <!-- 10-Day Training Cycle -->
        <div class="bg-white rounded-lg shadow p-4 mb-4">
          <h3 class="font-bold mb-3 text-sm">10ì¼ í›ˆë ¨ ì£¼ê¸°</h3>
          <div id="trainingCycle" class="space-y-2">
            <!-- Training days will be inserted here -->
          </div>
        </div>

        <!-- Special Recommendations -->
        <div class="bg-white rounded-lg shadow p-4 mb-4">
          <h3 class="font-bold mb-2 text-sm flex items-center">
            <i class="fas fa-lightbulb mr-2 text-yellow-500"></i>
            ë§ì¶¤ ê¶Œì¥ì‚¬í•­
          </h3>
          <div id="recommendations" class="text-xs space-y-2">
            <!-- Recommendations will be inserted here -->
          </div>
        </div>

        <!-- Reset Button -->
        <button onclick="resetCalculator()" 
          class="w-full bg-gray-200 text-gray-700 py-3 rounded-lg font-medium">
          <i class="fas fa-redo mr-2"></i> ë‹¤ì‹œ ê³„ì‚°í•˜ê¸°
        </button>
      </div>
    </div>

    <!-- Footer -->
    <div class="fixed bottom-0 left-0 right-0 bg-white border-t px-4 py-2">
      <div class="text-center text-xs text-gray-600">
        <div>ì œì‘ì: ì¥í˜¸ì¤€ ì½”ì¹˜</div>
        <div class="text-gray-400">Â© 2024 Athlete Time</div>
      </div>
    </div>
  </div>

  <script>
    // User profile object to store all selections
    let userProfile = {
      gender: null,
      frequency: null,
      intensity: null,
      baseRecord: {},
      vdot: 0,
      conditions: {},
      adjustments: {
        vdot: 1.0,
        volume: 1.0,
        intensity: 1.0
      }
    };

    // Navigation functions
    function goToStep1() {
      document.getElementById('step1').classList.remove('hidden');
      document.getElementById('step2').classList.add('hidden');
      document.getElementById('step3').classList.add('hidden');
      updateStepIndicator(1);
    }

    function goToStep2() {
      if (!validateStep1()) {
        alert('ëª¨ë“  í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      document.getElementById('step1').classList.add('hidden');
      document.getElementById('step2').classList.remove('hidden');
      document.getElementById('step3').classList.add('hidden');
      updateStepIndicator(2);
    }

    function goToStep3() {
      if (!validateStep2()) {
        alert('í›ˆë ¨ ë¹ˆë„ì™€ ê°•ë„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }
      document.getElementById('step1').classList.add('hidden');
      document.getElementById('step2').classList.add('hidden');
      document.getElementById('step3').classList.remove('hidden');
      updateStepIndicator(3);
    }

    function updateStepIndicator(step) {
      // Reset all
      document.querySelectorAll('.step-dot').forEach(dot => dot.classList.remove('active'));
      document.querySelectorAll('.step-line').forEach(line => line.classList.remove('active'));
      
      // Activate appropriate steps
      for (let i = 1; i <= step; i++) {
        document.getElementById(`step${i}-dot`).classList.add('active');
        if (i < step) {
          document.getElementById(`step${i}-line`).classList.add('active');
        }
      }
    }

    // Selection functions
    function selectGender(gender) {
      userProfile.gender = gender;
      
      // Update UI
      document.getElementById('male-btn').classList.remove('border-purple-600', 'bg-purple-50');
      document.getElementById('female-btn').classList.remove('border-purple-600', 'bg-purple-50');
      
      if (gender === 'male') {
        document.getElementById('male-btn').classList.add('border-purple-600', 'bg-purple-50');
      } else {
        document.getElementById('female-btn').classList.add('border-purple-600', 'bg-purple-50');
      }
    }

    function selectFrequency(freq) {
      userProfile.frequency = freq;
      
      // Update UI
      document.getElementById('freq-1x-btn').classList.remove('border-purple-600', 'bg-purple-50');
      document.getElementById('freq-2x-btn').classList.remove('border-purple-600', 'bg-purple-50');
      
      if (freq === '1x') {
        document.getElementById('freq-1x-btn').classList.add('border-purple-600', 'bg-purple-50');
      } else {
        document.getElementById('freq-2x-btn').classList.add('border-purple-600', 'bg-purple-50');
      }
    }

    function selectIntensity(intensity) {
      userProfile.intensity = intensity;
      
      // Update UI
      document.getElementById('intensity-beginner-btn').classList.remove('border-purple-600', 'bg-purple-50');
      document.getElementById('intensity-intermediate-btn').classList.remove('border-purple-600', 'bg-purple-50');
      document.getElementById('intensity-advanced-btn').classList.remove('border-purple-600', 'bg-purple-50');
      
      document.getElementById(`intensity-${intensity}-btn`).classList.add('border-purple-600', 'bg-purple-50');
    }

    // Validation functions
    function validateStep1() {
      if (!userProfile.gender) return false;
      
      const event = document.getElementById('eventSelect').value;
      const hours = parseInt(document.getElementById('hours').value) || 0;
      const minutes = parseInt(document.getElementById('minutes').value) || 0;
      const seconds = parseInt(document.getElementById('seconds').value) || 0;
      
      if (!event || (hours === 0 && minutes === 0 && seconds === 0)) {
        return false;
      }
      
      userProfile.baseRecord = {
        event: event,
        hours: hours,
        minutes: minutes,
        seconds: seconds,
        totalSeconds: hours * 3600 + minutes * 60 + seconds
      };
      
      return true;
    }

    function validateStep2() {
      return userProfile.frequency && userProfile.intensity;
    }

    // VDOT Calculation
    function calculateVDOT(event, timeInSeconds) {
      const distances = {
        '800m': 0.8,
        '1500m': 1.5,
        '3000m': 3,
        '5000m': 5,
        '10000m': 10,
        'half': 21.0975,
        'full': 42.195
      };
      
      const distance = distances[event];
      const timeInMinutes = timeInSeconds / 60;
      const velocity = (distance * 1000) / timeInMinutes;
      
      const percentMax = 0.8 + 0.1894393 * Math.exp(-0.012778 * timeInMinutes) + 
                        0.2989558 * Math.exp(-0.1932605 * timeInMinutes);
      const vo2 = -4.60 + 0.182258 * velocity + 0.000104 * velocity * velocity;
      const vdot = vo2 / percentMax;
      
      return Math.round(vdot * 10) / 10;
    }

    // Training pace calculation
    function calculateTrainingPaces(vdot) {
      const adjustedVdot = vdot * userProfile.adjustments.vdot;
      
      return {
        easy: calculatePaceForZone(adjustedVdot, 0.65),
        marathon: calculatePaceForZone(adjustedVdot, 0.75),
        threshold: calculatePaceForZone(adjustedVdot, 0.83),
        interval: calculatePaceForZone(adjustedVdot, 0.95),
        repetition: calculatePaceForZone(adjustedVdot, 1.05)
      };
    }

    function calculatePaceForZone(vdot, intensity) {
      const velocity = (vdot * intensity - 4.6) / 0.182258;
      const pacePerKm = 1000 / velocity;
      const minutes = Math.floor(pacePerKm);
      const seconds = Math.round((pacePerKm - minutes) * 60);
      return `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }

    // Generate training plan
    function generateTrainingPlan() {
      // Collect conditions
      userProfile.conditions = {
        injuryRecovery: document.getElementById('injury-recovery').checked,
        highFatigue: document.getElementById('high-fatigue').checked,
        competitionPrep: document.getElementById('competition-prep').checked,
        offSeason: document.getElementById('off-season').checked,
        altitudeTraining: document.getElementById('altitude-training').checked,
        hotWeather: document.getElementById('hot-weather').checked,
        timeConstraint: document.getElementById('time-constraint').checked,
        muscleSoreness: document.getElementById('muscle-soreness').checked,
        stress: document.getElementById('stress').checked,
        returning: document.getElementById('returning').checked,
        crossTraining: document.getElementById('cross-training').checked
      };
      
      // Calculate adjustments
      calculateAdjustments();
      
      // Calculate VDOT
      userProfile.vdot = calculateVDOT(userProfile.baseRecord.event, userProfile.baseRecord.totalSeconds);
      
      // Display results
      displayResults();
    }

    function calculateAdjustments() {
      // Reset adjustments
      userProfile.adjustments = {
        vdot: 1.0,
        volume: 1.0,
        intensity: 1.0
      };
      
      // Gender adjustment
      if (userProfile.gender === 'female') {
        userProfile.adjustments.vdot *= 0.88;
      }
      
      // Intensity level adjustments
      if (userProfile.intensity === 'beginner') {
        userProfile.adjustments.volume *= 0.7;
        userProfile.adjustments.intensity *= 0.85;
      } else if (userProfile.intensity === 'intermediate') {
        userProfile.adjustments.volume *= 0.85;
        userProfile.adjustments.intensity *= 0.92;
      }
      
      // Condition-based adjustments
      if (userProfile.conditions.injuryRecovery) {
        userProfile.adjustments.intensity *= 0.7;
        userProfile.adjustments.volume *= 0.6;
      }
      
      if (userProfile.conditions.highFatigue) {
        userProfile.adjustments.intensity *= 0.85;
      }
      
      if (userProfile.conditions.stress) {
        userProfile.adjustments.intensity *= 0.8;
        userProfile.adjustments.volume *= 0.9;
      }
      
      if (userProfile.conditions.returning) {
        userProfile.adjustments.volume *= 0.5;
        userProfile.adjustments.intensity *= 0.75;
      }
      
      if (userProfile.conditions.hotWeather) {
        userProfile.adjustments.intensity *= 0.9;
      }
      
      if (userProfile.conditions.altitudeTraining) {
        userProfile.adjustments.intensity *= 0.85;
      }
    }

    function displayResults() {
      // Hide steps, show results
      document.getElementById('step3').classList.add('hidden');
      document.getElementById('results').classList.remove('hidden');
      
      // Display profile summary
      displayProfileSummary();
      
      // Display VDOT
      const adjustedVdot = Math.round(userProfile.vdot * userProfile.adjustments.vdot * 10) / 10;
      document.getElementById('vdotDisplay').innerHTML = `
        VDOT: ${adjustedVdot}
        ${userProfile.gender === 'female' ? '<span class="text-sm text-pink-500">(ì—¬ì„± ë³´ì •)</span>' : ''}
      `;
      
      // Display training zones
      displayTrainingZones();
      
      // Display training cycle
      displayTrainingCycle();
      
      // Display recommendations
      displayRecommendations();
    }

    function displayProfileSummary() {
      const summaryHTML = `
        <div class="flex flex-wrap gap-2">
          <span class="px-2 py-1 bg-purple-100 text-purple-700 rounded">
            ${userProfile.gender === 'male' ? 'ë‚¨ì„±' : 'ì—¬ì„±'}
          </span>
          <span class="px-2 py-1 bg-blue-100 text-blue-700 rounded">
            ${userProfile.frequency === '1x' ? '1ì¼ 1íšŒ' : '1ì¼ 2íšŒ'}
          </span>
          <span class="px-2 py-1 bg-green-100 text-green-700 rounded">
            ${userProfile.intensity === 'beginner' ? 'ì´ˆê¸‰' : 
              userProfile.intensity === 'intermediate' ? 'ì¤‘ê¸‰' : 'ê³ ê¸‰'}
          </span>
          ${Object.entries(userProfile.conditions)
            .filter(([_, value]) => value)
            .map(([key, _]) => {
              const labels = {
                injuryRecovery: 'ë¶€ìƒíšŒë³µ',
                highFatigue: 'í”¼ë¡œëˆ„ì ',
                competitionPrep: 'ëŒ€íšŒì¤€ë¹„',
                offSeason: 'ë¹„ì‹œì¦Œ',
                altitudeTraining: 'ê³ ì§€ëŒ€',
                hotWeather: 'ë”ìš´ë‚ ì”¨',
                timeConstraint: 'ì‹œê°„ì œì•½',
                muscleSoreness: 'ê·¼ìœ¡í†µ',
                stress: 'ìŠ¤íŠ¸ë ˆìŠ¤',
                returning: 'í›ˆë ¨ë³µê·€',
                crossTraining: 'í¬ë¡œìŠ¤íŠ¸ë ˆì´ë‹'
              };
              return `<span class="px-2 py-1 bg-red-100 text-red-700 rounded">${labels[key]}</span>`;
            }).join('')}
        </div>
      `;
      document.getElementById('profileSummary').innerHTML = summaryHTML;
    }

    function displayTrainingZones() {
      const paces = calculateTrainingPaces(userProfile.vdot);
      const zones = [
        { name: 'Easy (E)', pace: paces.easy, color: 'training-zone-easy', icon: 'ğŸš¶', description: 'íšŒë³µ ë° ê¸°ì´ˆ ì§€êµ¬ë ¥' },
        { name: 'Marathon (M)', pace: paces.marathon, color: 'training-zone-marathon', icon: 'ğŸƒ', description: 'ë§ˆë¼í†¤ í˜ì´ìŠ¤' },
        { name: 'Threshold (T)', pace: paces.threshold, color: 'training-zone-threshold', icon: 'ğŸ’ª', description: 'ì –ì‚° ì—­ì¹˜' },
        { name: 'Interval (I)', pace: paces.interval, color: 'training-zone-interval', icon: 'âš¡', description: 'VO2max í–¥ìƒ' },
        { name: 'Repetition (R)', pace: paces.repetition, color: 'training-zone-repetition', icon: 'ğŸš€', description: 'ìŠ¤í”¼ë“œ ë° í¼' }
      ];
      
      const zonesHTML = zones.map(zone => `
        <div class="flex items-center justify-between p-2 rounded-lg ${zone.color} text-white">
          <div class="flex items-center">
            <span class="text-lg mr-2">${zone.icon}</span>
            <div>
              <div class="font-medium text-sm">${zone.name}</div>
              <div class="text-xs opacity-90">${zone.description}</div>
            </div>
          </div>
          <div class="text-lg font-bold">${zone.pace}/km</div>
        </div>
      `).join('');
      
      document.getElementById('trainingZones').innerHTML = zonesHTML;
    }

    function displayTrainingCycle() {
      const cycle = generate10DayCycle();
      const cycleHTML = cycle.map((day, index) => `
        <div class="training-day ${day.intensity} p-3 rounded-lg">
          <div class="flex justify-between items-start mb-1">
            <span class="font-bold text-sm">Day ${index + 1}</span>
            <span class="text-xs px-2 py-1 bg-white rounded">
              ${day.type}
            </span>
          </div>
          <div class="text-xs">
            ${day.description}
          </div>
          ${day.details ? `<div class="text-xs mt-1 opacity-80">${day.details}</div>` : ''}
        </div>
      `).join('');
      
      document.getElementById('trainingCycle').innerHTML = cycleHTML;
    }

    function generate10DayCycle() {
      let cycle = [];
      
      if (userProfile.frequency === '1x') {
        // Single session per day
        if (userProfile.intensity === 'beginner') {
          cycle = [
            { type: 'Easy', intensity: 'low-intensity', description: 'E pace 40-50ë¶„', details: 'í¸ì•ˆí•œ ëŒ€í™” ê°€ëŠ¥í•œ ì†ë„' },
            { type: 'Threshold', intensity: 'medium-intensity', description: 'T pace 20ë¶„', details: '2x10ë¶„ (2ë¶„ íœ´ì‹)' },
            { type: 'Easy', intensity: 'low-intensity', description: 'E pace 30-40ë¶„', details: 'íšŒë³µ ì¡°ê¹…' },
            { type: 'Rest', intensity: 'rest-day', description: 'ì™„ì „ íœ´ì‹ ë˜ëŠ” ê°€ë²¼ìš´ ì‚°ì±…', details: '' },
            { type: 'Interval', intensity: 'high-intensity', description: 'I pace 15ë¶„', details: '5x3ë¶„ (3ë¶„ ì¡°ê¹… íœ´ì‹)' },
            { type: 'Easy', intensity: 'low-intensity', description: 'E pace 30ë¶„', details: 'íšŒë³µ ì¡°ê¹…' },
            { type: 'Long Run', intensity: 'low-intensity', description: 'E pace 60-70ë¶„', details: 'ì£¼ê°„ ì¥ê±°ë¦¬' },
            { type: 'Rest', intensity: 'rest-day', description: 'ì™„ì „ íœ´ì‹', details: '' },
            { type: 'Tempo', intensity: 'medium-intensity', description: 'M pace 30ë¶„', details: 'ì§€ì† ì£¼í–‰' },
            { type: 'Easy', intensity: 'low-intensity', description: 'E pace 30ë¶„', details: 'íšŒë³µ ë° ì •ë¦¬' }
          ];
        } else if (userProfile.intensity === 'intermediate') {
          cycle = [
            { type: 'Easy', intensity: 'low-intensity', description: 'E pace 50-60ë¶„', details: 'ê¸°ì´ˆ ì§€êµ¬ë ¥' },
            { type: 'Threshold', intensity: 'medium-intensity', description: 'T pace 30ë¶„', details: '3x10ë¶„ (2ë¶„ íœ´ì‹)' },
            { type: 'Easy', intensity: 'low-intensity', description: 'E pace 40-50ë¶„', details: 'íšŒë³µ' },
            { type: 'Fartlek', intensity: 'medium-intensity', description: 'ë³€ì†ì£¼ 40ë¶„', details: '1ë¶„ hard / 2ë¶„ easy x8' },
            { type: 'Interval', intensity: 'high-intensity', description: 'I pace 20ë¶„', details: '4x5ë¶„ (3ë¶„ íœ´ì‹)' },
            { type: 'Easy', intensity: 'low-intensity', description: 'E pace 40ë¶„', details: 'íšŒë³µ' },
            { type: 'Long Run', intensity: 'low-intensity', description: 'E/M pace 80-90ë¶„', details: 'ë§ˆì§€ë§‰ 20ë¶„ M pace' },
            { type: 'Rest', intensity: 'rest-day', description: 'ëŠ¥ë™ì  íšŒë³µ', details: 'ìˆ˜ì˜ ë˜ëŠ” ìì „ê±°' },
            { type: 'Repetition', intensity: 'high-intensity', description: 'R pace 15ë¶„', details: '6x400m (ì™„ì „ íšŒë³µ)' },
            { type: 'Easy', intensity: 'low-intensity', description: 'E pace 40ë¶„', details: 'ì¿¨ë‹¤ìš´' }
          ];
        } else {
          cycle = [
            { type: 'Easy', intensity: 'low-intensity', description: 'E pace 60-70ë¶„', details: 'AM ì„¸ì…˜' },
            { type: 'Threshold', intensity: 'medium-intensity', description: 'T pace 40ë¶„', details: '2x20ë¶„ (3ë¶„ íœ´ì‹)' },
            { type: 'Double', intensity: 'low-intensity', description: 'AM: E 40ë¶„, PM: E 30ë¶„', details: 'ì´ì¤‘ íšŒë³µ' },
            { type: 'Hills', intensity: 'high-intensity', description: 'ì–¸ë• ë°˜ë³µ x10', details: '2ë¶„ ìƒìŠ¹ / ì¡°ê¹… í•˜ê°•' },
            { type: 'Interval', intensity: 'high-intensity', description: 'I pace 25ë¶„', details: '5x5ë¶„ (2ë¶„ íœ´ì‹)' },
            { type: 'Easy', intensity: 'low-intensity', description: 'E pace 50ë¶„', details: 'íšŒë³µ' },
            { type: 'Long Run', intensity: 'medium-intensity', description: 'Progressive 100-110ë¶„', details: 'Eâ†’Mâ†’T pace' },
            { type: 'Recovery', intensity: 'low-intensity', description: 'E pace 30-40ë¶„', details: 'ë§¤ìš° í¸ì•ˆí•œ ì†ë„' },
            { type: 'Repetition', intensity: 'high-intensity', description: 'R pace 20ë¶„', details: '8x400m + 4x200m' },
            { type: 'Easy', intensity: 'low-intensity', description: 'E pace 50ë¶„', details: 'ì •ë¦¬ ë° íšŒë³µ' }
          ];
        }
      } else {
        // Double sessions per day
        if (userProfile.intensity === 'beginner') {
          cycle = [
            { type: 'Double Easy', intensity: 'low-intensity', description: 'AM: E 30ë¶„, PM: E 25ë¶„', details: 'ì ì‘ ë‹¨ê³„' },
            { type: 'Threshold+Easy', intensity: 'medium-intensity', description: 'AM: T 20ë¶„, PM: E 20ë¶„', details: '' },
            { type: 'Recovery', intensity: 'low-intensity', description: 'AM: E 25ë¶„, PM: íœ´ì‹', details: '' },
            { type: 'Rest', intensity: 'rest-day', description: 'ì™„ì „ íœ´ì‹', details: '' },
            { type: 'Interval+Easy', intensity: 'high-intensity', description: 'AM: I 15ë¶„, PM: E 20ë¶„', details: '' },
            { type: 'Double Easy', intensity: 'low-intensity', description: 'AM: E 30ë¶„, PM: E 20ë¶„', details: '' },
            { type: 'Long+Recovery', intensity: 'low-intensity', description: 'AM: E 60ë¶„, PM: íšŒë³µ ì¡°ê¹… 15ë¶„', details: '' },
            { type: 'Rest', intensity: 'rest-day', description: 'ì™„ì „ íœ´ì‹', details: '' },
            { type: 'Tempo+Easy', intensity: 'medium-intensity', description: 'AM: M 25ë¶„, PM: E 20ë¶„', details: '' },
            { type: 'Recovery', intensity: 'low-intensity', description: 'AM: E 30ë¶„, PM: íœ´ì‹', details: '' }
          ];
        } else if (userProfile.intensity === 'intermediate') {
          cycle = [
            { type: 'Double Easy', intensity: 'low-intensity', description: 'AM: E 40ë¶„, PM: E 30ë¶„', details: '' },
            { type: 'Threshold+Easy', intensity: 'medium-intensity', description: 'AM: T 30ë¶„, PM: E 30ë¶„', details: '' },
            { type: 'Easy+Strides', intensity: 'low-intensity', description: 'AM: E 40ë¶„, PM: E 20ë¶„ + 6x100m', details: '' },
            { type: 'Fartlek+Recovery', intensity: 'medium-intensity', description: 'AM: ë³€ì† 40ë¶„, PM: íšŒë³µ 20ë¶„', details: '' },
            { type: 'Interval+Easy', intensity: 'high-intensity', description: 'AM: I 20ë¶„, PM: E 25ë¶„', details: '' },
            { type: 'Double Easy', intensity: 'low-intensity', description: 'AM: E 35ë¶„, PM: E 30ë¶„', details: '' },
            { type: 'Long+Recovery', intensity: 'low-intensity', description: 'AM: E/M 80ë¶„, PM: íšŒë³µ 20ë¶„', details: '' },
            { type: 'Easy Only', intensity: 'low-intensity', description: 'AM: E 40ë¶„, PM: íœ´ì‹', details: '' },
            { type: 'Rep+Easy', intensity: 'high-intensity', description: 'AM: R 15ë¶„, PM: E 25ë¶„', details: '' },
            { type: 'Recovery', intensity: 'low-intensity', description: 'AM: E 35ë¶„, PM: E 20ë¶„', details: '' }
          ];
        } else {
          cycle = [
            { type: 'Double Base', intensity: 'low-intensity', description: 'AM: E 50ë¶„, PM: E 40ë¶„', details: '90ë¶„ ì´ ë³¼ë¥¨' },
            { type: 'Threshold+Easy', intensity: 'medium-intensity', description: 'AM: T 40ë¶„, PM: E 40ë¶„', details: 'ì –ì‚° ì—­ì¹˜ ê°•í™”' },
            { type: 'Easy+Tempo', intensity: 'medium-intensity', description: 'AM: E 45ë¶„, PM: M 30ë¶„', details: '' },
            { type: 'Hills+Recovery', intensity: 'high-intensity', description: 'AM: ì–¸ë• x12, PM: E 30ë¶„', details: '' },
            { type: 'Interval+Easy', intensity: 'high-intensity', description: 'AM: I 25ë¶„, PM: E 35ë¶„', details: 'VO2max ì„¸ì…˜' },
            { type: 'Double Easy', intensity: 'low-intensity', description: 'AM: E 45ë¶„, PM: E 35ë¶„', details: '' },
            { type: 'Long+Shake', intensity: 'medium-intensity', description: 'AM: Progressive 100ë¶„, PM: íšŒë³µ 20ë¶„', details: '' },
            { type: 'Recovery', intensity: 'low-intensity', description: 'AM: E 40ë¶„, PM: íœ´ì‹ ë˜ëŠ” ë§ˆì‚¬ì§€', details: '' },
            { type: 'Rep+Easy', intensity: 'high-intensity', description: 'AM: R 20ë¶„, PM: E 30ë¶„', details: 'ìŠ¤í”¼ë“œ ì„¸ì…˜' },
            { type: 'Taper', intensity: 'low-intensity', description: 'AM: E 40ë¶„, PM: E 25ë¶„', details: 'ë‹¤ìŒ ì£¼ê¸° ì¤€ë¹„' }
          ];
        }
      }
      
      // Apply condition-based modifications
      if (userProfile.conditions.injuryRecovery) {
        cycle = cycle.map(day => {
          if (day.intensity === 'high-intensity') {
            day.intensity = 'medium-intensity';
            day.description = day.description.replace(/I pace|R pace/, 'T pace');
          }
          return day;
        });
      }
      
      if (userProfile.conditions.competitionPrep) {
        // Tapering adjustments for last 3 days
        for (let i = 7; i < 10; i++) {
          if (cycle[i]) {
            cycle[i].description = cycle[i].description.replace(/\d+ë¶„/, (match) => {
              const minutes = parseInt(match);
              return Math.round(minutes * 0.6) + 'ë¶„';
            });
          }
        }
      }
      
      return cycle;
    }

    function displayRecommendations() {
      let recommendations = [];
      
      // Gender-specific recommendations
      if (userProfile.gender === 'female') {
        recommendations.push({
          icon: 'â™€ï¸',
          title: 'ì—¬ì„± íŠ¹í™” ì¡°ì–¸',
          text: 'ì² ë¶„ ìˆ˜ì¹˜ë¥¼ ì •ê¸°ì ìœ¼ë¡œ ì²´í¬í•˜ê³ , ìƒë¦¬ ì£¼ê¸°ì— ë”°ë¼ ê³ ê°•ë„ í›ˆë ¨ ì¼ì •ì„ ì¡°ì •í•˜ì„¸ìš”.'
        });
      }
      
      // Frequency recommendations
      if (userProfile.frequency === '2x') {
        recommendations.push({
          icon: 'â°',
          title: 'ì´ì¤‘ ì„¸ì…˜ íŒ',
          text: 'AM/PM ì„¸ì…˜ ê°„ ìµœì†Œ 6ì‹œê°„ ê°„ê²©ì„ ìœ ì§€í•˜ê³ , PM ì„¸ì…˜ì€ ê°€ë²¼ìš´ ê°•ë„ë¡œ ì§„í–‰í•˜ì„¸ìš”.'
        });
      }
      
      // Condition-specific recommendations
      if (userProfile.conditions.injuryRecovery) {
        recommendations.push({
          icon: 'ğŸ¥',
          title: 'ë¶€ìƒ íšŒë³µ',
          text: 'í†µì¦ì´ ìˆë‹¤ë©´ ì¦‰ì‹œ ì¤‘ë‹¨í•˜ê³ , í¬ë¡œìŠ¤ íŠ¸ë ˆì´ë‹(ìˆ˜ì˜, ìì „ê±°)ì„ ë³‘í–‰í•˜ì„¸ìš”.'
        });
      }
      
      if (userProfile.conditions.highFatigue) {
        recommendations.push({
          icon: 'ğŸ˜´',
          title: 'í”¼ë¡œ ê´€ë¦¬',
          text: 'ìˆ˜ë©´ ì‹œê°„ì„ 8ì‹œê°„ ì´ìƒ í™•ë³´í•˜ê³ , í›ˆë ¨ í›„ ë‹¨ë°±ì§ˆ ì„­ì·¨ë¥¼ ëŠ˜ë¦¬ì„¸ìš”.'
        });
      }
      
      if (userProfile.conditions.competitionPrep) {
        recommendations.push({
          icon: 'ğŸ†',
          title: 'ëŒ€íšŒ ì¤€ë¹„',
          text: 'ëŒ€íšŒ 2ì£¼ ì „ë¶€í„° ë³¼ë¥¨ì„ ì¤„ì´ê³ , ëŒ€íšŒ 3ì¼ ì „ë¶€í„° íƒ„ìˆ˜í™”ë¬¼ ì„­ì·¨ë¥¼ ëŠ˜ë¦¬ì„¸ìš”.'
        });
      }
      
      if (userProfile.conditions.hotWeather) {
        recommendations.push({
          icon: 'â˜€ï¸',
          title: 'ë”ìš´ ë‚ ì”¨ ëŒ€ì‘',
          text: 'í›ˆë ¨ ì „í›„ ì¶©ë¶„í•œ ìˆ˜ë¶„ ì„­ì·¨, ì „í•´ì§ˆ ë³´ì¶©, ê°€ëŠ¥í•˜ë©´ ì´ë¥¸ ì•„ì¹¨ì´ë‚˜ ì €ë…ì— í›ˆë ¨í•˜ì„¸ìš”.'
        });
      }
      
      if (userProfile.conditions.altitudeTraining) {
        recommendations.push({
          icon: 'â›°ï¸',
          title: 'ê³ ì§€ëŒ€ ì ì‘',
          text: 'ì²˜ìŒ 1ì£¼ì¼ì€ ê°•ë„ë¥¼ 70%ë¡œ ì œí•œí•˜ê³ , ì² ë¶„ ë³´ì¶©ì œ ì„­ì·¨ë¥¼ ê³ ë ¤í•˜ì„¸ìš”.'
        });
      }
      
      // Intensity-specific recommendations
      if (userProfile.intensity === 'beginner') {
        recommendations.push({
          icon: 'ğŸŒ±',
          title: 'ì´ˆë³´ì ê°€ì´ë“œ',
          text: 'ì£¼ê°„ ë§ˆì¼ë¦¬ì§€ë¥¼ 10% ì´ìƒ ëŠ˜ë¦¬ì§€ ë§ˆì‹œê³ , ì¶©ë¶„í•œ íœ´ì‹ì„ ì·¨í•˜ì„¸ìš”.'
        });
      } else if (userProfile.intensity === 'advanced') {
        recommendations.push({
          icon: 'ğŸ’',
          title: 'ê³ ê¸‰ í›ˆë ¨',
          text: 'ì£¼ê¸°ì ì¸ ì²´ë ¥ í…ŒìŠ¤íŠ¸ë¡œ VDOTì„ ì—…ë°ì´íŠ¸í•˜ê³ , 4ì£¼ë§ˆë‹¤ íšŒë³µ ì£¼ê°„ì„ ê°€ì§€ì„¸ìš”.'
        });
      }
      
      // Add nutrition recommendation
      recommendations.push({
        icon: 'ğŸ¥—',
        title: 'ì˜ì–‘ ì„­ì·¨',
        text: 'í›ˆë ¨ í›„ 30ë¶„ ë‚´ íƒ„ìˆ˜í™”ë¬¼ê³¼ ë‹¨ë°±ì§ˆì„ 3:1 ë¹„ìœ¨ë¡œ ì„­ì·¨í•˜ì„¸ìš”.'
      });
      
      // Add warm-up/cool-down
      recommendations.push({
        icon: 'ğŸ”¥',
        title: 'ì¤€ë¹„/ì •ë¦¬ ìš´ë™',
        text: 'ëª¨ë“  í›ˆë ¨ ì „ 10ë¶„ ì›Œë°ì—…, í›ˆë ¨ í›„ 10ë¶„ ì¿¨ë‹¤ìš´ê³¼ ìŠ¤íŠ¸ë ˆì¹­ì„ í•„ìˆ˜ë¡œ í•˜ì„¸ìš”.'
      });
      
      const recommendationsHTML = recommendations.map(rec => `
        <div class="flex items-start p-3 bg-yellow-50 rounded-lg">
          <span class="text-xl mr-3">${rec.icon}</span>
          <div>
            <div class="font-bold text-sm mb-1">${rec.title}</div>
            <div class="text-xs text-gray-700">${rec.text}</div>
          </div>
        </div>
      `).join('');
      
      document.getElementById('recommendations').innerHTML = recommendationsHTML;
    }

    function resetCalculator() {
      // Reset user profile
      userProfile = {
        gender: null,
        frequency: null,
        intensity: null,
        baseRecord: {},
        vdot: 0,
        conditions: {},
        adjustments: {
          vdot: 1.0,
          volume: 1.0,
          intensity: 1.0
        }
      };
      
      // Reset UI
      document.querySelectorAll('button[id$="-btn"]').forEach(btn => {
        btn.classList.remove('border-purple-600', 'bg-purple-50');
      });
      
      document.getElementById('eventSelect').value = '';
      document.getElementById('hours').value = '';
      document.getElementById('minutes').value = '';
      document.getElementById('seconds').value = '';
      
      document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
        cb.checked = false;
      });
      
      // Show step 1, hide results
      document.getElementById('results').classList.add('hidden');
      goToStep1();
    }
  </script>
</body>
</html>