<!-- PWA ì„¤ì¹˜ UI - ëª¨ë“  HTML í˜ì´ì§€ body íƒœê·¸ ì§í›„ì— ë¶™ì—¬ë„£ê¸° -->

<!-- ìƒë‹¨ ê³ ì • ë°°ë„ˆ -->
<div id="pwaInstallBanner" style="display: none; position: fixed; top: 0; left: 0; right: 0; background: linear-gradient(135deg, #00ffa3, #00d4ff); color: #0f0f0f; padding: 12px 20px; z-index: 10000; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">
  <div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; gap: 12px; justify-content: space-between; flex-wrap: wrap;">
    <div style="display: flex; align-items: center; gap: 12px; flex: 1; min-width: 200px;">
      <span style="font-size: 24px;">ğŸ“±</span>
      <div>
        <div style="font-weight: 700; font-size: 0.95rem;">ì• ìŠ¬ë¦¬íŠ¸ íƒ€ì„ ì•±ìœ¼ë¡œ ì„¤ì¹˜!</div>
        <div style="font-size: 0.8rem; opacity: 0.9;">í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ì„¸ìš”</div>
      </div>
    </div>
    <button id="pwaInstallBtn" style="background: #0f172a; color: #00ffa3; border: none; padding: 10px 20px; border-radius: 8px; font-weight: 700; cursor: pointer; white-space: nowrap; margin-right: 8px;">ì§€ê¸ˆ ì„¤ì¹˜</button>
    <button id="pwaCloseBanner" style="background: rgba(15,23,42,0.2); border: none; color: #0f0f0f; width: 32px; height: 32px; border-radius: 50%; cursor: pointer; font-size: 20px; font-weight: bold;">Ã—</button>
  </div>
</div>

<!-- ìš°ì¸¡ í•˜ë‹¨ í”Œë¡œíŒ… ë²„íŠ¼ -->
<button id="pwaFloatingBtn" style="display: none; position: fixed; bottom: 20px; right: 20px; background: linear-gradient(135deg, #00ffa3, #00d4ff); color: #0f0f0f; border: none; padding: 14px 24px; border-radius: 50px; font-weight: 700; font-size: 0.95rem; cursor: pointer; box-shadow: 0 8px 24px rgba(0,255,163,0.5); z-index: 9999;">
  ğŸ“± ì•± ì„¤ì¹˜
</button>

<style>
@keyframes pwaPulse {
  0%, 100% { box-shadow: 0 8px 24px rgba(0,255,163,0.4); }
  50% { box-shadow: 0 8px 32px rgba(0,255,163,0.7); }
}
#pwaFloatingBtn {
  animation: pwaPulse 2s infinite;
}
#pwaFloatingBtn:hover {
  transform: translateY(-2px);
}
</style>

<script>
// PWA ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸
(function() {
  let deferredPrompt;
  const banner = document.getElementById('pwaInstallBanner');
  const floatingBtn = document.getElementById('pwaFloatingBtn');
  const installBtn = document.getElementById('pwaInstallBtn');
  const closeBtn = document.getElementById('pwaCloseBanner');
  
  if (!banner || !floatingBtn) return;
  
  const isInstalled = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true;
  if (isInstalled) {
    console.log('âœ… PWA ì´ë¯¸ ì„¤ì¹˜ë¨');
    return;
  }
  
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    showUI();
  });
  
  setTimeout(() => showUI(), 1500);
  
  function showUI() {
    const dismissed = localStorage.getItem('pwa-banner-dismissed');
    if (dismissed && (Date.now() - parseInt(dismissed)) / 3600000 < 24) return;
    banner.style.display = 'block';
    floatingBtn.style.display = 'block';
  }
  
  async function handleInstall() {
    const isIOS = /iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase());
    
    if (isIOS) {
      alert('ğŸ“± iOS ì„¤ì¹˜ ë°©ë²•:\n\n1. í•˜ë‹¨ ì¤‘ì•™ì˜ ê³µìœ  ë²„íŠ¼(â–¡â†‘)ì„ íƒ­í•˜ì„¸ìš”\n2. "í™ˆ í™”ë©´ì— ì¶”ê°€"ë¥¼ ì„ íƒí•˜ì„¸ìš”\n3. "ì¶”ê°€" ë²„íŠ¼ì„ íƒ­í•˜ì„¸ìš”\n\ní™ˆ í™”ë©´ì— ì•± ì•„ì´ì½˜ì´ ìƒì„±ë©ë‹ˆë‹¤!');
    } else if (deferredPrompt) {
      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      if (outcome === 'accepted') hideUI();
      deferredPrompt = null;
    } else {
      alert('ğŸ’» ì„¤ì¹˜ ë°©ë²•:\n\n1. ë¸Œë¼ìš°ì € ë©”ë‰´(â‹®)ë¥¼ ì—¬ì„¸ìš”\n2. "í™ˆ í™”ë©´ì— ì¶”ê°€" ë˜ëŠ” "ì„¤ì¹˜"ë¥¼ ì„ íƒí•˜ì„¸ìš”\n\nì•±ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!');
    }
  }
  
  function hideUI() {
    banner.style.display = 'none';
    floatingBtn.style.display = 'none';
  }
  
  if (installBtn) installBtn.onclick = handleInstall;
  if (floatingBtn) floatingBtn.onclick = handleInstall;
  if (closeBtn) closeBtn.onclick = () => {
    hideUI();
    localStorage.setItem('pwa-banner-dismissed', Date.now().toString());
  };
  
  window.addEventListener('appinstalled', hideUI);
  console.log('âœ… PWA ì„¤ì¹˜ UI ì¤€ë¹„ ì™„ë£Œ');
})();
</script>
