<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>페이스 차트 테스트</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-4">
  <h1 class="text-2xl font-bold mb-4">페이스 차트 생성 테스트</h1>
  
  <div class="bg-white rounded-lg shadow p-4">
    <h2 class="text-lg font-bold mb-2">테스트 테이블</h2>
    <table class="w-full border">
      <thead>
        <tr>
          <th class="border p-2">km 페이스</th>
          <th class="border p-2">100m</th>
          <th class="border p-2">5km</th>
          <th class="border p-2">10km</th>
        </tr>
      </thead>
      <tbody id="testTableBody">
        <!-- 동적 생성될 부분 -->
      </tbody>
    </table>
  </div>
  
  <div class="mt-4 p-4 bg-blue-50 rounded">
    <h3 class="font-bold">콘솔 로그</h3>
    <div id="logOutput" class="mt-2 text-sm"></div>
  </div>
  
  <script>
    // 로그 함수
    function log(message) {
      console.log(message);
      const logDiv = document.getElementById('logOutput');
      logDiv.innerHTML += `<div>${message}</div>`;
    }
    
    // formatTime 함수
    function formatTime(seconds, forceHours = false) {
      if (isNaN(seconds) || seconds === null) return '-';
      
      const hours = Math.floor(seconds / 3600);
      const mins = Math.floor((seconds % 3600) / 60);
      const secs = seconds % 60;
      
      if (hours > 0 || forceHours) {
        return `${hours}:${String(mins).padStart(2, '0')}:${String(Math.floor(secs)).padStart(2, '0')}`;
      } else if (mins > 0) {
        return `${mins}:${String(Math.floor(secs)).padStart(2, '0')}`;
      } else {
        return secs.toFixed(1);
      }
    }
    
    // formatPace 함수
    function formatPace(secondsPerKm) {
      const mins = Math.floor(secondsPerKm / 60);
      const secs = Math.floor(secondsPerKm % 60);
      return `${mins}:${String(secs).padStart(2, '0')}`;
    }
    
    // 테이블 생성 테스트
    function generateTestTable() {
      log('테이블 생성 시작');
      
      const tbody = document.getElementById('testTableBody');
      if (!tbody) {
        log('❌ tbody 요소를 찾을 수 없습니다');
        return;
      }
      
      log('✅ tbody 요소 발견');
      tbody.innerHTML = '';
      
      // 테스트 데이터 생성
      const paces = [180, 240, 300]; // 3:00, 4:00, 5:00
      
      paces.forEach((pacePerKm, index) => {
        log(`행 ${index + 1} 생성 중...`);
        
        const row = tbody.insertRow();
        
        // km 페이스
        let cell = row.insertCell();
        cell.textContent = formatPace(pacePerKm);
        cell.className = 'border p-2 font-bold';
        
        // 100m
        cell = row.insertCell();
        cell.textContent = formatTime((pacePerKm / 1000) * 100);
        cell.className = 'border p-2';
        
        // 5km
        cell = row.insertCell();
        cell.textContent = formatTime((pacePerKm / 1000) * 5000);
        cell.className = 'border p-2';
        
        // 10km
        cell = row.insertCell();
        cell.textContent = formatTime((pacePerKm / 1000) * 10000);
        cell.className = 'border p-2';
      });
      
      log(`✅ 테이블 생성 완료: ${tbody.rows.length}개 행`);
    }
    
    // 페이지 로드 시 실행
    window.addEventListener('DOMContentLoaded', () => {
      log('페이지 로드 완료');
      generateTestTable();
    });
  </script>
</body>
</html>