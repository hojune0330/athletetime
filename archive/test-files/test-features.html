<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>기능 테스트 - 애슬리트 타임</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
</head>
<body class="bg-gray-100 p-8">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold mb-8 text-center">애슬리트 타임 - 기능 테스트</h1>
    
    <!-- 이미지 업로드 테스트 -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <h2 class="text-xl font-bold mb-4">
        <i class="fas fa-camera text-blue-500 mr-2"></i>
        이미지 업로드 기능 테스트
      </h2>
      
      <div class="space-y-4">
        <div class="p-4 bg-green-50 border border-green-200 rounded">
          <h3 class="font-bold text-green-800 mb-2">✅ 구현된 기능:</h3>
          <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
            <li>최대 3장까지 이미지 업로드 가능</li>
            <li>파일당 최대 5MB 제한</li>
            <li>자동 이미지 압축 (1200px 최대 크기)</li>
            <li>썸네일 자동 생성 (400px)</li>
            <li>지원 형식: JPG, PNG, GIF, WebP</li>
            <li>Base64 인코딩으로 localStorage 저장</li>
            <li>이미지 미리보기 및 삭제 기능</li>
            <li>전체화면 이미지 뷰어 (ESC 키 지원)</li>
            <li>저장 공간 모니터링</li>
            <li>3일 이상 오래된 이미지 자동 정리</li>
          </ul>
        </div>
        
        <div class="p-4 bg-blue-50 border border-blue-200 rounded">
          <h3 class="font-bold text-blue-800 mb-2">📸 테스트 방법:</h3>
          <ol class="list-decimal list-inside text-sm text-gray-700 space-y-1">
            <li>익명게시판 접속</li>
            <li>우측 하단 파란색 작성 버튼(+) 클릭</li>
            <li>"사진 선택" 버튼 클릭</li>
            <li>이미지 파일 선택 (최대 3장)</li>
            <li>미리보기 확인 및 X 버튼으로 삭제 가능</li>
            <li>게시물 작성 완료 후 이미지 확인</li>
            <li>게시물 상세보기에서 이미지 클릭하여 전체화면 보기</li>
          </ol>
        </div>
      </div>
    </div>
    
    <!-- 투표 기능 테스트 -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <h2 class="text-xl font-bold mb-4">
        <i class="fas fa-poll text-purple-500 mr-2"></i>
        투표 기능 테스트
      </h2>
      
      <div class="space-y-4">
        <div class="p-4 bg-green-50 border border-green-200 rounded">
          <h3 class="font-bold text-green-800 mb-2">✅ 구현된 기능:</h3>
          <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
            <li>게시물에 투표 추가 가능</li>
            <li>2~10개 선택지 지원</li>
            <li>"투표하면 결과를 볼 수 있습니다" 안내 메시지</li>
            <li>실시간 투표 결과 표시 (퍼센트, 투표수)</li>
            <li>투표 후 결과 애니메이션 효과</li>
            <li>다시 투표하기 기능</li>
            <li>투표한 항목 하이라이트 표시</li>
            <li>게시물 목록에서 투표 참여 현황 표시</li>
            <li>localStorage에 투표 데이터 저장</li>
          </ul>
        </div>
        
        <div class="p-4 bg-purple-50 border border-purple-200 rounded">
          <h3 class="font-bold text-purple-800 mb-2">🗳️ 테스트 방법:</h3>
          <ol class="list-decimal list-inside text-sm text-gray-700 space-y-1">
            <li>익명게시판 접속</li>
            <li>우측 하단 파란색 작성 버튼(+) 클릭</li>
            <li>"투표 추가" 버튼 클릭</li>
            <li>선택지 입력 (최소 2개)</li>
            <li>"선택지 추가"로 옵션 추가 가능 (최대 10개)</li>
            <li>게시물 작성 완료</li>
            <li>게시물 클릭하여 상세보기</li>
            <li>투표 선택지 클릭하여 투표</li>
            <li>결과 확인 및 "다시 투표" 가능</li>
          </ol>
        </div>
      </div>
    </div>
    
    <!-- 테스트 시나리오 -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <h2 class="text-xl font-bold mb-4">
        <i class="fas fa-vial text-red-500 mr-2"></i>
        통합 테스트 시나리오
      </h2>
      
      <div class="space-y-4">
        <div class="p-4 bg-yellow-50 border border-yellow-200 rounded">
          <h3 class="font-bold text-yellow-800 mb-2">🧪 시나리오 1: 이미지 + 투표 동시 사용</h3>
          <ol class="list-decimal list-inside text-sm text-gray-700 space-y-1">
            <li>게시물 작성 화면 열기</li>
            <li>제목: "오늘의 훈련 사진 투표"</li>
            <li>내용: "오늘 훈련 사진입니다. 어떤 사진이 가장 좋나요?"</li>
            <li>이미지 3장 업로드</li>
            <li>투표 추가: "1번 사진", "2번 사진", "3번 사진"</li>
            <li>게시물 작성 완료</li>
            <li>게시물 확인 및 투표 참여</li>
          </ol>
        </div>
        
        <div class="p-4 bg-red-50 border border-red-200 rounded">
          <h3 class="font-bold text-red-800 mb-2">🚨 엣지 케이스 테스트:</h3>
          <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
            <li>5MB 이상 파일 업로드 시도 → 오류 메시지 확인</li>
            <li>지원하지 않는 파일 형식 업로드 → 오류 메시지 확인</li>
            <li>4장 이상 이미지 선택 → 3장 제한 메시지 확인</li>
            <li>투표 선택지 1개만 입력 → 최소 2개 필요 메시지</li>
            <li>투표 선택지 11개 추가 시도 → 최대 10개 제한</li>
            <li>빈 투표 선택지로 게시 시도 → 검증 메시지</li>
            <li>localStorage 용량 80% 초과 → 자동 정리 동작 확인</li>
          </ul>
        </div>
      </div>
    </div>
    
    <!-- 액세스 링크 -->
    <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg shadow-md p-6">
      <h2 class="text-xl font-bold mb-4">
        <i class="fas fa-link mr-2"></i>
        테스트 링크
      </h2>
      
      <div class="space-y-4">
        <a href="index.html" class="block bg-white/20 hover:bg-white/30 rounded-lg p-4 transition">
          <div class="flex items-center justify-between">
            <div>
              <h3 class="font-bold">메인 페이지</h3>
              <p class="text-sm opacity-90">애슬리트 타임 홈</p>
            </div>
            <i class="fas fa-arrow-right text-2xl"></i>
          </div>
        </a>
        
        <a href="community.html" class="block bg-white/20 hover:bg-white/30 rounded-lg p-4 transition">
          <div class="flex items-center justify-between">
            <div>
              <h3 class="font-bold">익명게시판</h3>
              <p class="text-sm opacity-90">이미지 업로드 & 투표 기능 테스트</p>
            </div>
            <i class="fas fa-arrow-right text-2xl"></i>
          </div>
        </a>
      </div>
      
      <div class="mt-6 p-4 bg-white/10 rounded">
        <p class="text-sm">
          <i class="fas fa-info-circle mr-2"></i>
          GitHub Pages URL: <span class="font-mono">https://hojune0330.github.io/athletetime/</span>
        </p>
      </div>
    </div>
  </div>
  
  <script>
    // 페이지 로드 시 localStorage 사용량 체크
    function checkStorage() {
      let totalSize = 0;
      for (const key in localStorage) {
        if (localStorage.hasOwnProperty(key)) {
          totalSize += localStorage[key].length + key.length;
        }
      }
      const usedMB = (totalSize / 1024 / 1024).toFixed(2);
      const percent = (usedMB / 5 * 100).toFixed(1);
      
      console.log(`localStorage 사용량: ${usedMB}MB / 5MB (${percent}%)`);
      
      // 현재 저장된 게시물 수
      const posts = JSON.parse(localStorage.getItem('athletetime_posts') || '[]');
      console.log(`저장된 게시물 수: ${posts.length}`);
      
      // 투표가 있는 게시물 수
      const pollPosts = posts.filter(p => p.poll).length;
      console.log(`투표가 있는 게시물: ${pollPosts}`);
      
      // 이미지가 있는 게시물 수
      const imagePosts = posts.filter(p => p.images && p.images.length > 0).length;
      console.log(`이미지가 있는 게시물: ${imagePosts}`);
    }
    
    checkStorage();
  </script>
</body>
</html>