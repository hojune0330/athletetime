<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>í˜ì´ìŠ¤ ê³„ì‚°ê¸° (ëª¨ë°”ì¼) | ì• ìŠ¬ë¦¬íŠ¸ íƒ€ì„</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  
  <style>
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
      -webkit-tap-highlight-color: transparent;
      -webkit-font-smoothing: antialiased;
    }
    
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    /* ëª¨ë°”ì¼ í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
    .mobile-table-container {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      position: relative;
      max-width: 100%;
      margin-bottom: 10px;
    }
    
    .mobile-table {
      font-size: 11px;
      width: 100%;
      border-collapse: collapse;
      min-width: 600px;
    }
    
    .mobile-table td, 
    .mobile-table th {
      padding: 4px;
      text-align: center;
      border: 1px solid #e5e7eb;
      white-space: nowrap;
    }
    
    .mobile-table th {
      background: #f3f4f6;
      font-weight: bold;
      font-size: 10px;
    }
    
    /* ì²« ë²ˆì§¸ ì—´ ê³ ì • */
    .mobile-table thead th:first-child,
    .mobile-table tbody td:first-child {
      position: sticky;
      left: 0;
      background: #f9fafb;
      font-weight: bold;
      z-index: 10;
      box-shadow: 2px 0 4px rgba(0,0,0,0.05);
    }
    
    .mobile-table thead th:first-child {
      background: #e5e7eb;
      z-index: 11;
    }
    
    /* í•˜ì´ë¼ì´íŠ¸ */
    .highlight-row {
      background: #fef3c7 !important;
    }
    
    .sub-highlight {
      background: #dbeafe !important;
    }
    
    /* ë¡œë”© ìŠ¤íƒ€ì¼ */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }
    
    .loading-overlay.active {
      display: flex;
    }
    
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #e5e7eb;
      border-top-color: #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* ìƒ‰ìƒ êµ¬ë¶„ */
    .bg-yellow-50 { background: #fef3c7 !important; }
    .bg-green-50 { background: #dcfce7 !important; }
    .bg-blue-50 { background: #dbeafe !important; }
    .bg-purple-50 { background: #f3e8ff !important; }
  </style>
</head>
<body class="bg-gray-50">
  <!-- ë¡œë”© ì˜¤ë²„ë ˆì´ -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="bg-white p-6 rounded-lg text-center max-w-xs">
      <div class="loading-spinner mx-auto mb-4"></div>
      <p class="text-lg font-bold text-gray-800 mb-1">ê³ í’ˆì§ˆ ì°¨íŠ¸ ìƒì„± ì¤‘</p>
      <p class="text-sm text-gray-600">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...</p>
    </div>
  </div>

  <div class="container mx-auto px-3 py-3" style="max-width: 100%;">
    <!-- í—¤ë” -->
    <div class="bg-white rounded-lg shadow-sm p-3 mb-3">
      <div class="flex items-center justify-between">
        <h1 class="text-lg font-bold gradient-text">í˜ì´ìŠ¤ ê³„ì‚°ê¸°</h1>
        <div class="flex items-center gap-2">
          <a href="pace-calculator.html" class="text-gray-500 hover:text-gray-700 text-sm" title="PC ë²„ì „">
            <i class="fas fa-desktop"></i>
          </a>
          <a href="pace-calculator-selector.html?force=true" class="text-gray-500 hover:text-gray-700 text-sm" title="ë²„ì „ ì„ íƒ">
            <i class="fas fa-exchange-alt"></i>
          </a>
          <a href="index.html" class="text-gray-500 hover:text-gray-700 text-sm" title="ë©”ì¸">
            <i class="fas fa-home"></i>
          </a>
        </div>
      </div>
    </div>

    <!-- ì°¨íŠ¸ 1: í‚¬ë¡œë¯¸í„° í˜ì´ìŠ¤ â†’ ê±°ë¦¬ë³„ ì™„ì£¼ ì‹œê°„ -->
    <div id="chart1" class="bg-white rounded-lg shadow-sm p-3 mb-3">
      <div class="flex justify-between items-center mb-2">
        <h2 class="text-sm font-bold">
          <i class="fas fa-tachometer-alt text-blue-500 text-xs"></i> 
          <span class="text-xs">í‚¬ë¡œë¯¸í„° í˜ì´ìŠ¤ â†’ ê±°ë¦¬ë³„ ì™„ì£¼ ì‹œê°„</span>
        </h2>
        <div class="flex gap-1">
          <button onclick="downloadChart('chart1', 'KMí˜ì´ìŠ¤_ê±°ë¦¬ë³„ì™„ì£¼ì‹œê°„', 'png')" 
                  class="text-blue-500 text-xs p-1">
            <i class="fas fa-image"></i>
          </button>
          <button onclick="downloadChart('chart1', 'KMí˜ì´ìŠ¤_ê±°ë¦¬ë³„ì™„ì£¼ì‹œê°„', 'pdf')" 
                  class="text-red-500 text-xs p-1">
            <i class="fas fa-file-pdf"></i>
          </button>
        </div>
      </div>
      
      <div class="mobile-table-container">
        <table id="paceTable1" class="mobile-table">
          <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
        </table>
      </div>
    </div>

    <!-- ì°¨íŠ¸ 2: ëª©í‘œ ê¸°ë¡ë³„ í•„ìš” í˜ì´ìŠ¤ ë¶„ì„ -->
    <div id="chart2" class="bg-white rounded-lg shadow-sm p-3 mb-3">
      <div class="flex justify-between items-center mb-2">
        <h2 class="text-sm font-bold">
          <i class="fas fa-trophy text-orange-500 text-xs"></i> 
          <span class="text-xs">ëª©í‘œ ê¸°ë¡ë³„ í•„ìš” í˜ì´ìŠ¤ ë¶„ì„</span>
        </h2>
        <div class="flex gap-1">
          <button onclick="downloadChart('chart2', 'ëª©í‘œê¸°ë¡ë³„_í˜ì´ìŠ¤ë¶„ì„', 'png')" 
                  class="text-blue-500 text-xs p-1">
            <i class="fas fa-image"></i>
          </button>
          <button onclick="downloadChart('chart2', 'ëª©í‘œê¸°ë¡ë³„_í˜ì´ìŠ¤ë¶„ì„', 'pdf')" 
                  class="text-red-500 text-xs p-1">
            <i class="fas fa-file-pdf"></i>
          </button>
        </div>
      </div>
      
      <!-- 5km ëª©í‘œ -->
      <h3 class="text-xs font-bold mb-1 text-gray-700">ğŸƒ 5km ëª©í‘œ ê¸°ë¡</h3>
      <div class="mobile-table-container mb-2">
        <table id="target5kmTable" class="mobile-table">
          <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
        </table>
      </div>
      
      <!-- 10km ëª©í‘œ -->
      <h3 class="text-xs font-bold mb-1 text-gray-700">ğŸƒ 10km ëª©í‘œ ê¸°ë¡</h3>
      <div class="mobile-table-container mb-2">
        <table id="target10kmTable" class="mobile-table">
          <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
        </table>
      </div>
      
      <!-- í•˜í”„ë§ˆë¼í†¤ ëª©í‘œ -->
      <h3 class="text-xs font-bold mb-1 text-gray-700">ğŸƒ í•˜í”„ë§ˆë¼í†¤ ëª©í‘œ ê¸°ë¡</h3>
      <div class="mobile-table-container mb-2">
        <table id="targetHalfTable" class="mobile-table">
          <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
        </table>
      </div>
      
      <!-- í’€ë§ˆë¼í†¤ ëª©í‘œ -->
      <h3 class="text-xs font-bold mb-1 text-gray-700">ğŸƒ í’€ë§ˆë¼í†¤ ëª©í‘œ ê¸°ë¡</h3>
      <div class="mobile-table-container">
        <table id="targetFullTable" class="mobile-table">
          <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
        </table>
      </div>
    </div>

    <!-- ì°¨íŠ¸ 3: 400m íŠ¸ë™ ë ˆì¸ë³„ ê±°ë¦¬ & ì‹œê°„ ë³´ì •í‘œ -->
    <div id="chart3" class="bg-white rounded-lg shadow-sm p-3 mb-3">
      <div class="flex justify-between items-center mb-2">
        <h2 class="text-sm font-bold">
          <i class="fas fa-route text-green-500 text-xs"></i> 
          <span class="text-xs">400m íŠ¸ë™ ë ˆì¸ë³„ ê±°ë¦¬ & ì‹œê°„ ë³´ì •í‘œ</span>
        </h2>
        <div class="flex gap-1">
          <button onclick="downloadChart('chart3', 'íŠ¸ë™ë ˆì¸ë³„_ë³´ì •í‘œ', 'png')" 
                  class="text-blue-500 text-xs p-1">
            <i class="fas fa-image"></i>
          </button>
          <button onclick="downloadChart('chart3', 'íŠ¸ë™ë ˆì¸ë³„_ë³´ì •í‘œ', 'pdf')" 
                  class="text-red-500 text-xs p-1">
            <i class="fas fa-file-pdf"></i>
          </button>
        </div>
      </div>
      
      <div class="mobile-table-container">
        <table id="laneTable" class="mobile-table">
          <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
        </table>
      </div>
    </div>

    <!-- ì°¨íŠ¸ 4: 3000m ì¥ì• ë¬¼ ê²½ì£¼ í˜ì´ìŠ¤ ê³„ì‚°í‘œ -->
    <div id="chart4" class="bg-white rounded-lg shadow-sm p-3 mb-3">
      <div class="flex justify-between items-center mb-2">
        <h2 class="text-sm font-bold">
          <i class="fas fa-water text-cyan-500 text-xs"></i> 
          <span class="text-xs">3000m ì¥ì• ë¬¼ ê²½ì£¼ í˜ì´ìŠ¤ ê³„ì‚°í‘œ</span>
        </h2>
        <div class="flex gap-1">
          <button onclick="downloadChart('chart4', '3000mì¥ì• ë¬¼_í˜ì´ìŠ¤', 'png')" 
                  class="text-blue-500 text-xs p-1">
            <i class="fas fa-image"></i>
          </button>
          <button onclick="downloadChart('chart4', '3000mì¥ì• ë¬¼_í˜ì´ìŠ¤', 'pdf')" 
                  class="text-red-500 text-xs p-1">
            <i class="fas fa-file-pdf"></i>
          </button>
        </div>
      </div>
      
      <!-- ë¬¼ì¥ ë‚´ì¸¡ -->
      <h3 class="text-xs font-bold mb-1 text-blue-700">ğŸ’§ ë¬¼ ì¥ì• ë¬¼ ë‚´ì¸¡ (INSIDE)</h3>
      <div class="mobile-table-container mb-2">
        <table id="steeplechaseInsideTable" class="mobile-table">
          <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
        </table>
      </div>
      
      <!-- ë¬¼ì¥ ì™¸ì¸¡ -->
      <h3 class="text-xs font-bold mb-1 text-purple-700">ğŸ’§ ë¬¼ ì¥ì• ë¬¼ ì™¸ì¸¡ (OUTSIDE)</h3>
      <div class="mobile-table-container">
        <table id="steeplechaseOutsideTable" class="mobile-table">
          <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
        </table>
      </div>
    </div>
  </div>

  <script>
    // ì‹œê°„ í¬ë§·íŒ… í•¨ìˆ˜ (PC ë²„ì „ê³¼ ë™ì¼)
    function formatTime(seconds, forceHours = false) {
      if (isNaN(seconds) || seconds === null) return '-';
      
      const hours = Math.floor(seconds / 3600);
      const mins = Math.floor((seconds % 3600) / 60);
      const secs = seconds % 60;
      
      if (hours > 0 || forceHours) {
        return `${hours}:${String(mins).padStart(2, '0')}:${String(Math.floor(secs)).padStart(2, '0')}`;
      } else if (mins > 0) {
        return `${mins}:${String(Math.floor(secs)).padStart(2, '0')}`;
      } else {
        return secs.toFixed(1);
      }
    }
    
    // í˜ì´ìŠ¤ë¥¼ ë¶„:ì´ˆ í˜•ì‹ìœ¼ë¡œ í¬ë§·
    function formatPace(secondsPerKm) {
      const mins = Math.floor(secondsPerKm / 60);
      const secs = Math.floor(secondsPerKm % 60);
      return `${mins}:${String(secs).padStart(2, '0')}`;
    }
    
    // ì°¨íŠ¸ 1: KM í˜ì´ìŠ¤ë³„ ê±°ë¦¬ í™˜ì‚°í‘œ (PC ë²„ì „ê³¼ ë™ì¼)
    function generateChart1() {
      const table = document.getElementById('paceTable1');
      
      // í—¤ë”
      let html = '<thead><tr>';
      html += '<th>km í˜ì´ìŠ¤</th>';
      const distances = ['100m', '200m', '400m', '800m', '1km', '3km', '5km', '10km', '15km', 'í•˜í”„', '30km', 'í’€ì½”ìŠ¤'];
      distances.forEach(d => {
        html += `<th>${d}</th>`;
      });
      html += '</tr></thead><tbody>';
      
      // 2:30ë¶€í„° 8:00ê¹Œì§€ 10ì´ˆ ê°„ê²©
      for (let seconds = 150; seconds <= 480; seconds += 10) {
        const pace = formatPace(seconds);
        
        // í•˜ì´ë¼ì´íŠ¸ ì²˜ë¦¬
        let rowClass = '';
        if (seconds === 180 || seconds === 240 || seconds === 300 || seconds === 360 || seconds === 420) {
          rowClass = 'highlight-row';
        } else if (seconds === 210 || seconds === 270 || seconds === 330 || seconds === 390 || seconds === 450) {
          rowClass = 'sub-highlight';
        }
        
        html += `<tr class="${rowClass}">`;
        html += `<td>${pace}</td>`;
        
        // ê° ê±°ë¦¬ë³„ ì‹œê°„ ê³„ì‚°
        const distanceMeters = [100, 200, 400, 800, 1000, 3000, 5000, 10000, 15000, 21097.5, 30000, 42195];
        distanceMeters.forEach((distance, i) => {
          const time = (seconds / 1000) * distance;
          let cellClass = '';
          if (i === 6) cellClass = 'bg-yellow-50'; // 5km
          if (i === 7) cellClass = 'bg-green-50';  // 10km
          if (i === 9) cellClass = 'bg-blue-50';   // í•˜í”„
          if (i === 11) cellClass = 'bg-purple-50'; // í’€
          html += `<td class="${cellClass}">${formatTime(time)}</td>`;
        });
        
        html += '</tr>';
      }
      
      html += '</tbody>';
      table.innerHTML = html;
    }
    
    // ì°¨íŠ¸ 2: ëª©í‘œ ê¸°ë¡ë³„ í…Œì´ë¸”ë“¤ (PC ë²„ì „ê³¼ ë™ì¼)
    function generateChart2() {
      // 5km ëª©í‘œ ê¸°ë¡
      const targets5km = [
        { time: 13 * 60, label: 'ì„¸ê³„ ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 14 * 60, label: 'êµ­ê°€ëŒ€í‘œ' },
        { time: 15 * 60, label: 'ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 16 * 60, label: 'ì¤€ì—˜ë¦¬íŠ¸' },
        { time: 17 * 60, label: 'ìµœìƒê¸‰' },
        { time: 18 * 60, label: 'ìƒê¸‰' },
        { time: 19 * 60, label: 'ì¤‘ìƒê¸‰' },
        { time: 20 * 60, label: 'ì„œë¸Œ 20', highlight: true },
        { time: 22 * 60, label: 'ì¤‘ê¸‰' },
        { time: 25 * 60, label: 'ì´ˆì¤‘ê¸‰', highlight: true },
        { time: 28 * 60, label: 'ì´ˆê¸‰' },
        { time: 30 * 60, label: 'ì…ë¬¸', highlight: true },
        { time: 35 * 60, label: 'ì™„ì£¼ ëª©í‘œ' },
        { time: 40 * 60, label: 'ê±´ê°• ì¡°ê¹…', highlight: true }
      ];
      
      const table5km = document.getElementById('target5kmTable');
      let html = '<thead><tr>';
      html += '<th>ëª©í‘œ ê¸°ë¡</th><th>km í˜ì´ìŠ¤</th><th>400m</th><th>100m</th><th>ì†ë„</th><th>ë¹„ê³ </th>';
      html += '</tr></thead><tbody>';
      
      targets5km.forEach(target => {
        const pacePerKm = target.time / 5;
        const pace400m = pacePerKm * 0.4;
        const pace100m = pacePerKm * 0.1;
        const speed = 5000 / target.time * 3.6;
        
        html += `<tr class="${target.highlight ? 'highlight-row' : ''}">`;
        html += `<td>${formatTime(target.time)}</td>`;
        html += `<td>${formatPace(pacePerKm)}</td>`;
        html += `<td>${formatTime(pace400m)}</td>`;
        html += `<td>${formatTime(pace100m)}</td>`;
        html += `<td>${speed.toFixed(1)}</td>`;
        html += `<td class="text-xs">${target.label}</td>`;
        html += '</tr>';
      });
      
      html += '</tbody>';
      table5km.innerHTML = html;
      
      // 10km ëª©í‘œ ê¸°ë¡
      const targets10km = [
        { time: 27 * 60, label: 'ì„¸ê³„ ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 29 * 60, label: 'êµ­ê°€ëŒ€í‘œ' },
        { time: 31 * 60, label: 'ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 33 * 60, label: 'ì¤€ì—˜ë¦¬íŠ¸' },
        { time: 35 * 60, label: 'ìƒê¸‰' },
        { time: 38 * 60, label: 'ì¤‘ìƒê¸‰' },
        { time: 40 * 60, label: 'ì„œë¸Œ 40', highlight: true },
        { time: 45 * 60, label: 'ì¤‘ê¸‰' },
        { time: 50 * 60, label: 'ì„œë¸Œ 50', highlight: true },
        { time: 55 * 60, label: 'ì´ˆê¸‰' },
        { time: 60 * 60, label: 'ì„œë¸Œ 1ì‹œê°„', highlight: true },
        { time: 70 * 60, label: 'ì™„ì£¼ ëª©í‘œ' },
        { time: 80 * 60, label: 'ê±´ê°• ì¡°ê¹…', highlight: true }
      ];
      
      const table10km = document.getElementById('target10kmTable');
      html = '<thead><tr>';
      html += '<th>ëª©í‘œ ê¸°ë¡</th><th>km í˜ì´ìŠ¤</th><th>400m</th><th>5km</th><th>ì†ë„</th><th>ë¹„ê³ </th>';
      html += '</tr></thead><tbody>';
      
      targets10km.forEach(target => {
        const pacePerKm = target.time / 10;
        const pace400m = pacePerKm * 0.4;
        const time5km = target.time / 2;
        const speed = 10000 / target.time * 3.6;
        
        html += `<tr class="${target.highlight ? 'highlight-row' : ''}">`;
        html += `<td>${formatTime(target.time)}</td>`;
        html += `<td>${formatPace(pacePerKm)}</td>`;
        html += `<td>${formatTime(pace400m)}</td>`;
        html += `<td>${formatTime(time5km)}</td>`;
        html += `<td>${speed.toFixed(1)}</td>`;
        html += `<td class="text-xs">${target.label}</td>`;
        html += '</tr>';
      });
      
      html += '</tbody>';
      table10km.innerHTML = html;
      
      // í•˜í”„ë§ˆë¼í†¤ ëª©í‘œ ê¸°ë¡
      const targetsHalf = [
        { time: 60 * 60, label: 'ì„¸ê³„ ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 65 * 60, label: 'êµ­ê°€ëŒ€í‘œ' },
        { time: 70 * 60, label: 'ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 75 * 60, label: 'ì¤€ì—˜ë¦¬íŠ¸' },
        { time: 80 * 60, label: 'ìƒê¸‰' },
        { time: 85 * 60, label: 'ì¤‘ìƒê¸‰' },
        { time: 90 * 60, label: 'ì„œë¸Œ 1:30', highlight: true },
        { time: 100 * 60, label: 'ì¤‘ê¸‰' },
        { time: 110 * 60, label: 'ì´ˆì¤‘ê¸‰', highlight: true },
        { time: 120 * 60, label: 'ì„œë¸Œ 2:00', highlight: true },
        { time: 130 * 60, label: 'ì´ˆê¸‰' },
        { time: 140 * 60, label: 'ì…ë¬¸' },
        { time: 150 * 60, label: 'ì„œë¸Œ 2:30', highlight: true },
        { time: 160 * 60, label: 'ì™„ì£¼ ëª©í‘œ' },
        { time: 180 * 60, label: 'ê±´ê°• ì¡°ê¹…', highlight: true }
      ];
      
      const tableHalf = document.getElementById('targetHalfTable');
      html = '<thead><tr>';
      html += '<th>ëª©í‘œ ê¸°ë¡</th><th>km í˜ì´ìŠ¤</th><th>400m</th><th>5km</th><th>10km</th><th>ì†ë„</th><th>ë¹„ê³ </th>';
      html += '</tr></thead><tbody>';
      
      targetsHalf.forEach(target => {
        const pacePerKm = target.time / 21.0975;
        const pace400m = pacePerKm * 0.4;
        const time5km = (target.time / 21.0975) * 5;
        const time10km = (target.time / 21.0975) * 10;
        const speed = 21097.5 / target.time * 3.6;
        
        html += `<tr class="${target.highlight ? 'highlight-row' : ''}">`;
        html += `<td>${formatTime(target.time)}</td>`;
        html += `<td>${formatPace(pacePerKm)}</td>`;
        html += `<td>${formatTime(pace400m)}</td>`;
        html += `<td>${formatTime(time5km)}</td>`;
        html += `<td>${formatTime(time10km)}</td>`;
        html += `<td>${speed.toFixed(1)}</td>`;
        html += `<td class="text-xs">${target.label}</td>`;
        html += '</tr>';
      });
      
      html += '</tbody>';
      tableHalf.innerHTML = html;
      
      // í’€ë§ˆë¼í†¤ ëª©í‘œ ê¸°ë¡
      const targetsFull = [
        { time: 2 * 3600 + 0 * 60, label: 'ì„¸ê³„ ì‹ ê¸°ë¡', highlight: true },
        { time: 2 * 3600 + 10 * 60, label: 'ì„¸ê³„ ì—˜ë¦¬íŠ¸' },
        { time: 2 * 3600 + 20 * 60, label: 'êµ­ê°€ëŒ€í‘œ', highlight: true },
        { time: 2 * 3600 + 30 * 60, label: 'ì„œë¸Œ 2:30' },
        { time: 2 * 3600 + 40 * 60, label: 'ì—˜ë¦¬íŠ¸' },
        { time: 2 * 3600 + 50 * 60, label: 'ì¤€ì—˜ë¦¬íŠ¸' },
        { time: 3 * 3600 + 0 * 60, label: 'ì„œë¸Œ 3', highlight: true },
        { time: 3 * 3600 + 10 * 60, label: 'ìƒê¸‰' },
        { time: 3 * 3600 + 20 * 60, label: 'ì¤‘ìƒê¸‰' },
        { time: 3 * 3600 + 30 * 60, label: 'ì„œë¸Œ 3:30', highlight: true },
        { time: 3 * 3600 + 40 * 60, label: 'ì¤‘ê¸‰' },
        { time: 3 * 3600 + 50 * 60, label: 'ì´ˆì¤‘ê¸‰' },
        { time: 4 * 3600 + 0 * 60, label: 'ì„œë¸Œ 4', highlight: true },
        { time: 4 * 3600 + 30 * 60, label: 'ì´ˆê¸‰' },
        { time: 5 * 3600 + 0 * 60, label: 'ì™„ì£¼', highlight: true },
        { time: 5 * 3600 + 30 * 60, label: 'ê±´ê°• ì¡°ê¹…' },
        { time: 6 * 3600 + 0 * 60, label: 'ì™„ë³´', highlight: true }
      ];
      
      const tableFull = document.getElementById('targetFullTable');
      html = '<thead><tr>';
      html += '<th>ëª©í‘œ ê¸°ë¡</th><th>km í˜ì´ìŠ¤</th><th>400m</th><th>10km</th><th>í•˜í”„</th><th>30km</th><th>ì†ë„</th><th>ë¹„ê³ </th>';
      html += '</tr></thead><tbody>';
      
      targetsFull.forEach(target => {
        const pacePerKm = target.time / 42.195;
        const pace400m = pacePerKm * 0.4;
        const time10km = (target.time / 42.195) * 10;
        const timeHalf = (target.time / 42.195) * 21.0975;
        const time30km = (target.time / 42.195) * 30;
        const speed = 42195 / target.time * 3.6;
        
        html += `<tr class="${target.highlight ? 'highlight-row' : ''}">`;
        html += `<td>${formatTime(target.time, true)}</td>`;
        html += `<td>${formatPace(pacePerKm)}</td>`;
        html += `<td>${formatTime(pace400m)}</td>`;
        html += `<td>${formatTime(time10km)}</td>`;
        html += `<td>${formatTime(timeHalf)}</td>`;
        html += `<td>${formatTime(time30km)}</td>`;
        html += `<td>${speed.toFixed(1)}</td>`;
        html += `<td class="text-xs">${target.label}</td>`;
        html += '</tr>';
      });
      
      html += '</tbody>';
      tableFull.innerHTML = html;
    }
    
    // ì°¨íŠ¸ 3: ë ˆì¸ë³„ ë³´ì • ì‹œê°„ (PC ë²„ì „ê³¼ ë™ì¼)
    function generateChart3() {
      const table = document.getElementById('laneTable');
      
      // ë ˆì¸ë³„ ê±°ë¦¬
      const laneDistances = {
        1: 400.00,
        2: 407.04,
        3: 414.70,
        4: 422.37,
        5: 430.03,
        6: 437.70,
        7: 445.36,
        8: 453.03
      };
      
      let html = '<thead><tr>';
      html += '<th rowspan="2">km í˜ì´ìŠ¤</th>';
      html += '<th rowspan="2">400m<br>(1ë ˆì¸)</th>';
      html += '<th colspan="7">ì™¸ì¸¡ ë ˆì¸ ë³´ì • ì‹œê°„</th>';
      html += '</tr><tr>';
      
      for (let lane = 2; lane <= 8; lane++) {
        html += `<th>
${lane}ë ˆì¸<br>${Math.round(laneDistances[lane])}m</th>`;
      }
      html += '</tr></thead><tbody>';
      
      // 2:30ë¶€í„° 6:00ê¹Œì§€ 10ì´ˆ ê°„ê²©
      for (let seconds = 150; seconds <= 360; seconds += 10) {
        const pace = formatPace(seconds);
        
        // í•˜ì´ë¼ì´íŠ¸
        let rowClass = '';
        if (seconds === 180 || seconds === 240 || seconds === 300 || seconds === 360) {
          rowClass = 'highlight-row';
        } else if (seconds === 210 || seconds === 270 || seconds === 330) {
          rowClass = 'sub-highlight';
        }
        
        html += `<tr class="${rowClass}">`;
        html += `<td>${pace}</td>`;
        
        // 1ë ˆì¸ 400m ì‹œê°„
        const time400 = (seconds / 1000) * 400;
        html += `<td>${formatTime(time400)}</td>`;
        
        // ê° ë ˆì¸ë³„ ë³´ì • ì‹œê°„
        for (let lane = 2; lane <= 8; lane++) {
          const laneTime = (seconds / 1000) * laneDistances[lane];
          html += `<td>${formatTime(laneTime)}</td>`;
        }
        
        html += '</tr>';
      }
      
      html += '</tbody>';
      table.innerHTML = html;
    }
    
    // ì°¨íŠ¸ 4: 3000m ì¥ì• ë¬¼ í˜ì´ìŠ¤ ê³„ì‚° (PC ë²„ì „ê³¼ ë™ì¼)
    function generateChart4() {
      const tableInside = document.getElementById('steeplechaseInsideTable');
      const tableOutside = document.getElementById('steeplechaseOutsideTable');
      
      // í—¤ë” (ë‚´ì¸¡)
      let htmlInside = '<thead><tr>';
      htmlInside += '<th>ëª©í‘œ ê¸°ë¡</th><th>km í˜ì´ìŠ¤</th><th>ì‹œì‘ êµ¬ê°„</th><th>ë©ë‹¹ ì‹œê°„</th><th>3ë©</th><th>5ë©</th><th>ìµœì¢…</th>';
      htmlInside += '</tr></thead><tbody>';
      
      // í—¤ë” (ì™¸ì¸¡)
      let htmlOutside = '<thead><tr>';
      htmlOutside += '<th>ëª©í‘œ ê¸°ë¡</th><th>km í˜ì´ìŠ¤</th><th>ì‹œì‘ êµ¬ê°„</th><th>ë©ë‹¹ ì‹œê°„</th><th>3ë©</th><th>5ë©</th><th>ìµœì¢…</th>';
      htmlOutside += '</tr></thead><tbody>';
      
      // ëª©í‘œ ê¸°ë¡ë“¤ (7ë¶„ 30ì´ˆë¶€í„° 13ë¶„ê¹Œì§€)
      const targetTimes = [
        { time: 7 * 60 + 30, label: 'ì„¸ê³„ ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 8 * 60, label: 'êµ­ê°€ëŒ€í‘œê¸‰' },
        { time: 8 * 60 + 30, label: 'ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 9 * 60, label: 'ì¤€ì—˜ë¦¬íŠ¸' },
        { time: 9 * 60 + 30, label: 'ìƒê¸‰', highlight: true },
        { time: 10 * 60, label: 'ì„œë¸Œ 10' },
        { time: 10 * 60 + 30, label: 'ì¤‘ìƒê¸‰', highlight: true },
        { time: 11 * 60, label: 'ì¤‘ê¸‰' },
        { time: 11 * 60 + 30, label: 'ì´ˆì¤‘ê¸‰', highlight: true },
        { time: 12 * 60, label: 'ì´ˆê¸‰' },
        { time: 12 * 60 + 30, label: 'ì…ë¬¸' },
        { time: 13 * 60, label: 'ì™„ì£¼ ëª©í‘œ', highlight: true }
      ];
      
      // êµ¬ì„±ë³„ ê±°ë¦¬
      const insideConfig = {
        lapDistance: 396.084,
        startSection: 227.412,
        totalLapDistance: 2772.588
      };
      
      const outsideConfig = {
        lapDistance: 419.407,
        startSection: 64.151,
        totalLapDistance: 2935.849
      };
      
      targetTimes.forEach(target => {
        const pacePerKm = target.time / 3;
        
        // ë‚´ì¸¡ ê³„ì‚°
        const insideStartTime = (target.time / 3000) * insideConfig.startSection;
        const insideLapTime = (target.time / 3000) * insideConfig.lapDistance;
        const inside3Laps = insideStartTime + (insideLapTime * 3);
        const inside5Laps = insideStartTime + (insideLapTime * 5);
        
        htmlInside += `<tr class="${target.highlight ? 'bg-blue-50' : ''}">`;
        htmlInside += `<td class="text-blue-700">${formatTime(target.time)}</td>`;
        htmlInside += `<td>${formatPace(pacePerKm)}</td>`;
        htmlInside += `<td>${formatTime(insideStartTime)}</td>`;
        htmlInside += `<td>${formatTime(insideLapTime)}</td>`;
        htmlInside += `<td>${formatTime(inside3Laps)}</td>`;
        htmlInside += `<td>${formatTime(inside5Laps)}</td>`;
        htmlInside += `<td class="font-bold">${formatTime(target.time)}</td>`;
        htmlInside += '</tr>';
        
        // ì™¸ì¸¡ ê³„ì‚°
        const outsideStartTime = (target.time / 3000) * outsideConfig.startSection;
        const outsideLapTime = (target.time / 3000) * outsideConfig.lapDistance;
        const outside3Laps = outsideStartTime + (outsideLapTime * 3);
        const outside5Laps = outsideStartTime + (outsideLapTime * 5);
        
        htmlOutside += `<tr class="${target.highlight ? 'bg-purple-50' : ''}">`;
        htmlOutside += `<td class="text-purple-700">${formatTime(target.time)}</td>`;
        htmlOutside += `<td>${formatPace(pacePerKm)}</td>`;
        htmlOutside += `<td>${formatTime(outsideStartTime)}</td>`;
        htmlOutside += `<td>${formatTime(outsideLapTime)}</td>`;
        htmlOutside += `<td>${formatTime(outside3Laps)}</td>`;
        htmlOutside += `<td>${formatTime(outside5Laps)}</td>`;
        htmlOutside += `<td class="font-bold">${formatTime(target.time)}</td>`;
        htmlOutside += '</tr>';
      });
      
      htmlInside += '</tbody>';
      htmlOutside += '</tbody>';
      
      tableInside.innerHTML = htmlInside;
      tableOutside.innerHTML = htmlOutside;
    }
    
    // ì°¨íŠ¸ ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜ (PC ìŠ¤íƒ€ì¼)
    async function downloadChart(chartId, filename, format) {
      const loadingOverlay = document.getElementById('loadingOverlay');
      
      try {
        loadingOverlay.classList.add('active');
        
        const chartElement = document.getElementById(chartId);
        if (!chartElement) {
          throw new Error('ì°¨íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
        }
        
        const timestamp = new Date().toISOString().slice(0,10).replace(/-/g, '');
        const credit = 'AthleteTime_ì¥í˜¸ì¤€ì½”ì¹˜ì œì‘';
        const fullFilename = `${credit}_${filename}_${timestamp}`;
        
        // PC ìŠ¤íƒ€ì¼ ì»¨í…Œì´ë„ˆ ìƒì„±
        const downloadContainer = document.createElement('div');
        downloadContainer.style.cssText = `
          position: absolute;
          left: -9999px;
          background: white;
          padding: 40px;
          width: 1200px;
          font-family: -apple-system, BlinkMacSystemFont, 'Malgun Gothic', sans-serif;
        `;
        
        // í—¤ë”
        const header = document.createElement('div');
        header.innerHTML = `
          <div style="display: flex; justify-content: space-between; align-items: center; padding-bottom: 20px; border-bottom: 3px solid #667eea; margin-bottom: 30px;">
            <div>
              <h3 style="font-size: 24px; font-weight: bold; color: #667eea;">ëŸ¬ë‹ í˜ì´ìŠ¤ ì°¨íŠ¸</h3>
              <p style="color: #764ba2; font-size: 14px;">ê³¼í•™ì  í›ˆë ¨ì„ ìœ„í•œ ì •ë°€ ë¶„ì„ ë„êµ¬</p>
            </div>
            <div style="text-align: right;">
              <div style="font-size: 12px; color: #667eea; text-transform: uppercase; letter-spacing: 1px; font-weight: 500;">Developer</div>
              <p style="font-size: 20px; font-weight: bold; color: #1a1a1a; margin: 5px 0;">ì¥í˜¸ì¤€ ì½”ì¹˜</p>
              <p style="font-size: 14px; color: #764ba2; font-weight: 600;">ATHLETE TIME</p>
            </div>
          </div>
        `;
        downloadContainer.appendChild(header);
        
        // ì°¨íŠ¸ ë‚´ìš©
        const contentClone = chartElement.cloneNode(true);
        contentClone.querySelectorAll('button').forEach(el => el.remove());
        contentClone.querySelectorAll('.mobile-table-container').forEach(el => {
          el.style.overflow = 'visible';
        });
        contentClone.querySelectorAll('[style*="sticky"]').forEach(el => {
          el.style.position = 'relative';
          el.style.left = 'auto';
        });
        downloadContainer.appendChild(contentClone);
        
        // í‘¸í„°
        const footer = document.createElement('div');
        footer.innerHTML = `
          <div style="margin-top: 40px; padding-top: 20px; border-top: 2px solid #e5e7eb; text-align: center;">
            <div style="font-size: 24px; font-weight: 900; letter-spacing: -1px; color: #1f2937;">
              <span style="font-style: italic;">ATHLETE</span> <span>TIME</span>
            </div>
            <div style="font-size: 14px; color: #666; margin-top: 5px;">ì œì‘: ì¥í˜¸ì¤€ ì½”ì¹˜</div>
            <p style="color: #999; font-size: 12px; margin-top: 10px;">
              Â© 2024 Athlete Time | í•œêµ­ ìœ¡ìƒì¸ì„ ìœ„í•œ í˜ì´ìŠ¤ ê³„ì‚°ê¸°<br>
              <span style="font-size: 11px;">ëŸ¬ë‹ ì „ë¬¸ íŠ¸ë ˆì´ë‹ í”„ë¡œê·¸ë¨</span>
            </p>
          </div>
        `;
        downloadContainer.appendChild(footer);
        
        document.body.appendChild(downloadContainer);
        
        await new Promise(resolve => setTimeout(resolve, 100));
        
        const canvas = await html2canvas(downloadContainer, {
          scale: 3,
          backgroundColor: '#ffffff',
          logging: false
        });
        
        if (format === 'pdf') {
          const { jsPDF } = window.jspdf;
          const pdf = new jsPDF('l', 'mm', 'a4');
          const dataUrl = canvas.toDataURL('image/png');
          
          const maxWidth = 277;
          const maxHeight = 190;
          const imgRatio = canvas.height / canvas.width;
          
          let finalWidth = maxWidth;
          let finalHeight = maxWidth * imgRatio;
          
          if (finalHeight > maxHeight) {
            finalHeight = maxHeight;
            finalWidth = maxHeight / imgRatio;
          }
          
          const x = (297 - finalWidth) / 2;
          const y = (210 - finalHeight) / 2;
          
          pdf.addImage(dataUrl, 'PNG', x, y, finalWidth, finalHeight);
          pdf.setProperties({
            title: filename.replace(/_/g, ' '),
            author: 'ì¥í˜¸ì¤€ ì½”ì¹˜',
            creator: 'ATHLETE TIME'
          });
          pdf.save(fullFilename + '.pdf');
        } else {
          canvas.toBlob(blob => {
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.download = fullFilename + '.png';
            link.href = url;
            link.click();
            URL.revokeObjectURL(url);
          });
        }
        
        document.body.removeChild(downloadContainer);
        
      } catch (error) {
        console.error('ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨:', error);
        alert('ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');
      } finally {
        loadingOverlay.classList.remove('active');
      }
    }
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    window.addEventListener('DOMContentLoaded', () => {
      generateChart1();
      generateChart2();
      generateChart3();
      generateChart4();
    });
  </script>
</body>
</html>