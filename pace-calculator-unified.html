<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>í˜ì´ìŠ¤ ê³„ì‚°ê¸° | ì• ìŠ¬ë¦¬íŠ¸ íƒ€ì„</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <!-- dom-to-image ì œê±°, html2canvasë§Œ ì‚¬ìš© -->
  <style>
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
      -webkit-tap-highlight-color: transparent;
    }
    
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .card-hover {
      transition: all 0.3s ease;
    }
    
    .card-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    
    .pace-table {
      font-size: 12px;
      width: 100%;
      table-layout: fixed;
    }
    
    /* ëª¨ë°”ì¼ ë°˜ì‘í˜• ìŠ¤íƒ€ì¼ */
    @media (max-width: 768px) {
      .pace-table {
        font-size: 11px;
      }
      
      .pace-table td, .pace-table th {
        padding: 4px 2px;
      }
      
      /* í…Œì´ë¸” ìŠ¤í¬ë¡¤ */
      .table-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }
      
      /* ì¹´ë“œ ê°„ê²© ì¤„ì´ê¸° */
      .card {
        margin-bottom: 1rem;
      }
    }
    
    .pace-table td, .pace-table th {
      padding: 6px 4px;
      text-align: center;
      border: 1px solid #e5e7eb;
      white-space: nowrap;
      box-sizing: border-box;
    }
    
    .pace-table th {
      background: #f3f4f6;
      font-weight: bold;
    }
    
    .pace-table .highlight-row {
      background: #fef3c7;
    }
    
    .pace-table .sub-highlight {
      background: #dbeafe;
    }
    
    .pace-table .highlight-cell {
      background: #fbbf24;
      font-weight: bold;
    }
    
    .lane-track {
      background: linear-gradient(135deg, #f97316 0%, #dc2626 100%);
      color: white;
    }
    
    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
      opacity: 1;
      height: 40px;
    }
    
    .tab-active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    
    /* Track lane visualization styles */
    .lane-1 { stroke: #ef4444; fill: none; }
    .lane-2 { stroke: #f97316; fill: none; }
    .lane-3 { stroke: #eab308; fill: none; }
    .lane-4 { stroke: #84cc16; fill: none; }
    .lane-5 { stroke: #22c55e; fill: none; }
    .lane-6 { stroke: #06b6d4; fill: none; }
    .lane-7 { stroke: #3b82f6; fill: none; }
    .lane-8 { stroke: #8b5cf6; fill: none; }
    
    .lane-selected {
      stroke-width: 3;
      opacity: 1;
    }
    
    .lane-unselected {
      stroke-width: 1.5;
      opacity: 0.4;
    }
    
    .track-time-text {
      font-size: 11px;
      font-weight: bold;
    }
    
    @media print {
      .no-print { display: none; }
      .pace-table { page-break-inside: avoid; }
    }
    
    .table-container {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }

    .pace-header {
      position: sticky;
      left: 0;
      background: white;
      z-index: 1;
      box-shadow: 2px 0 4px rgba(0,0,0,0.1);
    }

    /* ëª¨ë°”ì¼ ë°˜ì‘í˜• ê°œì„  */
    @media (max-width: 768px) {
      /* í…Œì´ë¸” ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
      .pace-table {
        font-size: 11px;
      }
      
      .pace-table td, .pace-table th {
        padding: 6px 3px;
        min-width: 40px;
      }
      
      /* ì²«ë²ˆì§¸ ì—´ ê³ ì • */
      .pace-table thead th:first-child,
      .pace-table tbody td:first-child {
        position: sticky;
        left: 0;
        background: white;
        z-index: 10;
        box-shadow: 2px 0 4px rgba(0,0,0,0.1);
        font-weight: bold;
        background-color: #f9fafb;
      }
      
      /* ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ëª¨ë°”ì¼ ìµœì í™” */
      .download-btn {
        position: static !important;
        margin-bottom: 10px;
        width: 100%;
        justify-content: center;
        flex-wrap: wrap;
        gap: 4px;
      }
      
      .download-btn button {
        flex: 1;
        min-width: 80px;
        padding: 8px 4px;
        font-size: 11px;
      }
      
      /* íƒ­ ë©”ë‰´ ìŠ¤í¬ë¡¤ */
      .tab-menu-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }
      
      .tab-menu-container::-webkit-scrollbar {
        display: none;
      }
      
      /* ì°¨íŠ¸ ì»¨í…Œì´ë„ˆ ê°„ê²© */
      .chart-container {
        margin-bottom: 20px;
        padding: 12px !important;
      }
      
      /* ì œëª© í¬ê¸° */
      h3 {
        font-size: 16px !important;
      }
      
      /* ì„¤ëª… ë°•ìŠ¤ */
      .bg-blue-50, .bg-orange-50, .bg-green-50, .bg-cyan-50 {
        padding: 10px !important;
        margin-bottom: 12px !important;
      }
      
      /* 3000m ì¥ì• ë¬¼ ëª¨ë°”ì¼ ë ˆì´ì•„ì›ƒ */
      .steeplechase-tables {
        display: block !important;
      }
      
      .steeplechase-tables > div {
        margin-bottom: 20px;
      }
      
      /* í—¤ë” í¬ê¸° ì¡°ì • */
      header h1 {
        font-size: 18px !important;
      }
      
      header img {
        height: 32px !important;
      }
      
      /* ì œì‘ ì •ë³´ */
      .chart-header-logo {
        font-size: 18px !important;
      }
      
      /* ìŠ¤í¬ë¡¤ í‘œì‹œê¸° */
      .table-container {
        position: relative;
      }
      
      .table-container.scrollable::after {
        content: 'â† ì¢Œìš° ìŠ¤í¬ë¡¤ â†’';
        position: absolute;
        right: 5px;
        top: 5px;
        background: linear-gradient(90deg, #3b82f6, #8b5cf6);
        color: white;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 10px;
        font-weight: 600;
        pointer-events: none;
        animation: pulse 2s infinite;
      }
      
      @keyframes pulse {
        0%, 100% { opacity: 0.8; }
        50% { opacity: 1; }
      }
    }
    
    /* íƒœë¸”ë¦¿ ë°˜ì‘í˜• */
    @media (min-width: 769px) and (max-width: 1024px) {
      .pace-table {
        font-size: 11px;
      }
      
      .pace-table td, .pace-table th {
        padding: 5px 3px;
      }
      
      .chart-container {
        padding: 16px;
      }
    }

    .chart-container {
      position: relative;
    }

    .chart-watermark {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(-15deg);
      opacity: 0.03;
      pointer-events: none;
      z-index: 1;
      width: 50%;
      max-width: 350px;
      display: none; /* ì¼ë‹¨ ìˆ¨ê¹€ ì²˜ë¦¬ */
    }
    
    /* ì›Œí„°ë§ˆí¬ ì œê±° */
    .watermark-text {
      display: none !important;
    }
    
    /* ë‹¤ìš´ë¡œë“œì‹œ í…Œì´ë¸” ê°„ê²© ìœ ì§€ */
    .pace-table {
      border-spacing: 0;
      border-collapse: separate;
    }
    
    .pace-table td, .pace-table th {
      line-height: 1.2;
      vertical-align: middle;
    }
    
    /* A4 ì¸ì‡„ ìµœì í™” */
    @media print {
      @page {
        size: A4;
        margin: 15mm;
      }
      
      body {
        font-size: 11pt;
      }
      
      .pace-table {
        font-size: 9pt !important;
        page-break-inside: avoid;
      }
      
      .chart-container {
        page-break-inside: avoid;
        page-break-after: auto;
      }
      
      .no-print, .download-btn, header, .tab-btn {
        display: none !important;
      }
      
      h3 {
        font-size: 14pt !important;
      }
    }

    .chart-credit {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 12px;
      color: #4b5563;
      opacity: 0.5;
      pointer-events: none;
      z-index: 2;
      font-weight: bold;
      background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.8));
      padding: 4px 12px;
      border-radius: 6px;
      border: 1px solid rgba(0,0,0,0.05);
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }

    .download-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 5;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    @media print {
      .download-btn { display: none; }
    }

    .chart-header-logo {
      text-align: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 3px solid #e5e7eb;
    }

    .chart-header-logo img {
      height: 45px;
      margin: 0 auto;
      opacity: 0.9;
    }

    .chart-header-title {
      font-size: 14px;
      font-weight: bold;
      color: #374151;
      margin-top: 8px;
      letter-spacing: 0.5px;
    }

    .chart-header-credit {
      font-size: 12px;
      color: #6b7280;
      margin-top: 4px;
    }
  </style>
</head>
<body class="bg-gray-50">
  
  <!-- Header -->
  <header class="bg-gradient-to-r from-orange-500 to-red-600 text-white p-3 md:p-4 sticky top-0 z-10 no-print">
    <div class="max-w-6xl mx-auto flex items-center justify-between">
      <div class="flex items-center gap-3 md:gap-4">
        <button type="button" onclick="goBack()" class="p-1">
          <i class="fas fa-arrow-left text-xl"></i>
        </button>
        <div class="h-12 md:h-14 bg-white rounded-lg p-1 flex items-center">
          <img src="https://page.gensparksite.com/v1/base64_upload/947dc3993d7e35d0c99a846566641047" 
               alt="Athlete Time Logo" 
               class="h-full w-auto"
               style="max-height: 100%;">
        </div>
        <div>
          <h1 class="text-lg md:text-2xl font-bold">í˜ì´ìŠ¤ ê³„ì‚°ê¸° & ì°¨íŠ¸</h1>
          <p class="text-xs md:text-sm opacity-90 -mt-1">ATHLETE TIME</p>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <a href="pace-calculator-selector.html?force=true" class="p-2 hover:bg-white/20 rounded-lg" title="ë²„ì „ ì„ íƒ">
          <i class="fas fa-exchange-alt text-xl"></i>
        </a>
        <button type="button" onclick="window.print()" class="p-2 hover:bg-white/20 rounded-lg" title="ì¸ì‡„">
          <i class="fas fa-print text-xl"></i>
        </button>
      </div>
    </div>
  </header>

  <div class="max-w-6xl mx-auto p-4 pb-20">
    
    <!-- ëª¨ë°”ì¼ ì•ˆë‚´ ë©”ì‹œì§€ -->
    <div class="md:hidden bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg p-3 mb-4 text-center">
      <p class="text-sm font-medium">
        <i class="fas fa-hand-point-left mr-2"></i>
        í…Œì´ë¸”ì„ ì¢Œìš°ë¡œ ìŠ¤í¬ë¡¤í•˜ì„¸ìš”
      </p>
    </div>
    
    <!-- íƒ­ ë©”ë‰´ -->
    <div class="flex gap-2 mb-6 overflow-x-auto no-print tab-menu-container">
      <button type="button" onclick="switchTab('chart')" id="tab-chart" class="tab-btn px-4 py-2 rounded-lg font-medium whitespace-nowrap tab-active">
        <i class="fas fa-table mr-2"></i>í˜ì´ìŠ¤ ì°¨íŠ¸
      </button>
      <button type="button" onclick="switchTab('lane')" id="tab-lane" class="tab-btn px-4 py-2 rounded-lg font-medium whitespace-nowrap bg-white">
        <i class="fas fa-road mr-2"></i>íŠ¸ë™ ë ˆì¸
      </button>
      <button type="button" onclick="switchTab('target')" id="tab-target" class="tab-btn px-4 py-2 rounded-lg font-medium whitespace-nowrap bg-white">
        <i class="fas fa-bullseye mr-2"></i>ëª©í‘œ í˜ì´ìŠ¤
      </button>
      <button type="button" onclick="switchTab('split')" id="tab-split" class="tab-btn px-4 py-2 rounded-lg font-medium whitespace-nowrap bg-white">
        <i class="fas fa-chart-line mr-2"></i>ìŠ¤í”Œë¦¿ ê³„ì‚°
      </button>

    </div>

    <!-- í˜ì´ìŠ¤ ì°¨íŠ¸ íƒ­ -->
    <div id="chart-content" class="tab-content">
      <!-- ê°œë°œì ì •ë³´ -->
      <div class="bg-gradient-to-r from-purple-100 to-blue-100 rounded-lg p-5 mb-6 shadow-md border border-purple-200">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-4">
            <img src="https://page.gensparksite.com/v1/base64_upload/947dc3993d7e35d0c99a846566641047" 
                 alt="Athlete Time" 
                 class="h-14 md:h-16 w-auto"
                 style="opacity: 0.9; filter: contrast(1.2);">
            <div>
              <h3 class="text-lg md:text-xl font-bold text-purple-900">ëŸ¬ë‹ í˜ì´ìŠ¤ ì°¨íŠ¸</h3>
              <p class="text-sm text-purple-700">ê³¼í•™ì  í›ˆë ¨ì„ ìœ„í•œ ì •ë°€ ë¶„ì„ ë„êµ¬</p>
            </div>
          </div>
          <div class="text-right">
            <div class="text-xs text-purple-600 uppercase tracking-wider font-medium">Developer</div>
            <p class="text-lg font-bold text-purple-900">ì¥í˜¸ì¤€ ì½”ì¹˜</p>
            <p class="text-sm text-purple-700 font-semibold">ATHLETE TIME</p>
          </div>
        </div>
      </div>

      <!-- ì°¨íŠ¸ 1: KM í˜ì´ìŠ¤ë³„ ê±°ë¦¬ í™˜ì‚°í‘œ -->
      <div class="bg-white rounded-lg shadow-md p-4 mb-6 chart-container" id="chart1">
        <div class="download-btn no-print" style="position: absolute; top: 10px; right: 10px; z-index: 5; display: flex; gap: 8px;">
          <button type="button" onclick="downloadChart('chart1', 'í˜ì´ìŠ¤_ê±°ë¦¬ë³„_ì™„ì£¼ì‹œê°„', 'png')" 
                  class="bg-gradient-to-r from-blue-500 to-blue-600 text-white px-3 py-1.5 rounded-lg hover:from-blue-600 hover:to-blue-700 text-xs font-medium transition-all hover:scale-105">
            <i class="fas fa-image mr-1"></i>PNG
          </button>
          <button type="button" onclick="downloadChart('chart1', 'í˜ì´ìŠ¤_ê±°ë¦¬ë³„_ì™„ì£¼ì‹œê°„', 'pdf')" 
                  class="bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1.5 rounded-lg hover:from-red-600 hover:to-red-700 text-xs font-medium transition-all hover:scale-105">
            <i class="fas fa-file-pdf mr-1"></i>PDF
          </button>
          <button type="button" onclick="printChart('chart1')" 
                  class="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-3 py-1.5 rounded-lg hover:from-gray-600 hover:to-gray-700 text-xs font-medium transition-all hover:scale-105">
            <i class="fas fa-print mr-1"></i>ì¸ì‡„
          </button>
        </div>
        
        <!-- ì œëª© -->
        <h3 class="text-xl font-bold mb-3 text-center">
          <i class="fas fa-tachometer-alt text-blue-500 mr-2"></i>
          í‚¬ë¡œë¯¸í„° í˜ì´ìŠ¤ â†’ ê±°ë¦¬ë³„ ì™„ì£¼ ì‹œê°„
        </h3>
        
        <!-- ì œì‘ ì •ë³´ -->
        <div class="text-center mb-4 pb-3 border-b-2 border-gray-200">
          <div class="inline-block">
            <div style="font-size: 22px; font-weight: 900; letter-spacing: -1px; color: #1f2937;">
              <span style="font-style: italic;">ATHLETE</span> <span>TIME</span>
            </div>
            <div class="text-sm text-gray-600 mt-1">ì œì‘: ì¥í˜¸ì¤€ ì½”ì¹˜</div>
          </div>
        </div>
        
        <div class="text-right mb-2">
          <span class="text-xs text-gray-500">ë‹¨ìœ„: ë¶„:ì´ˆ</span>
        </div>
        
        <div class="bg-blue-50 border-l-4 border-blue-500 p-3 mb-4">
          <h4 class="font-bold text-blue-900 text-sm mb-1">ğŸ“– ì´ ì°¨íŠ¸ëŠ” ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?</h4>
          <p class="text-xs text-blue-800 leading-relaxed">
            <strong>"ë‚´ê°€ kmë‹¹ 4ë¶„ í˜ì´ìŠ¤ë¡œ ë›°ë©´..."</strong> ì´ë¼ê³  ìƒê°í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.<br>
            â€¢ ì˜ˆ: kmë‹¹ 4ë¶„ í˜ì´ìŠ¤ â†’ 5kmëŠ” 20ë¶„, 10kmëŠ” 40ë¶„, í•˜í”„ëŠ” 1:24:23<br>
            â€¢ í›ˆë ¨ ì‹œ ëª©í‘œ í˜ì´ìŠ¤ë¥¼ ì •í•˜ê³  ê° ê±°ë¦¬ë³„ í†µê³¼ ì‹œê°„ì„ í™•ì¸í•  ë•Œ í™œìš©í•˜ì„¸ìš”.
          </p>
        </div>
        
        <div class="table-container" style="position: relative;">
          
          <table class="pace-table w-full" style="position: relative; z-index: 3;">
            <thead>
              <tr>
                <th class="pace-header">km í˜ì´ìŠ¤</th>
                <th>100m</th>
                <th>200m</th>
                <th>400m</th>
                <th>800m</th>
                <th>1km</th>
                <th>3km</th>
                <th class="bg-yellow-50">5km</th>
                <th class="bg-green-50">10km</th>
                <th>15km</th>
                <th class="bg-blue-50">í•˜í”„</th>
                <th>30km</th>
                <th class="bg-purple-50">í’€ì½”ìŠ¤</th>
              </tr>
            </thead>
            <tbody id="paceChartBody1">
              <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
            </tbody>
          </table>
        </div>
        
        <!-- ì œì‘ ì •ë³´ ì¶”ê°€ -->
        <div class="mt-4 pt-3 border-t border-gray-200 text-center">
          <p class="text-xs text-gray-600">
            <span class="font-bold">Â© ATHLETE TIME</span> Â· ì œì‘: ì¥í˜¸ì¤€ ì½”ì¹˜ Â· 
            <span class="text-gray-500">ëŸ¬ë‹ ì „ë¬¸ íŠ¸ë ˆì´ë‹ í”„ë¡œê·¸ë¨</span>
          </p>
        </div>
      </div>

      <!-- ì°¨íŠ¸ 2: ëª©í‘œ ê¸°ë¡ë³„ í˜ì´ìŠ¤ ë¶„ì„í‘œ -->
      <div class="bg-white rounded-lg shadow-md p-4 mb-6 chart-container" id="chart2">
        <div class="download-btn no-print" style="position: absolute; top: 10px; right: 10px; z-index: 5; display: flex; gap: 8px;">
          <button type="button" onclick="downloadChart('chart2', 'ëª©í‘œ_ê¸°ë¡ë³„_í˜ì´ìŠ¤', 'png')" 
                  class="bg-gradient-to-r from-blue-500 to-blue-600 text-white px-3 py-1.5 rounded-lg hover:from-blue-600 hover:to-blue-700 text-xs font-medium transition-all hover:scale-105">
            <i class="fas fa-image mr-1"></i>PNG
          </button>
          <button type="button" onclick="downloadChart('chart2', 'ëª©í‘œ_ê¸°ë¡ë³„_í˜ì´ìŠ¤', 'pdf')" 
                  class="bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1.5 rounded-lg hover:from-red-600 hover:to-red-700 text-xs font-medium transition-all hover:scale-105">
            <i class="fas fa-file-pdf mr-1"></i>PDF
          </button>
          <button type="button" onclick="printChart('chart2')" 
                  class="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-3 py-1.5 rounded-lg hover:from-gray-600 hover:to-gray-700 text-xs font-medium transition-all hover:scale-105">
            <i class="fas fa-print mr-1"></i>ì¸ì‡„
          </button>
        </div>
        
        <!-- ì œëª© -->
        <h3 class="text-xl font-bold mb-3 text-center">
          <i class="fas fa-trophy text-orange-500 mr-2"></i>
          ëª©í‘œ ê¸°ë¡ë³„ í•„ìš” í˜ì´ìŠ¤ ë¶„ì„
        </h3>
        
        <!-- ì œì‘ ì •ë³´ -->
        <div class="text-center mb-4 pb-3 border-b-2 border-gray-200">
          <div class="inline-block">
            <div style="font-size: 22px; font-weight: 900; letter-spacing: -1px; color: #1f2937;">
              <span style="font-style: italic;">ATHLETE</span> <span>TIME</span>
            </div>
            <div class="text-sm text-gray-600 mt-1">ì œì‘: ì¥í˜¸ì¤€ ì½”ì¹˜</div>
          </div>
        </div>
        
        <div class="bg-orange-50 border-l-4 border-orange-500 p-3 mb-4">
          <h4 class="font-bold text-orange-900 text-sm mb-1">ğŸ¯ ì´ ì°¨íŠ¸ëŠ” ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?</h4>
          <p class="text-xs text-orange-800 leading-relaxed">
            <strong>"5kmë¥¼ 20ë¶„ì— ì™„ì£¼í•˜ë ¤ë©´..."</strong> ì´ë¼ê³  ìƒê°í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.<br>
            â€¢ ëŒ€íšŒ ëª©í‘œ ê¸°ë¡ì„ ì„¤ì •í•˜ê³  í•„ìš”í•œ í˜ì´ìŠ¤ë¥¼ í™•ì¸í•  ë•Œ<br>
            â€¢ ì¸ê¸° ëª©í‘œ ì‹œê°„ë³„ë¡œ km í˜ì´ìŠ¤, 400m ë©íƒ€ì„, ì†ë„ë¥¼ í•œëˆˆì— í™•ì¸ ê°€ëŠ¥
          </p>
        </div>

        <!-- 5km ëª©í‘œ ê¸°ë¡ -->
        <h4 class="font-bold text-sm mb-2 text-gray-700">ğŸƒ 5km ëª©í‘œ ê¸°ë¡</h4>
        <div class="table-container mb-4" style="position: relative;">
          <table class="pace-table w-full" style="position: relative; z-index: 3;">
            <thead>
              <tr>
                <th>ëª©í‘œ ê¸°ë¡</th>
                <th>km í˜ì´ìŠ¤</th>
                <th>400m ë©</th>
                <th>100m</th>
                <th>ì†ë„(km/h)</th>
                <th>ë¹„ê³ </th>
              </tr>
            </thead>
            <tbody id="target5kmTable">
              <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
            </tbody>
          </table>
        </div>

        <!-- 10km ëª©í‘œ ê¸°ë¡ -->
        <h4 class="font-bold text-sm mb-2 text-gray-700">ğŸƒ 10km ëª©í‘œ ê¸°ë¡</h4>
        <div class="table-container mb-4" style="position: relative;">
          <table class="pace-table w-full" style="position: relative; z-index: 3;">
            <thead>
              <tr>
                <th>ëª©í‘œ ê¸°ë¡</th>
                <th>km í˜ì´ìŠ¤</th>
                <th>400m ë©</th>
                <th>5km í†µê³¼</th>
                <th>ì†ë„(km/h)</th>
                <th>ë¹„ê³ </th>
              </tr>
            </thead>
            <tbody id="target10kmTable">
              <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
            </tbody>
          </table>
        </div>

        <!-- í•˜í”„ë§ˆë¼í†¤ ëª©í‘œ ê¸°ë¡ -->
        <h4 class="font-bold text-sm mb-2 text-gray-700">ğŸƒ í•˜í”„ë§ˆë¼í†¤ ëª©í‘œ ê¸°ë¡</h4>
        <div class="table-container mb-4" style="position: relative;">
          <table class="pace-table w-full" style="position: relative; z-index: 3;">
            <thead>
              <tr>
                <th>ëª©í‘œ ê¸°ë¡</th>
                <th>km í˜ì´ìŠ¤</th>
                <th>400m ë©</th>
                <th>5km í†µê³¼</th>
                <th>10km í†µê³¼</th>
                <th>ì†ë„(km/h)</th>
                <th>ë¹„ê³ </th>
              </tr>
            </thead>
            <tbody id="targetHalfTable">
              <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
            </tbody>
          </table>
        </div>

        <!-- í’€ë§ˆë¼í†¤ ëª©í‘œ ê¸°ë¡ -->
        <h4 class="font-bold text-sm mb-2 text-gray-700">ğŸƒ í’€ë§ˆë¼í†¤ ëª©í‘œ ê¸°ë¡</h4>
        <div class="table-container" style="position: relative;">
          <!-- ì›Œí„°ë§ˆí¬ -->
          <div class="watermark-text" style="top: 6px; left: 73%; font-size: 9px;">ATHLETE TIME</div>
          <div class="watermark-text" style="bottom: 8px; left: 50%; transform: translateX(-50%); font-size: 10px; letter-spacing: 2px;">ì œì‘: ì¥í˜¸ì¤€ ì½”ì¹˜</div>
          <table class="pace-table w-full" style="position: relative; z-index: 3;">
            <thead>
              <tr>
                <th>ëª©í‘œ ê¸°ë¡</th>
                <th>km í˜ì´ìŠ¤</th>
                <th>400m ë©</th>
                <th>10km í†µê³¼</th>
                <th>í•˜í”„ í†µê³¼</th>
                <th>30km í†µê³¼</th>
                <th>ì†ë„(km/h)</th>
                <th>ë¹„ê³ </th>
              </tr>
            </thead>
            <tbody id="targetFullTable">
              <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
            </tbody>
          </table>
        </div>
        
        <!-- ì œì‘ ì •ë³´ ì¶”ê°€ -->
        <div class="mt-4 pt-3 border-t border-gray-200 text-center">
          <p class="text-xs text-gray-600">
            <span class="font-bold">Â© ATHLETE TIME</span> Â· ì œì‘: ì¥í˜¸ì¤€ ì½”ì¹˜ Â· 
            <span class="text-gray-500">ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ì •í™•í•œ í˜ì´ìŠ¤ ê°€ì´ë“œ</span>
          </p>
        </div>
      </div>

      <!-- ì°¨íŠ¸ 3: 400m íŠ¸ë™ ë ˆì¸ë³„ ë³´ì • ì‹œê°„ -->
      <div class="bg-white rounded-lg shadow-md p-4 mb-6 chart-container" id="chart3">
        <div class="download-btn no-print" style="position: absolute; top: 10px; right: 10px; z-index: 5; display: flex; gap: 8px;">
          <button type="button" onclick="downloadChart('chart3', 'íŠ¸ë™_ë ˆì¸ë³„_ë³´ì •í‘œ', 'png')" 
                  class="bg-gradient-to-r from-blue-500 to-blue-600 text-white px-3 py-1.5 rounded-lg hover:from-blue-600 hover:to-blue-700 text-xs font-medium transition-all hover:scale-105">
            <i class="fas fa-image mr-1"></i>PNG
          </button>
          <button type="button" onclick="downloadChart('chart3', 'íŠ¸ë™_ë ˆì¸ë³„_ë³´ì •í‘œ', 'pdf')" 
                  class="bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1.5 rounded-lg hover:from-red-600 hover:to-red-700 text-xs font-medium transition-all hover:scale-105">
            <i class="fas fa-file-pdf mr-1"></i>PDF
          </button>
          <button type="button" onclick="printChart('chart3')" 
                  class="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-3 py-1.5 rounded-lg hover:from-gray-600 hover:to-gray-700 text-xs font-medium transition-all hover:scale-105">
            <i class="fas fa-print mr-1"></i>ì¸ì‡„
          </button>
        </div>
        
        <!-- ì œëª© -->
        <h3 class="text-xl font-bold mb-3 text-center">
          <i class="fas fa-route text-green-500 mr-2"></i>
          400m íŠ¸ë™ ë ˆì¸ë³„ ê±°ë¦¬ & ì‹œê°„ ë³´ì •í‘œ
        </h3>
        
        <!-- ì œì‘ ì •ë³´ -->
        <div class="text-center mb-4 pb-3 border-b-2 border-gray-200">
          <div class="inline-block">
            <div style="font-size: 22px; font-weight: 900; letter-spacing: -1px; color: #1f2937;">
              <span style="font-style: italic;">ATHLETE</span> <span>TIME</span>
            </div>
            <div class="text-sm text-gray-600 mt-1">ì œì‘: ì¥í˜¸ì¤€ ì½”ì¹˜</div>
          </div>
        </div>
        
        <div class="bg-green-50 border-l-4 border-green-500 p-3 mb-4">
          <h4 class="font-bold text-green-900 text-sm mb-1">ğŸŸï¸ ì´ ì°¨íŠ¸ëŠ” ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?</h4>
          <p class="text-xs text-green-800 leading-relaxed">
            <strong>íŠ¸ë™ì—ì„œ í›ˆë ¨í•  ë•Œ</strong> ê° ë ˆì¸ì˜ ì‹¤ì œ ê±°ë¦¬ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.<br>
            â€¢ 1ë ˆì¸ì€ ì •í™•íˆ 400m, 8ë ˆì¸ì€ 453m (13% ë” ê¹€)<br>
            â€¢ ì¸í„°ë²Œ í›ˆë ¨ ì‹œ ë ˆì¸ë³„ë¡œ ëª©í‘œ ì‹œê°„ì„ ì¡°ì •í•´ì•¼ í•  ë•Œ ì‚¬ìš©í•˜ì„¸ìš”.
          </p>
        </div>

        <div class="table-container" style="position: relative;">
          <!-- ì›Œí„°ë§ˆí¬ -->
          <div class="watermark-text" style="top: 35px; left: 25%; font-size: 10px;">ATHLETE</div>
          <div class="watermark-text" style="top: 35px; left: 50%; font-size: 10px;">TIME</div>
          <div class="watermark-text" style="top: 35px; left: 75%; font-size: 10px;">ì¥í˜¸ì¤€</div>
          <div class="watermark-text" style="bottom: 5px; left: 50%; transform: translateX(-50%); font-size: 11px; letter-spacing: 3px;">
            Â© ATHLETE TIME Â· ì¥í˜¸ì¤€ ì½”ì¹˜
          </div>
          
          <table class="pace-table w-full" style="position: relative; z-index: 3;">
            <thead>
              <tr>
                <th rowspan="2">km í˜ì´ìŠ¤</th>
                <th rowspan="2">400m<br>(1ë ˆì¸)</th>
                <th colspan="7">ì™¸ì¸¡ ë ˆì¸ ë³´ì • ì‹œê°„</th>
              </tr>
              <tr>
                <th class="text-xs">2ë ˆì¸<br>407m</th>
                <th class="text-xs">3ë ˆì¸<br>415m</th>
                <th class="text-xs">4ë ˆì¸<br>422m</th>
                <th class="text-xs">5ë ˆì¸<br>430m</th>
                <th class="text-xs">6ë ˆì¸<br>438m</th>
                <th class="text-xs">7ë ˆì¸<br>445m</th>
                <th class="text-xs">8ë ˆì¸<br>453m</th>
              </tr>
            </thead>
            <tbody id="laneChartTable">
              <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
            </tbody>
          </table>
        </div>
        
        <!-- ì œì‘ ì •ë³´ ì¶”ê°€ -->
        <div class="mt-4 pt-3 border-t border-gray-200 text-center">
          <p class="text-xs text-gray-600">
            <span class="font-bold">Â© ATHLETE TIME</span> Â· ì œì‘: ì¥í˜¸ì¤€ ì½”ì¹˜ Â· 
            <span class="text-gray-500">íŠ¸ë™ ë ˆì¸ë³„ ì •í™•í•œ ê±°ë¦¬ ê³„ì‚°</span>
          </p>
        </div>
      </div>

      <!-- ì°¨íŠ¸ 4: 3000m ì¥ì• ë¬¼ í˜ì´ìŠ¤ ê³„ì‚°í‘œ -->
      <div class="bg-white rounded-lg shadow-md p-4 chart-container" id="chart4">
        <div class="download-btn no-print" style="position: absolute; top: 10px; right: 10px; z-index: 5; display: flex; gap: 8px;">
          <button type="button" onclick="downloadChart('chart4', '3000m_ì¥ì• ë¬¼_í˜ì´ìŠ¤', 'png')" 
                  class="bg-gradient-to-r from-blue-500 to-blue-600 text-white px-3 py-1.5 rounded-lg hover:from-blue-600 hover:to-blue-700 text-xs font-medium transition-all hover:scale-105">
            <i class="fas fa-image mr-1"></i>PNG
          </button>
          <button type="button" onclick="downloadChart('chart4', '3000m_ì¥ì• ë¬¼_í˜ì´ìŠ¤', 'pdf')" 
                  class="bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1.5 rounded-lg hover:from-red-600 hover:to-red-700 text-xs font-medium transition-all hover:scale-105">
            <i class="fas fa-file-pdf mr-1"></i>PDF
          </button>
          <button type="button" onclick="printChart('chart4')" 
                  class="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-3 py-1.5 rounded-lg hover:from-gray-600 hover:to-gray-700 text-xs font-medium transition-all hover:scale-105">
            <i class="fas fa-print mr-1"></i>ì¸ì‡„
          </button>
        </div>
        
        <!-- ì œëª© -->
        <h3 class="text-xl font-bold mb-3 text-center">
          <i class="fas fa-water text-cyan-500 mr-2"></i>
          3000m ì¥ì• ë¬¼ ê²½ì£¼ í˜ì´ìŠ¤ ê³„ì‚°í‘œ
        </h3>
        
        <!-- ì œì‘ ì •ë³´ -->
        <div class="text-center mb-4 pb-3 border-b-2 border-gray-200">
          <div class="inline-block">
            <div style="font-size: 22px; font-weight: 900; letter-spacing: -1px; color: #1f2937;">
              <span style="font-style: italic;">ATHLETE</span> <span>TIME</span>
            </div>
            <div class="text-sm text-gray-600 mt-1">ì œì‘: ì¥í˜¸ì¤€ ì½”ì¹˜</div>
          </div>
        </div>
        
        <div class="bg-cyan-50 border-l-4 border-cyan-500 p-3 mb-4">
          <h4 class="font-bold text-cyan-900 text-sm mb-1">ğŸ’§ ì´ ì°¨íŠ¸ëŠ” ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?</h4>
          <p class="text-xs text-cyan-800 leading-relaxed">
            <strong>3000m ì¥ì• ë¬¼ ê²½ì£¼</strong>ì˜ ì •í™•í•œ í˜ì´ìŠ¤ë¥¼ ê³„ì‚°í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.<br>
            â€¢ ë¬¼ ì¥ì• ë¬¼ ìœ„ì¹˜ì— ë”°ë¼ ë© ê±°ë¦¬ê°€ ë‹¬ë¼ì§‘ë‹ˆë‹¤ (ë‚´ì¸¡: 396.084m, ì™¸ì¸¡: 419.407m)<br>
            â€¢ 7ë© + ì‹œì‘ êµ¬ê°„ìœ¼ë¡œ ì´ 28ê°œ ì¥ì• ë¬¼ê³¼ 7ê°œ ë¬¼ ì¥ì• ë¬¼ì„ í†µê³¼í•©ë‹ˆë‹¤.<br>
            â€¢ ë‘ ê°€ì§€ êµ¬ì„±ì„ ë™ì‹œì— ë¹„êµí•˜ì—¬ ëŒ€íšŒë³„ ì°¨ì´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div class="bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-lg p-4 shadow-xl border-2 border-blue-400">
            <div class="flex items-center mb-2">
              <div class="bg-white/25 rounded-full p-2 mr-3">
                <i class="fas fa-arrow-circle-left text-xl"></i>
              </div>
              <h4 class="font-bold text-xl">ë¬¼ ì¥ì• ë¬¼ ë‚´ì¸¡ (INSIDE)</h4>
            </div>
            <ul class="text-sm space-y-1.5">
              <li class="flex items-center">
                <span class="mr-2">ğŸ“</span>
                <span>ë© ê±°ë¦¬: <strong class="text-yellow-200">396.084m</strong></span>
              </li>
              <li class="flex items-center">
                <span class="mr-2">âš¡</span>
                <span>400më³´ë‹¤ <strong>3.916m ì§§ìŒ</strong></span>
              </li>
              <li class="flex items-center">
                <span class="mr-2">ğŸ</span>
                <span>ì‹œì‘ êµ¬ê°„: 227.412m</span>
              </li>
              <li class="flex items-center">
                <span class="mr-2">ğŸŒ</span>
                <span>World Athletics í‘œì¤€</span>
              </li>
            </ul>
          </div>
          <div class="bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-lg p-4 shadow-xl border-2 border-purple-400">
            <div class="flex items-center mb-2">
              <div class="bg-white/25 rounded-full p-2 mr-3">
                <i class="fas fa-arrow-circle-right text-xl"></i>
              </div>
              <h4 class="font-bold text-xl">ë¬¼ ì¥ì• ë¬¼ ì™¸ì¸¡ (OUTSIDE)</h4>
            </div>
            <ul class="text-sm space-y-1.5">
              <li class="flex items-center">
                <span class="mr-2">ğŸ“</span>
                <span>ë© ê±°ë¦¬: <strong class="text-yellow-200">419.407m</strong></span>
              </li>
              <li class="flex items-center">
                <span class="mr-2">âš¡</span>
                <span>400më³´ë‹¤ <strong>19.407m ê¹€</strong></span>
              </li>
              <li class="flex items-center">
                <span class="mr-2">ğŸ</span>
                <span>ì‹œì‘ êµ¬ê°„: 64.151m</span>
              </li>
              <li class="flex items-center">
                <span class="mr-2">ğŸŸï¸</span>
                <span>ì¼ë¶€ ê²½ê¸°ì¥ êµ¬ì„±</span>
              </li>
            </ul>
          </div>
        </div>

        <style>
          .steeplechase-inside-header {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            font-weight: bold;
          }
          .steeplechase-outside-header {
            background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%);
            color: white;
            font-weight: bold;
          }
          .steeplechase-inside-cell {
            background-color: #eff6ff;
            border-left: 2px solid #3b82f6;
            border-right: 2px solid #3b82f6;
          }
          .steeplechase-outside-cell {
            background-color: #faf5ff;
            border-left: 2px solid #a855f7;
            border-right: 2px solid #a855f7;
          }
          .steeplechase-inside-cell:first-of-type {
            border-left: 3px solid #3b82f6;
          }
          .steeplechase-inside-cell:last-of-type {
            border-right: 3px solid #3b82f6;
          }
          .steeplechase-outside-cell:first-of-type {
            border-left: 3px solid #a855f7;
          }
          .steeplechase-outside-cell:last-of-type {
            border-right: 3px solid #a855f7;
          }
          .steeplechase-table-divider {
            width: 20px;
            background: linear-gradient(to right, #3b82f6, #a855f7);
            border: none !important;
          }
        </style>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 steeplechase-tables">
          <!-- ë‚´ì¸¡ êµ¬ì„± í…Œì´ë¸” -->
          <div class="border-4 border-blue-500 rounded-lg overflow-hidden shadow-xl">
            <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white p-3 text-center">
              <h4 class="font-bold text-lg">ğŸƒ ë‚´ì¸¡ êµ¬ì„± (INSIDE)</h4>
              <p class="text-sm opacity-90">ë©ë‹¹ 396.084m â€¢ ì‹œì‘ 227.4m</p>
            </div>
            <div class="table-container" style="position: relative;">
              <table class="pace-table w-full" style="position: relative; z-index: 3;">
                <thead>
                  <tr class="bg-blue-100">
                    <th class="text-xs">ëª©í‘œê¸°ë¡</th>
                    <th class="text-xs">kmí˜ì´ìŠ¤</th>
                    <th class="text-xs">ì‹œì‘êµ¬ê°„</th>
                    <th class="text-xs">1ë©</th>
                    <th class="text-xs">3ë©</th>
                    <th class="text-xs">5ë©</th>
                    <th class="text-xs bg-blue-200 font-bold">ì™„ì£¼</th>
                  </tr>
                </thead>
                <tbody id="steeplechaseInsideTable">
                  <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- ì™¸ì¸¡ êµ¬ì„± í…Œì´ë¸” -->
          <div class="border-4 border-purple-500 rounded-lg overflow-hidden shadow-xl">
            <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white p-3 text-center">
              <h4 class="font-bold text-lg">ğŸƒ ì™¸ì¸¡ êµ¬ì„± (OUTSIDE)</h4>
              <p class="text-sm opacity-90">ë©ë‹¹ 419.407m â€¢ ì‹œì‘ 64.2m</p>
            </div>
            <div class="table-container" style="position: relative;">
              <table class="pace-table w-full" style="position: relative; z-index: 3;">
                <thead>
                  <tr class="bg-purple-100">
                    <th class="text-xs">ëª©í‘œê¸°ë¡</th>
                    <th class="text-xs">kmí˜ì´ìŠ¤</th>
                    <th class="text-xs">ì‹œì‘êµ¬ê°„</th>
                    <th class="text-xs">1ë©</th>
                    <th class="text-xs">3ë©</th>
                    <th class="text-xs">5ë©</th>
                    <th class="text-xs bg-purple-200 font-bold">ì™„ì£¼</th>
                  </tr>
                </thead>
                <tbody id="steeplechaseOutsideTable">
                  <!-- JavaScriptë¡œ ì±„ì›Œì§ -->
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="mt-4 p-3 bg-gray-50 rounded-lg">
          <p class="text-xs text-gray-600">
            <strong>ì°¸ê³ :</strong> ì‹¤ì œ ê²½ê¸°ì—ì„œëŠ” ì¥ì• ë¬¼ í†µê³¼ ì‹œ ì†ë„ ì €í•˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. 
            ì¼ë°˜ì ìœ¼ë¡œ í‰ì§€ 3000m ê¸°ë¡ë³´ë‹¤ 30-60ì´ˆ ì •ë„ ëŠ¦ì€ ê¸°ë¡ì´ ë‚˜ì˜µë‹ˆë‹¤.
            ì´ í‘œëŠ” ê· ë“± í˜ì´ìŠ¤ ê¸°ì¤€ì´ë©°, ì‹¤ì œ ê²½ê¸°ì—ì„œëŠ” ì¥ì• ë¬¼ êµ¬ê°„ì—ì„œ í˜ì´ìŠ¤ ë³€í™”ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          </p>
        </div>
        
        <!-- ì œì‘ ì •ë³´ ì¶”ê°€ -->
        <div class="mt-4 pt-3 border-t border-gray-200 text-center">
          <p class="text-xs text-gray-600">
            <span class="font-bold">Â© ATHLETE TIME</span> Â· ì œì‘: ì¥í˜¸ì¤€ ì½”ì¹˜ Â· 
            <span class="text-gray-500">3000m ì¥ì• ë¬¼ ê²½ì£¼ ì „ë¬¸ í˜ì´ìŠ¤ ë¶„ì„</span>
          </p>
        </div>
      </div>
    </div>

    <!-- ë ˆì¸ ê³„ì‚°ê¸° íƒ­ (í´ë¦­ì‹œ ìƒˆ ì°½ìœ¼ë¡œ ì—´ë¦¼) -->
    <div id="lane-content" class="tab-content hidden">
      <div class="bg-white rounded-lg shadow-md p-6">
        <div class="text-center py-12">
          <i class="fas fa-road text-orange-500 text-6xl mb-4"></i>
          <h2 class="text-2xl font-bold mb-4">400m íŠ¸ë™ ë ˆì¸ë³„ êµ¬ê°„ ì‹œê°„ ê³„ì‚°ê¸°</h2>
          <p class="text-gray-600 mb-6">
            íŠ¸ë™ ë ˆì¸ ê³„ì‚°ê¸°ê°€ ìƒˆ ì°½ì—ì„œ ì—´ë¦½ë‹ˆë‹¤.
          </p>
          <button type="button" onclick="window.open('track-lane-simple.html', '_blank')" 
                  class="bg-gradient-to-r from-orange-500 to-red-600 text-white px-8 py-3 rounded-lg font-medium text-lg hover:opacity-90 transition">
            <i class="fas fa-external-link-alt mr-2"></i>
            íŠ¸ë™ ë ˆì¸ ê³„ì‚°ê¸° ì—´ê¸°
          </button>
          <div class="mt-8 text-sm text-gray-500">
            <p>íŠ¸ë™ ë ˆì¸ë³„ 4êµ¬ê°„ (ì§ì„ Ã—2, ê³µì„ Ã—2) ì‹œê°„ ë¶„ì„</p>
            <p>ê° ë ˆì¸ì˜ ì‹¤ì œ ê±°ë¦¬ì™€ êµ¬ê°„ë³„ ì‹œê°„ ìë™ ê³„ì‚°</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ëª©í‘œ í˜ì´ìŠ¤ íƒ­ -->
    <div id="target-content" class="tab-content hidden">
      <div class="bg-white rounded-lg shadow-md p-6 card-hover">
        <h2 class="text-xl font-bold mb-4">
          <i class="fas fa-bullseye text-blue-500"></i> ëª©í‘œ í˜ì´ìŠ¤ ê³„ì‚°ê¸°
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">ëª©í‘œ ê±°ë¦¬</label>
            <select id="targetDistance" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
              <option value="100">100m</option>
              <option value="200">200m</option>
              <option value="400">400m</option>
              <option value="800">800m</option>
              <option value="1500">1500m</option>
              <option value="3000">3000m</option>
              <option value="5000" selected>5000m (5km)</option>
              <option value="10000">10000m (10km)</option>
              <option value="21097.5">í•˜í”„ë§ˆë¼í†¤</option>
              <option value="42195">í’€ë§ˆë¼í†¤</option>
              <option value="custom">ì§ì ‘ ì…ë ¥</option>
            </select>
            <input type="number" id="customDistance" placeholder="ê±°ë¦¬ ì…ë ¥ (m)" 
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg mt-2 hidden" aria-label="customDistanceì— ì…ë ¥">
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">ëª©í‘œ ì‹œê°„</label>
            <div class="flex gap-2">
              <input type="number" id="targetHours" placeholder="ì‹œ" min="0" max="23" 
                     class="w-1/3 px-3 py-2 border border-gray-300 rounded-lg" aria-label="targetHoursì— ì…ë ¥">
              <input type="number" id="targetMinutes" placeholder="ë¶„" min="0" max="59" 
                     class="w-1/3 px-3 py-2 border border-gray-300 rounded-lg" aria-label="targetMinutesì— ì…ë ¥">
              <input type="number" id="targetSeconds" placeholder="ì´ˆ" min="0" max="59" step="0.1" 
                     class="w-1/3 px-3 py-2 border border-gray-300 rounded-lg" aria-label="targetSecondsì— ì…ë ¥">
            </div>
          </div>
        </div>
        
        <button type="button" onclick="calculateTargetPace()" 
                class="w-full mt-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 rounded-lg font-medium hover:opacity-90 transition">
          í˜ì´ìŠ¤ ê³„ì‚°í•˜ê¸°
        </button>
        
        <div id="targetResults" class="mt-6 hidden">
          <div class="bg-blue-50 rounded-lg p-4">
            <h3 class="font-bold mb-3">í˜ì´ìŠ¤ ë¶„ì„ ê²°ê³¼</h3>
            <div class="grid grid-cols-2 gap-4 text-sm">
              <div>
                <span class="text-gray-600">400m ë©:</span>
                <span class="font-mono font-bold ml-2" id="lap400">-</span>
              </div>
              <div>
                <span class="text-gray-600">100m í˜ì´ìŠ¤:</span>
                <span class="font-mono font-bold ml-2" id="pace100m">-</span>
              </div>
              <div>
                <span class="text-gray-600">1km í˜ì´ìŠ¤:</span>
                <span class="font-mono font-bold ml-2" id="pace1km">-</span>
              </div>
              <div>
                <span class="text-gray-600">í‰ê·  ì†ë„:</span>
                <span class="font-mono font-bold ml-2" id="avgSpeed">-</span>
              </div>
            </div>
            
            <div class="mt-4 pt-4 border-t">
              <h4 class="font-medium mb-2">ë© ìŠ¤í”Œë¦¿</h4>
              <div class="space-y-1 text-sm" id="lapSplits">
                <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ìŠ¤í”Œë¦¿ ê³„ì‚°ê¸° íƒ­ -->
    <div id="split-content" class="tab-content hidden">
      <div class="bg-white rounded-lg shadow-md p-6 card-hover">
        <h2 class="text-xl font-bold mb-4">
          <i class="fas fa-chart-line text-green-500"></i> ìŠ¤í”Œë¦¿ ê³„ì‚°ê¸°
        </h2>
        
        <div class="space-y-4">
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">ì´ ê±°ë¦¬ (m)</label>
              <input type="number" id="splitTotalDistance" value="5000" 
                     class="w-full px-3 py-2 border border-gray-300 rounded-lg" aria-label="splitTotalDistanceì— ì…ë ¥">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">êµ¬ê°„ ê±°ë¦¬ (m)</label>
              <input type="number" id="splitInterval" value="1000" 
                     class="w-full px-3 py-2 border border-gray-300 rounded-lg" aria-label="splitIntervalì— ì…ë ¥">
            </div>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">ëª©í‘œ ì‹œê°„</label>
            <div class="flex gap-2">
              <input type="number" id="splitHours" placeholder="ì‹œ" min="0" 
                     class="w-1/3 px-3 py-2 border border-gray-300 rounded-lg" aria-label="splitHoursì— ì…ë ¥">
              <input type="number" id="splitMinutes" placeholder="ë¶„" min="0" 
                     class="w-1/3 px-3 py-2 border border-gray-300 rounded-lg" aria-label="splitMinutesì— ì…ë ¥">
              <input type="number" id="splitSeconds" placeholder="ì´ˆ" min="0" step="0.1" 
                     class="w-1/3 px-3 py-2 border border-gray-300 rounded-lg" aria-label="splitSecondsì— ì…ë ¥">
            </div>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">í˜ì´ìŠ¤ ì „ëµ</label>
            <select id="paceStrategy" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
              <option value="even">ê· ë“± í˜ì´ìŠ¤ (Even)</option>
              <option value="negative">ë„¤ê±°í‹°ë¸Œ ìŠ¤í”Œë¦¿ (í›„ë°˜ ê°€ì†)</option>
              <option value="positive">í¬ì§€í‹°ë¸Œ ìŠ¤í”Œë¦¿ (ì „ë°˜ ì†ë„)</option>
            </select>
          </div>
        </div>
        
        <button type="button" onclick="calculateSplits()" 
                class="w-full mt-4 bg-gradient-to-r from-green-500 to-teal-600 text-white py-3 rounded-lg font-medium hover:opacity-90 transition">
          ìŠ¤í”Œë¦¿ ê³„ì‚°í•˜ê¸°
        </button>
        
        <div id="splitResults" class="mt-6 hidden">
          <div id="splitTable" class="overflow-x-auto">
            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
          </div>
        </div>
      </div>
    </div>
    
    <!-- íŠ¸ë™ ë ˆì¸ ê³„ì‚°ê¸° íƒ­ -->
    <div id="lane-calculator-content" class="tab-content hidden">
      <!-- ëª©í‘œ ì‹œê°„ ì…ë ¥ ì„¹ì…˜ -->
      <div class="bg-white rounded-lg shadow p-6 mb-4">
        <div class="flex flex-wrap items-center gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">í•´ë‹¹ ë ˆì¸ ëª©í‘œ ì‹œê°„ (ì´ˆ)</label>
            <div class="flex gap-2">
              <input type="number" id="laneTargetTime" value="72" min="30" max="120" step="0.1"
                     class="w-32 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" aria-label="laneTargetTimeì— ì…ë ¥">
              <button type="button" onclick="calculateLaneAll()" 
                      class="bg-purple-600 text-white px-6 py-2 rounded-md hover:bg-purple-700 transition">
                ê³„ì‚°í•˜ê¸°
              </button>
            </div>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">ì„ íƒ ë ˆì¸</label>
            <select id="laneLaneSelector" onchange="calculateLaneAll()" 
                    class="px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
              <option value="1">ë ˆì¸ 1 (400.00m)</option>
              <option value="2">ë ˆì¸ 2 (407.67m)</option>
              <option value="3">ë ˆì¸ 3 (415.33m)</option>
              <option value="4">ë ˆì¸ 4 (423.00m)</option>
              <option value="5">ë ˆì¸ 5 (430.66m)</option>
              <option value="6">ë ˆì¸ 6 (438.33m)</option>
              <option value="7">ë ˆì¸ 7 (445.99m)</option>
              <option value="8">ë ˆì¸ 8 (453.66m)</option>
            </select>
          </div>
        </div>
      </div>

      <!-- í° íŠ¸ë™ ì‹œê°í™” -->
      <div class="bg-white rounded-lg shadow p-6 mb-4">
        <h3 class="font-bold text-xl mb-4">íŠ¸ë™ êµ¬ê°„ë³„ ì‹œê°„ ì‹œê°í™”</h3>
        
        <!-- SVG íŠ¸ë™ (ì‹¤ì œ ë¹„ìœ¨) -->
        <div class="w-full overflow-x-auto">
          <svg viewBox="0 0 800 400" class="w-full" style="min-width: 700px; min-height: 350px;">
            <!-- ë°°ê²½ -->
            <rect width="800" height="400" fill="#f0f0f0"/>
            
            <!-- íŠ¸ë™ ë ˆì¸ë“¤ (ë¨¼ì € ê·¸ë ¤ì„œ ì”ë”” ì•„ë˜ì— ìœ„ì¹˜) -->
            <g id="laneTrackLanes">
              <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
            </g>
            
            <!-- ì¤‘ì•™ ì”ë”” (ì‹¤ì œ ë¹„ìœ¨) -->
            <ellipse cx="400" cy="200" rx="210" ry="90" fill="#90EE90"/>
            
            <!-- Start/Finish ë¼ì¸ -->
            <line x1="505" y1="110" x2="505" y2="290" stroke="white" stroke-width="3"/>
            <rect x="490" y="190" width="30" height="20" fill="black"/>
            <text x="505" y="204" font-size="11" fill="white" text-anchor="middle" font-weight="bold">S/F</text>
            
            <!-- 100m, 200m, 300m ë§ˆì»¤ -->
            <g id="distanceMarkers">
              <!-- 100m ì§€ì  (ì²« ë²ˆì§¸ ê³¡ì„  ì¤‘ê°„) -->
              <circle cx="250" cy="200" r="3" fill="yellow"/>
              <text x="250" y="190" font-size="10" fill="black" text-anchor="middle" font-weight="bold">100m</text>
              
              <!-- 200m ì§€ì  (ë°±ìŠ¤íŠ¸ë ˆì¹˜ ë) -->
              <circle cx="295" cy="108" r="3" fill="yellow"/>
              <text x="295" y="98" font-size="10" fill="black" text-anchor="middle" font-weight="bold">200m</text>
              
              <!-- 300m ì§€ì  (ë‘ ë²ˆì§¸ ê³¡ì„  ì¤‘ê°„) -->
              <circle cx="550" cy="200" r="3" fill="yellow"/>
              <text x="550" y="190" font-size="10" fill="black" text-anchor="middle" font-weight="bold">300m</text>
            </g>
            
            <!-- êµ¬ê°„ ë¼ë²¨ -->
            <g id="sectionLabels">
              <!-- í™ˆìŠ¤íŠ¸ë ˆì¹˜ (í•˜ë‹¨) -->
              <rect x="350" y="310" width="100" height="25" rx="5" fill="#3b82f6" opacity="0.8"/>
              <text x="400" y="327" font-size="13" fill="white" text-anchor="middle" font-weight="bold">ì§ì„ â‘¡ í™ˆ</text>
              
              <!-- ë°±ìŠ¤íŠ¸ë ˆì¹˜ (ìƒë‹¨) -->
              <rect x="350" y="65" width="100" height="25" rx="5" fill="#3b82f6" opacity="0.8"/>
              <text x="400" y="82" font-size="13" fill="white" text-anchor="middle" font-weight="bold">ì§ì„ â‘  ë°±</text>
              
              <!-- ì²« ë²ˆì§¸ ê³¡ì„  (ì˜¤ë¥¸ìª½) -->
              <rect x="630" y="185" width="70" height="25" rx="5" fill="#ef4444" opacity="0.8"/>
              <text x="665" y="202" font-size="13" fill="white" text-anchor="middle" font-weight="bold">ê³¡ì„ â‘ </text>
              
              <!-- ë‘ ë²ˆì§¸ ê³¡ì„  (ì™¼ìª½) -->
              <rect x="100" y="185" width="70" height="25" rx="5" fill="#ef4444" opacity="0.8"/>
              <text x="135" y="202" font-size="13" fill="white" text-anchor="middle" font-weight="bold">ê³¡ì„ â‘¡</text>
            </g>
            
            <!-- ì§„í–‰ ë°©í–¥ í™”ì‚´í‘œ -->
            <defs>
              <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
              </marker>
            </defs>
            
            <!-- í™”ì‚´í‘œë“¤ (ì‹¤ì œ íŠ¸ë™ ë°©í–¥) -->
            <g opacity="0.6">
              <!-- í™ˆìŠ¤íŠ¸ë ˆì¹˜ í™”ì‚´í‘œ (ì‹œê³„ ë°˜ëŒ€ ë°©í–¥) -->
              <path d="M 480 280 L 320 280" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
              
              <!-- ë‘ ë²ˆì§¸ ê³¡ì„  í™”ì‚´í‘œ -->
              <path d="M 295 280 Q 200 200 295 120" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
              
              <!-- ë°±ìŠ¤íŠ¸ë ˆì¹˜ í™”ì‚´í‘œ -->
              <path d="M 320 120 L 480 120" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
              
              <!-- ì²« ë²ˆì§¸ ê³¡ì„  í™”ì‚´í‘œ -->
              <path d="M 505 120 Q 600 200 505 280" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
            </g>
          </svg>
        </div>
      </div>

      <!-- ë ˆì¸ë³„ ì‹œê°„ í…Œì´ë¸” -->
      <div class="bg-white rounded-lg shadow p-6">
        <h3 class="font-bold text-xl mb-4">ë ˆì¸ë³„ êµ¬ê°„ ì‹œê°„ ë¶„ì„</h3>
        <div class="overflow-x-auto">
          <table class="w-full pace-table">
            <thead>
              <tr>
                <th rowspan="2">ë ˆì¸</th>
                <th rowspan="2">ì´ ê±°ë¦¬</th>
                <th rowspan="2">ìŠ¤íƒœê±°</th>
                <th rowspan="2">ì´ ì‹œê°„</th>
                <th rowspan="2">ì‹œì°¨</th>
                <th colspan="4" class="bg-gray-50">êµ¬ê°„ë³„ ì‹œê°„ (ì´ˆ)</th>
              </tr>
              <tr>
                <th class="bg-blue-50">ì§ì„ â‘ </th>
                <th class="bg-red-50">ê³¡ì„ â‘ </th>
                <th class="bg-blue-50">ì§ì„ â‘¡</th>
                <th class="bg-red-50">ê³¡ì„ â‘¡</th>
              </tr>
            </thead>
            <tbody id="laneTimeTable">
              <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
            </tbody>
          </table>
        </div>
        
        <!-- ì¶”ê°€ ì •ë³´ ì˜ì—­ -->
        <div id="laneAdditionalInfo">
          <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
        </div>
        
        <div class="mt-6 p-4 bg-blue-50 rounded-lg">
          <h4 class="font-bold text-lg mb-2">ğŸ’¡ ì‚¬ìš© ë°©ë²•</h4>
          <ul class="space-y-1 text-sm">
            <li>â€¢ <strong>ëª©í‘œ ì‹œê°„</strong>ì€ <strong>ì„ íƒí•œ ë ˆì¸ì—ì„œì˜ ì‹¤ì œ ì‹œê°„</strong>ì…ë‹ˆë‹¤</li>
            <li>â€¢ ì˜ˆ: 4ë ˆì¸ì—ì„œ 90ì´ˆ = 4ë ˆì¸(422.37m)ì„ 90ì´ˆì— ì™„ì£¼</li>
            <li>â€¢ ë™ì¼í•œ ì†ë„ë¡œ 1ë ˆì¸ì„ ë‹¬ë¦¬ë©´ ì•½ 85.17ì´ˆê°€ ë©ë‹ˆë‹¤</li>
            <li>â€¢ <strong>ì§ì„  êµ¬ê°„</strong>: ëª¨ë“  ë ˆì¸ ë™ì¼ (84.39m Ã— 2)</li>
            <li>â€¢ <strong>ê³¡ì„  êµ¬ê°„</strong>: ë°”ê¹¥ ë ˆì¸ì¼ìˆ˜ë¡ ë” ê¹€</li>
          </ul>
        </div>
        
        <!-- í›ˆë ¨ í˜ì´ìŠ¤ ì¶”ì²œ -->
        <div class="mt-4 p-4 bg-green-50 rounded-lg">
          <h4 class="font-bold text-lg mb-2">ğŸƒ í›ˆë ¨ í˜ì´ìŠ¤ ê°€ì´ë“œ</h4>
          <div id="trainingPaceGuide">
            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
          </div>
        </div>
        
        <!-- ì˜ˆìƒ ê¸°ë¡ ê³„ì‚°ê¸° -->
        <div class="mt-4 p-4 bg-yellow-50 rounded-lg">
          <h4 class="font-bold text-lg mb-2">ğŸ¯ ê±°ë¦¬ë³„ ì˜ˆìƒ ê¸°ë¡</h4>
          <div id="distancePredictions">
            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
          </div>
        </div>
        
        <!-- 200m ìŠ¤í”Œë¦¿ ê³„ì‚° -->
        <div class="mt-4 p-4 bg-indigo-50 rounded-lg">
          <h4 class="font-bold text-lg mb-2">â±ï¸ 200m ìŠ¤í”Œë¦¿ íƒ€ì„</h4>
          <p class="text-sm text-gray-600 mb-2">ì„ íƒí•œ ë ˆì¸ì—ì„œ ì¼ì • í˜ì´ìŠ¤ë¡œ ë‹¬ë¦´ ë•Œì˜ 200m í†µê³¼ ì‹œê°„</p>
          <div id="splitTimes">
            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
          </div>
        </div>
      </div>
    </div>
    
  </div>

  <script>
    // IAAF í‘œì¤€ ë ˆì¸ ê±°ë¦¬
    const laneDistances = {
      1: 400.00,
      2: 407.04,
      3: 414.70,
      4: 422.37,
      5: 430.03,
      6: 437.70,
      7: 445.37,
      8: 453.03
    };

    // í‚¬ë¡œë¯¸í„° í˜ì´ìŠ¤ í…Œì´ë¸” ì—…ë°ì´íŠ¸
    function updateKmPaceTable() {
      const tbody = document.querySelector('#kmPaceTable tbody');
      if (!tbody) return;
      
      tbody.innerHTML = '';
      
      // í˜ì´ìŠ¤ ë²”ìœ„: 3:00 ~ 7:00 (ë¶„:ì´ˆ/km)
      const paces = [
        { pace: '3:00', seconds: 180 },
        { pace: '3:30', seconds: 210 },
        { pace: '4:00', seconds: 240 },
        { pace: '4:30', seconds: 270 },
        { pace: '5:00', seconds: 300 },
        { pace: '5:30', seconds: 330 },
        { pace: '6:00', seconds: 360 },
        { pace: '6:30', seconds: 390 },
        { pace: '7:00', seconds: 420 }
      ];
      
      const distances = [
        { name: '5km', meters: 5000 },
        { name: '10km', meters: 10000 },
        { name: 'í•˜í”„', meters: 21097.5 },
        { name: 'í’€', meters: 42195 }
      ];
      
      paces.forEach(paceData => {
        const row = tbody.insertRow();
        row.innerHTML = `
          <td class="font-bold">${paceData.pace}</td>
          ${distances.map(dist => {
            const totalSeconds = (dist.meters / 1000) * paceData.seconds;
            return `<td>${formatTime(totalSeconds)}</td>`;
          }).join('')}
        `;
      });
    }
    
    // ëª©í‘œ ê¸°ë¡ í…Œì´ë¸” ì—…ë°ì´íŠ¸
    function updateGoalTable() {
      // 5km ëª©í‘œ í…Œì´ë¸”
      updateSpecificGoalTable('goal5kmTable', 5000, [
        15 * 60, // 15:00
        16 * 60, // 16:00
        17 * 60, // 17:00
        18 * 60, // 18:00
        19 * 60, // 19:00
        20 * 60, // 20:00
        22 * 60, // 22:00
        25 * 60, // 25:00
        30 * 60  // 30:00
      ]);
      
      // 10km ëª©í‘œ í…Œì´ë¸”
      updateSpecificGoalTable('goal10kmTable', 10000, [
        32 * 60, // 32:00
        35 * 60, // 35:00
        37 * 60, // 37:00
        40 * 60, // 40:00
        43 * 60, // 43:00
        45 * 60, // 45:00
        50 * 60, // 50:00
        55 * 60, // 55:00
        60 * 60  // 60:00
      ]);
      
      // í•˜í”„ë§ˆë¼í†¤ ëª©í‘œ í…Œì´ë¸”
      updateSpecificGoalTable('goalHalfTable', 21097.5, [
        70 * 60,   // 1:10:00
        75 * 60,   // 1:15:00
        80 * 60,   // 1:20:00
        85 * 60,   // 1:25:00
        90 * 60,   // 1:30:00
        100 * 60,  // 1:40:00
        110 * 60,  // 1:50:00
        120 * 60,  // 2:00:00
        150 * 60   // 2:30:00
      ]);
      
      // í’€ë§ˆë¼í†¤ ëª©í‘œ í…Œì´ë¸”
      updateSpecificGoalTable('goalFullTable', 42195, [
        150 * 60,  // 2:30:00
        165 * 60,  // 2:45:00
        180 * 60,  // 3:00:00
        195 * 60,  // 3:15:00
        210 * 60,  // 3:30:00
        225 * 60,  // 3:45:00
        240 * 60,  // 4:00:00
        270 * 60,  // 4:30:00
        300 * 60   // 5:00:00
      ]);
    }
    
    // íŠ¹ì • ëª©í‘œ í…Œì´ë¸” ì—…ë°ì´íŠ¸
    function updateSpecificGoalTable(tableId, distanceMeters, goalTimes) {
      const tbody = document.querySelector(`#${tableId} tbody`);
      if (!tbody) return;
      
      tbody.innerHTML = '';
      
      goalTimes.forEach(totalSeconds => {
        const paceSeconds = totalSeconds / (distanceMeters / 1000);
        const row = tbody.insertRow();
        row.innerHTML = `
          <td class="font-bold">${formatTime(totalSeconds)}</td>
          <td>${formatPace(paceSeconds)}</td>
        `;
      });
    }
    
    // ì‹œê°„ í¬ë§·íŒ… í•¨ìˆ˜
    function formatTime(seconds, forceHours = false) {
      if (isNaN(seconds) || seconds === null) return '-';
      
      const hours = Math.floor(seconds / 3600);
      const mins = Math.floor((seconds % 3600) / 60);
      const secs = seconds % 60;
      
      if (hours > 0 || forceHours) {
        return `${hours}:${String(mins).padStart(2, '0')}:${String(Math.floor(secs)).padStart(2, '0')}`;
      } else if (mins > 0) {
        return `${mins}:${String(Math.floor(secs)).padStart(2, '0')}`;
      } else {
        return secs.toFixed(1);
      }
    }

    // í˜ì´ìŠ¤ë¥¼ ë¶„:ì´ˆ í˜•ì‹ìœ¼ë¡œ í¬ë§·
    function formatPace(secondsPerKm) {
      const mins = Math.floor(secondsPerKm / 60);
      const secs = Math.floor(secondsPerKm % 60);
      return `${mins}:${String(secs).padStart(2, '0')}`;
    }

    // íƒ­ ì „í™˜
    function switchTab(tabName) {
      // ëª¨ë“  íƒ­ ë‚´ìš© ìˆ¨ê¸°ê¸°
      document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.add('hidden');
      });
      
      // ëª¨ë“  íƒ­ ë²„íŠ¼ ë¹„í™œì„±í™”
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('tab-active');
        btn.classList.add('bg-white');
      });
      
      // ì„ íƒí•œ íƒ­ í™œì„±í™”
      document.getElementById(`${tabName}-content`).classList.remove('hidden');
      document.getElementById(`tab-${tabName}`).classList.add('tab-active');
      document.getElementById(`tab-${tabName}`).classList.remove('bg-white');
      
      // ì°¨íŠ¸ê°€ ì„ íƒë˜ë©´ ì°¨íŠ¸ ìƒì„±
      if (tabName === 'chart') {
        generatePaceChart1();
        generateTargetTables();
        generateLaneChart();
        generateSteeplechaseChart();
      } else if (tabName === 'lane') {
        // íŠ¸ë™ ë ˆì¸ ê³„ì‚°ê¸° ì§ì ‘ í‘œì‹œ
        // ì•½ê°„ì˜ ì§€ì—° í›„ ì´ˆê¸° ê³„ì‚° ì‹¤í–‰
        setTimeout(() => {
          calculateLaneAll();
        }, 100);
      }
    }

    // íŠ¸ë™ ë ˆì¸ë³„ ê³„ì‚° í•¨ìˆ˜ë“¤
    function calculateLaneAll() {
      // console.log('calculateLaneAll í•¨ìˆ˜ í˜¸ì¶œë¨'); // Production: removed
      
      const targetTimeInput = document.getElementById('laneTargetTime');
      const selectedLaneInput = document.getElementById('laneLaneSelector');
      
      if (!targetTimeInput || !selectedLaneInput) {
        console.error('Input elements not found!');
        return;
      }
      
      const targetTime = parseFloat(targetTimeInput.value);
      const selectedLane = parseInt(selectedLaneInput.value);
      
      console.log('ì…ë ¥ê°’:', { targetTime, selectedLane });
      
      // ì…ë ¥ê°’ ê²€ì¦
      if (isNaN(targetTime) || targetTime <= 0) {
        alert('ì˜¬ë°”ë¥¸ ëª©í‘œ ì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      // World Athletics (IAAF) ê³µì‹ í‘œì¤€ íŠ¸ë™ ê·œê²©
      const STRAIGHT_LENGTH = 84.39; // ì§ì„  êµ¬ê°„ ê¸¸ì´
      const LANE_WIDTH = 1.22; // ë ˆì¸ í­
      const KERB_RADIUS = 36.50; // ë‚´ì¸¡ ê°€ì¥ìë¦¬(kerb) ë°˜ê²½
      const MEASUREMENT_OFFSET_LANE1 = 0.30; // ë ˆì¸ 1 ì¸¡ì •ì„  ì˜¤í”„ì…‹ (ì»¤ë¸Œ ìˆëŠ” ê²½ìš°)
      const MEASUREMENT_OFFSET_OTHER = 0.20; // ë ˆì¸ 2-8 ì¸¡ì •ì„  ì˜¤í”„ì…‹
      const BASE_RADIUS = KERB_RADIUS + MEASUREMENT_OFFSET_LANE1; // ë ˆì¸ 1 ì¸¡ì • ë°˜ê²½ = 36.80m
      
      // ë¨¼ì € ì„ íƒëœ ë ˆì¸ì˜ ê±°ë¦¬ë¥¼ ê³„ì‚°
      let selectedLaneDistance = 0;
      if (selectedLane === 1) {
        const radius = KERB_RADIUS + MEASUREMENT_OFFSET_LANE1;
        selectedLaneDistance = (STRAIGHT_LENGTH * 2) + (Math.PI * radius * 2);
      } else {
        const radius = KERB_RADIUS + (LANE_WIDTH * (selectedLane - 1)) + MEASUREMENT_OFFSET_OTHER;
        selectedLaneDistance = (STRAIGHT_LENGTH * 2) + (Math.PI * radius * 2);
      }
      
      // ì„ íƒí•œ ë ˆì¸ì—ì„œì˜ ì†ë„ ê³„ì‚° (ì´ ì†ë„ë¡œ ëª¨ë“  ë ˆì¸ ê³„ì‚°)
      const speedInSelectedLane = selectedLaneDistance / targetTime; // m/s
      
      // ë ˆì¸ë³„ ê³„ì‚° (World Athletics ê³µì‹ ê·œê²©)
      const lanes = [];
      for (let lane = 1; lane <= 8; lane++) {
        // ê° ë ˆì¸ì˜ ì¸¡ì • ë°˜ê²½ ê³„ì‚°
        let measurementRadius;
        if (lane === 1) {
          measurementRadius = KERB_RADIUS + MEASUREMENT_OFFSET_LANE1; // 36.80m
        } else {
          // ë ˆì¸ 2ë¶€í„°ëŠ” ì´ì „ ë ˆì¸ì˜ ë°”ê¹¥ìª½ + 20cmì—ì„œ ì¸¡ì •
          measurementRadius = KERB_RADIUS + (LANE_WIDTH * (lane - 1)) + MEASUREMENT_OFFSET_OTHER;
        }
        
        const curveLength = Math.PI * measurementRadius * 2; // ë‘ ê³¡ì„  êµ¬ê°„ì˜ ì´ ê¸¸ì´
        const totalDistance = (STRAIGHT_LENGTH * 2) + curveLength;
        const stagger = lane === 1 ? 0 : totalDistance - 400;
        
        // êµ¬ê°„ë³„ ê±°ë¦¬ ê³„ì‚°
        const sectionDistances = {
          straight1: STRAIGHT_LENGTH,
          curve1: curveLength / 2,
          straight2: STRAIGHT_LENGTH,
          curve2: curveLength / 2
        };
        
        // ê° êµ¬ê°„ì„ í•´ë‹¹ ì†ë„ë¡œ í†µê³¼í•˜ëŠ” ì‹œê°„
        const sectionTimes = {
          straight1: sectionDistances.straight1 / speedInSelectedLane,
          curve1: sectionDistances.curve1 / speedInSelectedLane,
          straight2: sectionDistances.straight2 / speedInSelectedLane,
          curve2: sectionDistances.curve2 / speedInSelectedLane
        };
        
        // ë‹¤ë¥¸ ë ˆì¸ì—ì„œ ë™ì¼í•œ ì†ë„ë¡œ ë›°ì—ˆì„ ë•Œì˜ ì´ ì‹œê°„
        const adjustedTime = totalDistance / speedInSelectedLane;
        
        lanes.push({
          lane,
          radius: measurementRadius,
          distance: totalDistance,
          stagger,
          adjustedTime,
          sectionDistances,
          sectionTimes,
          isSelected: lane === selectedLane,
          speedMPS: speedInSelectedLane,
          speedKMH: speedInSelectedLane * 3.6,
          pacePerKm: 1000 / speedInSelectedLane
        });
      }
      
      console.log('ê³„ì‚°ëœ ë ˆì¸ ë°ì´í„°:', lanes.length, 'ê°œ ë ˆì¸');
      
      // íŠ¸ë™ ì‹œê°í™” ì—…ë°ì´íŠ¸
      try {
        drawTrackLanes(lanes, selectedLane);
        // console.log('íŠ¸ë™ ì‹œê°í™” ì™„ë£Œ'); // Production: removed
      } catch (error) {
        console.error('íŠ¸ë™ ì‹œê°í™” ì—ëŸ¬:', error);
      }
      
      // í…Œì´ë¸” ì—…ë°ì´íŠ¸
      try {
        updateLaneTable(lanes, targetTime);
        // console.log('í…Œì´ë¸” ì—…ë°ì´íŠ¸ ì™„ë£Œ'); // Production: removed
        console.log('í…Œì´ë¸” tbody ìƒíƒœ:', document.getElementById('laneTimeTable')?.rows.length, 'ê°œ í–‰');
      } catch (error) {
        console.error('í…Œì´ë¸” ì—…ë°ì´íŠ¸ ì—ëŸ¬:', error);
      }
    }
    
    function drawTrackLanes(lanes, selectedLane) {
      const svg = document.getElementById('laneTrackLanes');
      if (!svg) return;
      
      svg.innerHTML = '';
      
      // ì‹¤ì œ íŠ¸ë™ ë¹„ìœ¨ì— ë§ê²Œ ì¡°ì •
      // ì§ì„ : 84.39m, ë°˜ê²½: 36.5m ë¹„ìœ¨ ìœ ì§€
      const scaleFactor = 2.5; // ì „ì²´ í¬ê¸° ì¡°ì •
      const straightLength = 84.39 * scaleFactor; // ì•½ 210px
      const centerX = 400;
      const centerY = 200; // SVG viewBoxì— ë§ê²Œ ì¡°ì •
      
      // ë ˆì¸ ê·¸ë¦¬ê¸°
      lanes.forEach(lane => {
        const radius = lane.radius * scaleFactor;
        
        // ì‹¤ì œ íŠ¸ë™ í˜•íƒœë¡œ ê·¸ë¦¬ê¸°
        // ì™¼ìª½ ë°˜ì› ì¤‘ì‹¬ì 
        const leftCenterX = centerX - straightLength / 2;
        // ì˜¤ë¥¸ìª½ ë°˜ì› ì¤‘ì‹¬ì   
        const rightCenterX = centerX + straightLength / 2;
        
        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        const d = `
          M ${leftCenterX} ${centerY - radius}
          L ${rightCenterX} ${centerY - radius}
          A ${radius} ${radius} 0 0 1 ${rightCenterX} ${centerY + radius}
          L ${leftCenterX} ${centerY + radius}
          A ${radius} ${radius} 0 0 1 ${leftCenterX} ${centerY - radius}
        `;
        
        path.setAttribute('d', d);
        path.setAttribute('class', `lane-${lane.lane} ${lane.isSelected ? 'lane-selected' : 'lane-unselected'}`);
        path.setAttribute('stroke-width', lane.isSelected ? '3' : '1.5');
        svg.appendChild(path);
        
        // ì„ íƒëœ ë ˆì¸ì— ì‹œê°„ í‘œì‹œ
        if (lane.isSelected) {
          // ìƒìœ„ ìŠ¤ì½”í”„ì˜ ë³€ìˆ˜ ì¬ì‚¬ìš©
          const leftCenterX = centerX - straightLength / 2;
          const rightCenterX = centerX + straightLength / 2;
          
          // ì§ì„ 1 (ë°±ìŠ¤íŠ¸ë ˆì¹˜ - ìƒë‹¨)
          const text1 = document.createElementNS('http://www.w3.org/2000/svg', 'text');
          text1.setAttribute('x', centerX);
          text1.setAttribute('y', centerY - radius - 10);
          text1.setAttribute('text-anchor', 'middle');
          text1.setAttribute('class', 'track-time-text');
          text1.setAttribute('fill', '#3b82f6');
          text1.textContent = `${lane.sectionTimes.straight1.toFixed(2)}ì´ˆ`;
          svg.appendChild(text1);
          
          // ê³¡ì„ 1 (ì™¼ìª½)
          const text2 = document.createElementNS('http://www.w3.org/2000/svg', 'text');
          text2.setAttribute('x', leftCenterX - radius - 15);
          text2.setAttribute('y', centerY);
          text2.setAttribute('text-anchor', 'middle');
          text2.setAttribute('class', 'track-time-text');
          text2.setAttribute('fill', '#ef4444');
          text2.textContent = `${lane.sectionTimes.curve1.toFixed(2)}ì´ˆ`;
          svg.appendChild(text2);
          
          // ì§ì„ 2 (í™ˆìŠ¤íŠ¸ë ˆì¹˜ - í•˜ë‹¨)
          const text3 = document.createElementNS('http://www.w3.org/2000/svg', 'text');
          text3.setAttribute('x', centerX);
          text3.setAttribute('y', centerY + radius + 25);
          text3.setAttribute('text-anchor', 'middle');
          text3.setAttribute('class', 'track-time-text');
          text3.setAttribute('fill', '#3b82f6');
          text3.textContent = `${lane.sectionTimes.straight2.toFixed(2)}ì´ˆ`;
          svg.appendChild(text3);
          
          // ê³¡ì„ 2 (ì˜¤ë¥¸ìª½)
          const text4 = document.createElementNS('http://www.w3.org/2000/svg', 'text');
          text4.setAttribute('x', rightCenterX + radius + 15);
          text4.setAttribute('y', centerY);
          text4.setAttribute('text-anchor', 'middle');
          text4.setAttribute('class', 'track-time-text');
          text4.setAttribute('fill', '#ef4444');
          text4.textContent = `${lane.sectionTimes.curve2.toFixed(2)}ì´ˆ`;
          svg.appendChild(text4);
        }
      });
    }
    
    function updateLaneTable(lanes, targetTime) {
      const tbody = document.getElementById('laneTimeTable');
      console.log('updateLaneTable í˜¸ì¶œë¨, tbody ì¡´ì¬:', !!tbody);
      
      if (!tbody) {
        console.error('laneTimeTable tbodyë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ!');
        return;
      }
      
      tbody.innerHTML = '';
      // console.log('tbody ì´ˆê¸°í™” ì™„ë£Œ'); // Production: removed
      
      // ì„ íƒëœ ë ˆì¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      const selectedLaneData = lanes.find(l => l.isSelected);
      const selectedSpeed = selectedLaneData ? selectedLaneData.speedKMH : 0;
      
      lanes.forEach((lane, index) => {
        // console.log(`ë ˆì¸ ${lane.lane} í–‰ ì¶”ê°€ ì¤‘...`); // Production: removed
        const row = tbody.insertRow();
        if (lane.isSelected) {
          row.className = 'bg-purple-100 font-semibold';
        } else if (Math.abs(lane.distance - 400) < 0.1) {
          row.className = 'bg-green-50'; // ë ˆì¸ 1 í•˜ì´ë¼ì´íŠ¸
        }
        
        // ë™ì¼ ì†ë„ë¡œ ë‹¬ë ¸ì„ ë•Œ 1ë ˆì¸ê³¼ì˜ ì‹œê°„ ì°¨ì´
        const timeDiff = lane.lane === 1 ? 0 : lane.adjustedTime - lanes[0].adjustedTime;
        const timeDiffStr = timeDiff > 0 ? `+${timeDiff.toFixed(2)}` : timeDiff.toFixed(2);
        
        row.innerHTML = `
          <td class="font-bold ${lane.isSelected ? 'text-purple-700' : ''}">${lane.lane}${lane.isSelected ? ' âœ“' : ''}</td>
          <td>${lane.distance.toFixed(2)}m</td>
          <td>${lane.stagger > 0 ? '+' + lane.stagger.toFixed(2) : lane.stagger.toFixed(2)}m</td>
          <td class="font-bold ${lane.isSelected ? 'text-purple-700' : ''}">${lane.adjustedTime.toFixed(2)}ì´ˆ</td>
          <td class="text-xs">${timeDiff === 0 ? '-' : timeDiffStr}</td>
          <td class="text-blue-600">${lane.sectionTimes.straight1.toFixed(2)}</td>
          <td class="text-red-600">${lane.sectionTimes.curve1.toFixed(2)}</td>
          <td class="text-blue-600">${lane.sectionTimes.straight2.toFixed(2)}</td>
          <td class="text-red-600">${lane.sectionTimes.curve2.toFixed(2)}</td>
        `;
      });
      
      // console.log(`í…Œì´ë¸” ì—…ë°ì´íŠ¸ ì™„ë£Œ: ${tbody.rows.length}ê°œ í–‰ ì¶”ê°€ë¨`); // Production: removed
      
      // ì¶”ê°€ ì •ë³´ í‘œì‹œ
      if (selectedLaneData) {
        const infoDiv = document.getElementById('laneAdditionalInfo');
        if (infoDiv) {
          infoDiv.innerHTML = `
            <div class="bg-purple-50 p-4 rounded-lg mt-4">
              <h4 class="font-bold text-lg mb-2">ğŸ“Š ì„ íƒí•œ ë ˆì¸ ë¶„ì„</h4>
              <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                <div class="bg-white p-3 rounded">
                  <div class="text-xs text-gray-600">í‰ê·  ì†ë„</div>
                  <div class="text-xl font-bold text-purple-700">${selectedSpeed.toFixed(2)} km/h</div>
                </div>
                <div class="bg-white p-3 rounded">
                  <div class="text-xs text-gray-600">kmë‹¹ í˜ì´ìŠ¤</div>
                  <div class="text-xl font-bold text-purple-700">${formatPace(selectedLaneData.pacePerKm)}</div>
                </div>
                <div class="bg-white p-3 rounded">
                  <div class="text-xs text-gray-600">400m í™˜ì‚°</div>
                  <div class="text-xl font-bold text-purple-700">${(400 / selectedLaneData.speedInSelectedLane).toFixed(2)}ì´ˆ</div>
                </div>
                <div class="bg-white p-3 rounded">
                  <div class="text-xs text-gray-600">100m í‰ê· </div>
                  <div class="text-xl font-bold text-purple-700">${(targetTime / (selectedLaneData.distance / 100)).toFixed(2)}ì´ˆ</div>
                </div>
              </div>
            </div>
          `;
        }
        
        // í›ˆë ¨ í˜ì´ìŠ¤ ê°€ì´ë“œ ìƒì„±
        const guideDiv = document.getElementById('trainingPaceGuide');
        if (guideDiv && selectedLaneData) {
          const lane1Time = 400 / selectedLaneData.speedInSelectedLane;
          const paces = [
            { name: 'ì´ì§€ í˜ì´ìŠ¤ (60-70%)', time: lane1Time * 1.43, desc: 'íšŒë³µ/ì¤€ë¹„ìš´ë™' },
            { name: 'í…œí¬ í˜ì´ìŠ¤ (80-85%)', time: lane1Time * 1.18, desc: 'ìœ ì‚°ì†Œ ëŠ¥ë ¥ í–¥ìƒ' },
            { name: 'ì—­ì¹˜ í˜ì´ìŠ¤ (85-90%)', time: lane1Time * 1.11, desc: 'ì –ì‚° ì—­ì¹˜ ê°œì„ ' },
            { name: 'ì¸í„°ë²Œ í˜ì´ìŠ¤ (95%)', time: lane1Time * 1.05, desc: 'ìŠ¤í”¼ë“œ í–¥ìƒ' },
            { name: 'ëª©í‘œ í˜ì´ìŠ¤ (100%)', time: lane1Time, desc: 'ë ˆì´ìŠ¤ í˜ì´ìŠ¤' }
          ];
          
          let html = '<div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">';
          paces.forEach(pace => {
            html += `
              <div class="flex justify-between items-center bg-white p-2 rounded">
                <div>
                  <div class="font-semibold">${pace.name}</div>
                  <div class="text-xs text-gray-600">${pace.desc}</div>
                </div>
                <div class="text-lg font-bold text-green-700">${pace.time.toFixed(1)}ì´ˆ</div>
              </div>
            `;
          });
          html += '</div>';
          guideDiv.innerHTML = html;
        }
        
        // ê±°ë¦¬ë³„ ì˜ˆìƒ ê¸°ë¡
        const predictDiv = document.getElementById('distancePredictions');
        if (predictDiv && selectedLaneData) {
          const speed = selectedLaneData.speedInSelectedLane;
          const predictions = [
            { dist: '100m', time: 100 / speed },
            { dist: '200m', time: 200 / speed },
            { dist: '800m', time: 800 / speed },
            { dist: '1500m', time: 1500 / speed },
            { dist: '3000m', time: 3000 / speed },
            { dist: '5000m', time: 5000 / speed },
            { dist: '10km', time: 10000 / speed }
          ];
          
          let html = '<div class="grid grid-cols-4 md:grid-cols-7 gap-2">';
          predictions.forEach(pred => {
            html += `
              <div class="text-center bg-white p-2 rounded">
                <div class="text-xs text-gray-600">${pred.dist}</div>
                <div class="font-bold text-yellow-700">${formatTime(pred.time)}</div>
              </div>
            `;
          });
          html += '</div>';
          predictDiv.innerHTML = html;
        }
        
        // 200m ìŠ¤í”Œë¦¿ íƒ€ì„
        const splitDiv = document.getElementById('splitTimes');
        if (splitDiv && selectedLaneData) {
          const laneDistance = selectedLaneData.distance;
          const speed = selectedLaneData.speedInSelectedLane;
          
          // ì„ íƒí•œ ë ˆì¸ì—ì„œì˜ 200m ì§€ì  ê³„ì‚°
          let splits = [];
          if (laneDistance >= 200) {
            splits.push({ lap: '0-200m', time: 200 / speed, desc: 'ì²« 200m' });
          }
          if (laneDistance >= 400) {
            splits.push({ lap: '200-400m', time: 200 / speed, desc: 'ë‘ë²ˆì§¸ 200m' });
          }
          
          // ì—¬ëŸ¬ ë°”í€´ì˜ ê²½ìš°
          const laps = [800, 1200, 1600];
          laps.forEach((dist, idx) => {
            if (targetTime > 120) { // 2ë¶„ ì´ìƒì¸ ê²½ìš° ì—¬ëŸ¬ ë°”í€´ ê°€ëŠ¥ì„±
              const lapTime = laneDistance / speed;
              splits.push({ 
                lap: `${dist-laneDistance}-${dist}m`, 
                time: lapTime / 2, 
                desc: `${idx+2}ë²ˆì§¸ ë© ì „ë°˜` 
              });
            }
          });
          
          let html = '<div class="grid grid-cols-2 md:grid-cols-3 gap-2">';
          splits.slice(0, 6).forEach(split => {
            html += `
              <div class="bg-white p-2 rounded">
                <div class="text-xs text-gray-600">${split.lap}</div>
                <div class="font-bold text-indigo-700">${split.time.toFixed(2)}ì´ˆ</div>
                <div class="text-xs text-gray-500">${split.desc}</div>
              </div>
            `;
          });
          html += '</div>';
          splitDiv.innerHTML = html;
        }
      }
    }

    // ì°¨íŠ¸ 1: KM í˜ì´ìŠ¤ë³„ ê±°ë¦¬ í™˜ì‚°í‘œ
    function generatePaceChart1() {
      const tbody = document.getElementById('paceChartBody1');
      tbody.innerHTML = '';
      
      // km í˜ì´ìŠ¤ ëª©ë¡ (2:30ë¶€í„° 8:00ê¹Œì§€ 10ì´ˆ ê°„ê²©)
      const paces = [];
      for (let seconds = 150; seconds <= 480; seconds += 10) {
        paces.push(seconds);
      }
      
      paces.forEach((pacePerKm, index) => {
        const row = tbody.insertRow();
        
        // ì£¼ìš” í˜ì´ìŠ¤ í•˜ì´ë¼ì´íŠ¸
        if (pacePerKm === 180 || pacePerKm === 240 || pacePerKm === 300 || pacePerKm === 360 || pacePerKm === 420) {
          row.className = 'highlight-row';
        } else if (pacePerKm === 210 || pacePerKm === 270 || pacePerKm === 330 || pacePerKm === 390 || pacePerKm === 450) {
          row.className = 'sub-highlight';
        }
        
        // km í˜ì´ìŠ¤ (ì²« ë²ˆì§¸ ì—´)
        let cell = row.insertCell();
        cell.textContent = formatPace(pacePerKm);
        cell.className = 'pace-header font-bold';
        
        // ê° ê±°ë¦¬ë³„ ì‹œê°„ ê³„ì‚°
        const distances = [100, 200, 400, 800, 1000, 3000, 5000, 10000, 15000, 21097.5, 30000, 42195];
        distances.forEach((distance, i) => {
          const time = (pacePerKm / 1000) * distance;
          cell = row.insertCell();
          cell.textContent = formatTime(time);
          
          // ì£¼ìš” ê±°ë¦¬ ì»¬ëŸ¼ ìƒ‰ìƒ
          if (i === 6) cell.className = 'bg-yellow-50'; // 5km
          if (i === 7) cell.className = 'bg-green-50';  // 10km
          if (i === 9) cell.className = 'bg-blue-50';   // í•˜í”„
          if (i === 11) cell.className = 'bg-purple-50'; // í’€
        });
      });
    }

    // ì°¨íŠ¸ 2: ëª©í‘œ ê¸°ë¡ë³„ í…Œì´ë¸”ë“¤
    function generateTargetTables() {
      // 5km ëª©í‘œ ê¸°ë¡
      const targets5km = [
        { time: 13 * 60, label: 'ì„¸ê³„ ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 14 * 60, label: 'êµ­ê°€ëŒ€í‘œ' },
        { time: 15 * 60, label: 'ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 16 * 60, label: 'ì¤€ì—˜ë¦¬íŠ¸' },
        { time: 17 * 60, label: 'ìµœìƒê¸‰' },
        { time: 18 * 60, label: 'ìƒê¸‰' },
        { time: 19 * 60, label: 'ì¤‘ìƒê¸‰' },
        { time: 20 * 60, label: 'ì„œë¸Œ 20', highlight: true },
        { time: 22 * 60, label: 'ì¤‘ê¸‰' },
        { time: 25 * 60, label: 'ì´ˆì¤‘ê¸‰', highlight: true },
        { time: 28 * 60, label: 'ì´ˆê¸‰' },
        { time: 30 * 60, label: 'ì…ë¬¸', highlight: true },
        { time: 35 * 60, label: 'ì™„ì£¼ ëª©í‘œ' },
        { time: 40 * 60, label: 'ê±´ê°• ì¡°ê¹…', highlight: true }
      ];
      
      const tbody5km = document.getElementById('target5kmTable');
      tbody5km.innerHTML = '';
      
      targets5km.forEach(target => {
        const row = tbody5km.insertRow();
        if (target.highlight) row.className = 'highlight-row';
        
        const pacePerKm = target.time / 5;
        const pace400m = pacePerKm * 0.4;
        const pace100m = pacePerKm * 0.1;
        const speed = 5000 / target.time * 3.6;
        
        row.innerHTML = `
          <td class="font-bold">${formatTime(target.time)}</td>
          <td>${formatPace(pacePerKm)}</td>
          <td>${formatTime(pace400m)}</td>
          <td>${formatTime(pace100m)}</td>
          <td>${speed.toFixed(1)}</td>
          <td class="text-xs">${target.label}</td>
        `;
      });
      
      // 10km ëª©í‘œ ê¸°ë¡
      const targets10km = [
        { time: 27 * 60, label: 'ì„¸ê³„ ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 29 * 60, label: 'êµ­ê°€ëŒ€í‘œ' },
        { time: 31 * 60, label: 'ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 33 * 60, label: 'ì¤€ì—˜ë¦¬íŠ¸' },
        { time: 35 * 60, label: 'ìƒê¸‰' },
        { time: 38 * 60, label: 'ì¤‘ìƒê¸‰' },
        { time: 40 * 60, label: 'ì„œë¸Œ 40', highlight: true },
        { time: 45 * 60, label: 'ì¤‘ê¸‰' },
        { time: 50 * 60, label: 'ì„œë¸Œ 50', highlight: true },
        { time: 55 * 60, label: 'ì´ˆê¸‰' },
        { time: 60 * 60, label: 'ì„œë¸Œ 1ì‹œê°„', highlight: true },
        { time: 70 * 60, label: 'ì™„ì£¼ ëª©í‘œ' },
        { time: 80 * 60, label: 'ê±´ê°• ì¡°ê¹…', highlight: true }
      ];
      
      const tbody10km = document.getElementById('target10kmTable');
      tbody10km.innerHTML = '';
      
      targets10km.forEach(target => {
        const row = tbody10km.insertRow();
        if (target.highlight) row.className = 'highlight-row';
        
        const pacePerKm = target.time / 10;
        const pace400m = pacePerKm * 0.4;
        const time5km = target.time / 2;
        const speed = 10000 / target.time * 3.6;
        
        row.innerHTML = `
          <td class="font-bold">${formatTime(target.time)}</td>
          <td>${formatPace(pacePerKm)}</td>
          <td>${formatTime(pace400m)}</td>
          <td>${formatTime(time5km)}</td>
          <td>${speed.toFixed(1)}</td>
          <td class="text-xs">${target.label}</td>
        `;
      });
      
      // í•˜í”„ë§ˆë¼í†¤ ëª©í‘œ ê¸°ë¡
      const targetsHalf = [
        { time: 60 * 60, label: 'ì„¸ê³„ ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 65 * 60, label: 'êµ­ê°€ëŒ€í‘œ' },
        { time: 70 * 60, label: 'ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 75 * 60, label: 'ì¤€ì—˜ë¦¬íŠ¸' },
        { time: 80 * 60, label: 'ìƒê¸‰' },
        { time: 85 * 60, label: 'ì¤‘ìƒê¸‰' },
        { time: 90 * 60, label: 'ì„œë¸Œ 1:30', highlight: true },
        { time: 100 * 60, label: 'ì¤‘ê¸‰' },
        { time: 110 * 60, label: 'ì´ˆì¤‘ê¸‰', highlight: true },
        { time: 120 * 60, label: 'ì„œë¸Œ 2:00', highlight: true },
        { time: 130 * 60, label: 'ì´ˆê¸‰' },
        { time: 140 * 60, label: 'ì…ë¬¸' },
        { time: 150 * 60, label: 'ì„œë¸Œ 2:30', highlight: true },
        { time: 160 * 60, label: 'ì™„ì£¼ ëª©í‘œ' },
        { time: 180 * 60, label: 'ê±´ê°• ì¡°ê¹…', highlight: true }
      ];
      
      const tbodyHalf = document.getElementById('targetHalfTable');
      tbodyHalf.innerHTML = '';
      
      targetsHalf.forEach(target => {
        const row = tbodyHalf.insertRow();
        if (target.highlight) row.className = 'highlight-row';
        
        const pacePerKm = target.time / 21.0975;
        const pace400m = pacePerKm * 0.4;
        const time5km = pacePerKm * 5;
        const time10km = pacePerKm * 10;
        const speed = 21097.5 / target.time * 3.6;
        
        row.innerHTML = `
          <td class="font-bold">${formatTime(target.time)}</td>
          <td>${formatPace(pacePerKm)}</td>
          <td>${formatTime(pace400m)}</td>
          <td>${formatTime(time5km)}</td>
          <td>${formatTime(time10km)}</td>
          <td>${speed.toFixed(1)}</td>
          <td class="text-xs">${target.label}</td>
        `;
      });
      
      // í’€ë§ˆë¼í†¤ ëª©í‘œ ê¸°ë¡
      const targetsFull = [
        { time: 125 * 60, label: 'ì„¸ê³„ ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 135 * 60, label: 'êµ­ê°€ëŒ€í‘œ' },
        { time: 150 * 60, label: 'ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 165 * 60, label: 'ì¤€ì—˜ë¦¬íŠ¸' },
        { time: 180 * 60, label: 'ì„œë¸Œ 3', highlight: true },
        { time: 195 * 60, label: 'ì¤‘ìƒê¸‰' },
        { time: 210 * 60, label: 'ì„œë¸Œ 3:30', highlight: true },
        { time: 225 * 60, label: 'ì¤‘ê¸‰' },
        { time: 240 * 60, label: 'ì„œë¸Œ 4', highlight: true },
        { time: 255 * 60, label: 'ì´ˆì¤‘ê¸‰' },
        { time: 270 * 60, label: 'ì„œë¸Œ 4:30', highlight: true },
        { time: 285 * 60, label: 'ì´ˆê¸‰' },
        { time: 300 * 60, label: 'ì„œë¸Œ 5', highlight: true },
        { time: 330 * 60, label: 'ì„œë¸Œ 5:30' },
        { time: 360 * 60, label: 'ì„œë¸Œ 6', highlight: true },
        { time: 390 * 60, label: 'ì™„ì£¼ ëª©í‘œ' },
        { time: 420 * 60, label: 'ê±´ê°• ì™„ì£¼', highlight: true }
      ];
      
      const tbodyFull = document.getElementById('targetFullTable');
      tbodyFull.innerHTML = '';
      
      targetsFull.forEach(target => {
        const row = tbodyFull.insertRow();
        if (target.highlight) row.className = 'highlight-row';
        
        const pacePerKm = target.time / 42.195;
        const pace400m = pacePerKm * 0.4;
        const time10km = pacePerKm * 10;
        const timeHalf = pacePerKm * 21.0975;
        const time30km = pacePerKm * 30;
        const speed = 42195 / target.time * 3.6;
        
        row.innerHTML = `
          <td class="font-bold">${formatTime(target.time, true)}</td>
          <td>${formatPace(pacePerKm)}</td>
          <td>${formatTime(pace400m)}</td>
          <td>${formatTime(time10km)}</td>
          <td>${formatTime(timeHalf)}</td>
          <td>${formatTime(time30km)}</td>
          <td>${speed.toFixed(1)}</td>
          <td class="text-xs">${target.label}</td>
        `;
      });
    }

    // ì°¨íŠ¸ 3: ë ˆì¸ë³„ ë³´ì • ì‹œê°„
    function generateLaneChart() {
      const tbody = document.getElementById('laneChartTable');
      tbody.innerHTML = '';
      
      // km í˜ì´ìŠ¤ ëª©ë¡ (2:30ë¶€í„° 6:00ê¹Œì§€ 10ì´ˆ ê°„ê²©)
      const paces = [];
      for (let seconds = 150; seconds <= 360; seconds += 10) {
        paces.push(seconds);
      }
      
      paces.forEach((pacePerKm) => {
        const row = tbody.insertRow();
        
        // ì£¼ìš” í˜ì´ìŠ¤ í•˜ì´ë¼ì´íŠ¸
        if (pacePerKm === 180 || pacePerKm === 240 || pacePerKm === 300 || pacePerKm === 360) {
          row.className = 'highlight-row';
        }
        
        // km í˜ì´ìŠ¤
        let cell = row.insertCell();
        cell.textContent = formatPace(pacePerKm);
        cell.className = 'font-bold';
        
        // 1ë ˆì¸ 400m ì‹œê°„
        const time400 = pacePerKm * 0.4;
        cell = row.insertCell();
        cell.textContent = formatTime(time400);
        cell.className = 'font-bold bg-yellow-50';
        
        // 2-8ë ˆì¸ ë³´ì • ì‹œê°„
        for (let lane = 2; lane <= 8; lane++) {
          const laneTime = (pacePerKm / 1000) * laneDistances[lane];
          cell = row.insertCell();
          cell.textContent = formatTime(laneTime);
        }
      });
    }

    // ì°¨íŠ¸ 4: 3000m ì¥ì• ë¬¼ í˜ì´ìŠ¤ ê³„ì‚°
    function generateSteeplechaseChart() {
      const tbodyInside = document.getElementById('steeplechaseInsideTable');
      const tbodyOutside = document.getElementById('steeplechaseOutsideTable');
      
      if (!tbodyInside || !tbodyOutside) return;
      
      tbodyInside.innerHTML = '';
      tbodyOutside.innerHTML = '';
      
      // 3000m ì¥ì• ë¬¼ ëª©í‘œ ê¸°ë¡ë“¤ (7ë¶„ë¶€í„° 13ë¶„ê¹Œì§€)
      const targetTimes = [
        { time: 7 * 60 + 30, label: 'ì„¸ê³„ ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 8 * 60, label: 'êµ­ê°€ëŒ€í‘œê¸‰' },
        { time: 8 * 60 + 30, label: 'ì—˜ë¦¬íŠ¸', highlight: true },
        { time: 9 * 60, label: 'ì¤€ì—˜ë¦¬íŠ¸' },
        { time: 9 * 60 + 30, label: 'ìƒê¸‰', highlight: true },
        { time: 10 * 60, label: 'ì„œë¸Œ 10' },
        { time: 10 * 60 + 30, label: 'ì¤‘ìƒê¸‰', highlight: true },
        { time: 11 * 60, label: 'ì¤‘ê¸‰' },
        { time: 11 * 60 + 30, label: 'ì´ˆì¤‘ê¸‰', highlight: true },
        { time: 12 * 60, label: 'ì´ˆê¸‰' },
        { time: 12 * 60 + 30, label: 'ì…ë¬¸' },
        { time: 13 * 60, label: 'ì™„ì£¼ ëª©í‘œ', highlight: true }
      ];
      
      // ì¥ì• ë¬¼ êµ¬ì„±ë³„ ê±°ë¦¬ ì •ì˜
      const insideConfig = {
        lapDistance: 396.084,  // ë‚´ì¸¡ ë¬¼ì¥ì• ë¬¼ ì‹œ ë© ê±°ë¦¬
        startSection: 227.412,  // ì‹œì‘ êµ¬ê°„ ê±°ë¦¬ (3000 - 7ë©)
        totalLapDistance: 2772.588  // 7ë© ì´ ê±°ë¦¬
      };
      
      const outsideConfig = {
        lapDistance: 419.407,  // ì™¸ì¸¡ ë¬¼ì¥ì• ë¬¼ ì‹œ ë© ê±°ë¦¬
        startSection: 64.151,  // ì‹œì‘ êµ¬ê°„ ê±°ë¦¬ (3000 - 7ë©)
        totalLapDistance: 2935.849  // 7ë© ì´ ê±°ë¦¬
      };
      
      targetTimes.forEach(target => {
        // ê¸°ë³¸ í˜ì´ìŠ¤ ê³„ì‚°
        const pacePerKm = target.time / 3;
        
        // ë‚´ì¸¡ í…Œì´ë¸” í–‰ ì¶”ê°€
        const rowInside = tbodyInside.insertRow();
        if (target.highlight) rowInside.className = 'bg-blue-50';
        
        // ë‚´ì¸¡ êµ¬ì„± ê³„ì‚°
        const insideStartTime = (target.time / 3000) * insideConfig.startSection;
        const insideLapTime = (target.time / 3000) * insideConfig.lapDistance;
        const inside3Laps = insideStartTime + (insideLapTime * 3);
        const inside5Laps = insideStartTime + (insideLapTime * 5);
        
        rowInside.innerHTML = `
          <td class="font-bold text-blue-700">${formatTime(target.time)}</td>
          <td>${formatPace(pacePerKm)}</td>
          <td>${formatTime(insideStartTime)}</td>
          <td>${formatTime(insideLapTime)}</td>
          <td>${formatTime(inside3Laps)}</td>
          <td>${formatTime(inside5Laps)}</td>
          <td class="font-bold bg-blue-200">${formatTime(target.time)}</td>
        `;
        
        // ì™¸ì¸¡ í…Œì´ë¸” í–‰ ì¶”ê°€
        const rowOutside = tbodyOutside.insertRow();
        if (target.highlight) rowOutside.className = 'bg-purple-50';
        
        // ì™¸ì¸¡ êµ¬ì„± ê³„ì‚°
        const outsideStartTime = (target.time / 3000) * outsideConfig.startSection;
        const outsideLapTime = (target.time / 3000) * outsideConfig.lapDistance;
        const outside3Laps = outsideStartTime + (outsideLapTime * 3);
        const outside5Laps = outsideStartTime + (outsideLapTime * 5);
        
        rowOutside.innerHTML = `
          <td class="font-bold text-purple-700">${formatTime(target.time)}</td>
          <td>${formatPace(pacePerKm)}</td>
          <td>${formatTime(outsideStartTime)}</td>
          <td>${formatTime(outsideLapTime)}</td>
          <td>${formatTime(outside3Laps)}</td>
          <td>${formatTime(outside5Laps)}</td>
          <td class="font-bold bg-purple-200">${formatTime(target.time)}</td>
        `;
      });
    }

    // ë ˆì¸ ê³„ì‚° ê¸°ëŠ¥ì€ track-lane-simple.htmlë¡œ ì´ë™
    // calculateLane() ë° generateAllLanesTable() í•¨ìˆ˜ ì œê±°

    // ëª©í‘œ ê±°ë¦¬ ì„ íƒ ë³€ê²½
    document.getElementById('targetDistance').addEventListener('change', function() {
      const customInput = document.getElementById('customDistance');
      if (this.value === 'custom') {
        customInput.classList.remove('hidden');
      } else {
        customInput.classList.add('hidden');
      }
    });

    // ëª©í‘œ í˜ì´ìŠ¤ ê³„ì‚°
    function calculateTargetPace() {
      const distanceSelect = document.getElementById('targetDistance');
      let distance = parseFloat(distanceSelect.value);
      
      if (distanceSelect.value === 'custom') {
        distance = parseFloat(document.getElementById('customDistance').value);
      }
      
      const hours = parseInt(document.getElementById('targetHours').value) || 0;
      const minutes = parseInt(document.getElementById('targetMinutes').value) || 0;
      const seconds = parseFloat(document.getElementById('targetSeconds').value) || 0;
      
      if (!distance || (hours === 0 && minutes === 0 && seconds === 0)) {
        alert('ê±°ë¦¬ì™€ ì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      const totalSeconds = hours * 3600 + minutes * 60 + seconds;
      
      // í˜ì´ìŠ¤ ê³„ì‚°
      const pace400 = (totalSeconds / distance) * 400;
      const pace100 = (totalSeconds / distance) * 100;
      const pace1km = (totalSeconds / distance) * 1000;
      const speedKmh = (distance / totalSeconds) * 3.6;
      
      // ê²°ê³¼ í‘œì‹œ
      document.getElementById('lap400').textContent = formatTime(pace400);
      document.getElementById('pace100m').textContent = formatTime(pace100);
      document.getElementById('pace1km').textContent = formatTime(pace1km);
      document.getElementById('avgSpeed').textContent = speedKmh.toFixed(2) + ' km/h';
      
      // ë© ìŠ¤í”Œë¦¿ ê³„ì‚°
      const lapSplits = document.getElementById('lapSplits');
      lapSplits.innerHTML = '';
      
      const laps = [
        { dist: 400, name: '400m (1ë°”í€´)' },
        { dist: 800, name: '800m (2ë°”í€´)' },
        { dist: 1200, name: '1200m (3ë°”í€´)' },
        { dist: 1600, name: '1600m (4ë°”í€´)' },
        { dist: 2000, name: '2000m (5ë°”í€´)' },
        { dist: 3000, name: '3000m (7.5ë°”í€´)' },
        { dist: 5000, name: '5000m (12.5ë°”í€´)' }
      ];
      
      laps.forEach(lap => {
        if (lap.dist <= distance) {
          const lapTime = (totalSeconds / distance) * lap.dist;
          lapSplits.innerHTML += `
            <div class="flex justify-between">
              <span>${lap.name}</span>
              <span class="font-mono font-bold">${formatTime(lapTime)}</span>
            </div>
          `;
        }
      });
      
      document.getElementById('targetResults').classList.remove('hidden');
      
      // ì±„íŒ…ì— í™œë™ ê³µìœ 
      const distanceText = distanceSelect.value === 'custom' ? 
        `${distance}m` : distanceSelect.options[distanceSelect.selectedIndex].text;
      shareToChat('pace_calculated', {
        distance: distanceText,
        pace: formatTime(pace1km) + '/km',
        time: formatTime(totalSeconds)
      });
    }

    // ìŠ¤í”Œë¦¿ ê³„ì‚°
    function calculateSplits() {
      const totalDistance = parseFloat(document.getElementById('splitTotalDistance').value);
      const interval = parseFloat(document.getElementById('splitInterval').value);
      const strategy = document.getElementById('paceStrategy').value;
      
      const hours = parseInt(document.getElementById('splitHours').value) || 0;
      const minutes = parseInt(document.getElementById('splitMinutes').value) || 0;
      const seconds = parseFloat(document.getElementById('splitSeconds').value) || 0;
      
      if (!totalDistance || !interval || (hours === 0 && minutes === 0 && seconds === 0)) return;
      
      const totalSeconds = hours * 3600 + minutes * 60 + seconds;
      const numSplits = Math.ceil(totalDistance / interval);
      
      const splitTable = document.getElementById('splitTable');
      splitTable.innerHTML = '';
      
      const table = document.createElement('table');
      table.className = 'w-full text-sm';
      table.innerHTML = `
        <thead class="bg-gray-100">
          <tr>
            <th class="p-2 text-left">êµ¬ê°„</th>
            <th class="p-2">ê±°ë¦¬</th>
            <th class="p-2">êµ¬ê°„ ì‹œê°„</th>
            <th class="p-2">ëˆ„ì  ì‹œê°„</th>
            <th class="p-2">í˜ì´ìŠ¤ (min/km)</th>
          </tr>
        </thead>
        <tbody id="splitTableBody"></tbody>
      `;
      
      const tbody = table.querySelector('tbody');
      let cumulativeTime = 0;
      
      for (let i = 0; i < numSplits; i++) {
        const startDist = i * interval;
        const endDist = Math.min((i + 1) * interval, totalDistance);
        const segmentDist = endDist - startDist;
        
        let segmentTime;
        
        switch (strategy) {
          case 'even':
            segmentTime = (totalSeconds / totalDistance) * segmentDist;
            break;
          case 'negative':
            // í›„ë°˜ë¶€ë¡œ ê°ˆìˆ˜ë¡ ë¹¨ë¼ì§ (ì²˜ìŒ 105% -> ë§ˆì§€ë§‰ 95%)
            const factor = 1.05 - (0.1 * i / (numSplits - 1));
            segmentTime = (totalSeconds / totalDistance) * segmentDist * factor;
            break;
          case 'positive':
            // ì „ë°˜ë¶€ ë¹ ë¦„ (ì²˜ìŒ 95% -> ë§ˆì§€ë§‰ 105%)
            const posFactor = 0.95 + (0.1 * i / (numSplits - 1));
            segmentTime = (totalSeconds / totalDistance) * segmentDist * posFactor;
            break;
          default:
            segmentTime = (totalSeconds / totalDistance) * segmentDist;
        }
        
        cumulativeTime += segmentTime;
        const pacePerKm = (segmentTime / segmentDist) * 1000 / 60;
        
        const row = tbody.insertRow();
        row.innerHTML = `
          <td class="p-2 font-medium">${i + 1}êµ¬ê°„</td>
          <td class="p-2">${startDist}-${endDist}m</td>
          <td class="p-2 font-mono">${formatTime(segmentTime)}</td>
          <td class="p-2 font-mono font-bold">${formatTime(cumulativeTime)}</td>
          <td class="p-2">${Math.floor(pacePerKm)}:${String(Math.floor((pacePerKm % 1) * 60)).padStart(2, '0')}</td>
        `;
      }
      
      splitTable.appendChild(table);
      document.getElementById('splitResults').classList.remove('hidden');
    }

    // ì œê±°ë¨: í›ˆë ¨ í˜ì´ìŠ¤ëŠ” ë³„ë„ í˜ì´ì§€ë¡œ ì´ë™
    /*
    function calculateTrainingPaces() {
      const baseDistance = parseFloat(document.getElementById('baseDistance').value);
      const hours = parseInt(document.getElementById('baseHours').value) || 0;
      const minutes = parseInt(document.getElementById('baseMinutes').value) || 0;
      const seconds = parseFloat(document.getElementById('baseSeconds').value) || 0;
      
      const totalSeconds = hours * 3600 + minutes * 60 + seconds;
      
      if (totalSeconds === 0) {
        alert('ê¸°ì¤€ ì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
        return;
      }
      
      // ê¸°ì¤€ í˜ì´ìŠ¤ ê³„ì‚° (ì´ˆ/km)
      const basePacePerKm = totalSeconds / baseDistance * 1000;
      
      // ê±°ë¦¬ë³„ 5K í™˜ì‚° í˜ì´ìŠ¤ ê³„ì‚° (Jack Daniels VDOT ê¸°ì¤€)
      let fiveKPace;
      if (baseDistance === 1500) {
        fiveKPace = basePacePerKm * 1.11;  // 1500mì€ 5Kë³´ë‹¤ 11% ë¹ ë¦„
      } else if (baseDistance === 3000) {
        fiveKPace = basePacePerKm * 1.05;  // 3000mì€ 5Kë³´ë‹¤ 5% ë¹ ë¦„
      } else if (baseDistance === 5000) {
        fiveKPace = basePacePerKm;  // ê·¸ëŒ€ë¡œ ì‚¬ìš©
      } else if (baseDistance === 10000) {
        fiveKPace = basePacePerKm * 0.96;  // 10KëŠ” 5Kë³´ë‹¤ 4% ëŠë¦¼
      } else if (baseDistance === 21097.5) {
        fiveKPace = basePacePerKm * 0.92;  // í•˜í”„ëŠ” 5Kë³´ë‹¤ 8% ëŠë¦¼
      } else if (baseDistance === 42195) {
        fiveKPace = basePacePerKm * 0.87;  // í’€ì€ 5Kë³´ë‹¤ 13% ëŠë¦¼
      } else {
        fiveKPace = basePacePerKm;
      }
      
      // Jack Daniels VDOT ì •í™•í•œ í›ˆë ¨ í˜ì´ìŠ¤ (5K í˜ì´ìŠ¤ ê¸°ì¤€)
      // Running Formula 3rd Edition ê¸°ì¤€
      const trainingPaces = {
        'Easy (E)': fiveKPace * 1.30,           // 5Kì˜ 125-140% ì¤‘ê°„ê°’
        'Marathon (M)': fiveKPace * 1.16,       // 5Kì˜ 116%
        'Threshold (T)': fiveKPace * 1.09,      // 5Kì˜ 109%
        'Interval (I)': fiveKPace * 0.98,       // 5Kì˜ 98% (ì•½ê°„ ë¹ ë¦„)
        'Repetition (R)': fiveKPace * 0.94,     // 5Kì˜ 94%
        'Recovery': fiveKPace * 1.45            // Easyë³´ë‹¤ ëŠë¦¼
      };
      
      // ê²°ê³¼ í‘œì‹œ
      const resultsDiv = document.getElementById('trainingResults');
      let html = '<div class="bg-orange-50 rounded-lg p-6">';
      html += '<h3 class="font-bold text-lg mb-4">í›ˆë ¨ í˜ì´ìŠ¤ ê°€ì´ë“œ</h3>';
      
      // ê¸°ì¤€ í˜ì´ìŠ¤ í‘œì‹œ
      const basePaceKm = totalSeconds / baseDistance * 1000;
      html += `<div class="mb-4 p-3 bg-white rounded-lg">
        <div class="grid grid-cols-2 gap-4 text-sm">
          <div><strong>ê¸°ì¤€ ê±°ë¦¬:</strong> ${baseDistance >= 21000 ? (baseDistance/1000).toFixed(1) + 'km' : baseDistance + 'm'}</div>
          <div><strong>ê¸°ì¤€ ì‹œê°„:</strong> ${formatTime(totalSeconds)}</div>
          <div><strong>ê¸°ì¤€ í˜ì´ìŠ¤:</strong> ${formatTime(basePaceKm)}/km</div>
          <div><strong>í‰ê·  ì†ë„:</strong> ${(baseSpeed * 3.6).toFixed(2)} km/h</div>
        </div>
      </div>`;
      
      // í›ˆë ¨ êµ¬ì—­ í…Œì´ë¸”
      html += '<div class="overflow-x-auto">';
      html += '<table class="w-full">';
      html += '<thead><tr class="bg-gray-100">';
      html += '<th class="p-3 text-left">í›ˆë ¨ êµ¬ì—­</th>';
      html += '<th class="p-3 text-center">200m</th>';
      html += '<th class="p-3 text-center">400m</th>';
      html += '<th class="p-3 text-center">800m</th>';
      html += '<th class="p-3 text-center">1000m</th>';
      html += '<th class="p-3 text-center">1600m</th>';
      html += '<th class="p-3 text-center">ì„¤ëª…</th>';
      html += '</tr></thead><tbody>';
      
      const zoneInfo = {
        'Easy (E)': { color: '#10B981', desc: 'ìœ ì‚°ì†Œ ê¸°ì´ˆ (65-79% HRmax)' },
        'Marathon (M)': { color: '#3B82F6', desc: 'ë§ˆë¼í†¤ ì§€êµ¬ë ¥ (80-90% HRmax)' },
        'Threshold (T)': { color: '#F59E0B', desc: 'ì –ì‚° ì—­ì¹˜ (88-92% HRmax)' },
        'Interval (I)': { color: '#F97316', desc: 'VO2max (98-100% HRmax)' },
        'Repetition (R)': { color: '#EF4444', desc: 'ì†ë„/ê²½ì œì„±' },
        'Recovery': { color: '#8B5CF6', desc: 'íšŒë³µ ì¡°ê¹…' }
      };
      
      Object.entries(trainingPaces).forEach(([type, pace]) => {
        const info = zoneInfo[type];
        
        html += `<tr class="hover:bg-gray-50" style="border-left: 4px solid ${info.color};">`;
        html += `<td class="p-3 font-medium">${type}</td>`;
        html += `<td class="p-3 text-center font-mono">${formatTime(pace * 0.2)}</td>`;
        html += `<td class="p-3 text-center font-mono">${formatTime(pace * 0.4)}</td>`;
        html += `<td class="p-3 text-center font-mono">${formatTime(pace * 0.8)}</td>`;
        html += `<td class="p-3 text-center font-mono font-bold">${formatTime(pace)}</td>`;
        html += `<td class="p-3 text-center font-mono">${formatTime(pace * 1.6)}</td>`;
        html += `<td class="p-3 text-sm text-gray-600">${info.desc}</td>`;
        html += '</tr>';
      });
      
      html += '</tbody></table></div>';
      
      // í›ˆë ¨ ê°€ì´ë“œ
      html += `
        <div class="mt-6 p-4 bg-white rounded-lg">
          <h4 class="font-bold mb-3">ğŸ’¡ í›ˆë ¨ ê°€ì´ë“œ</h4>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
            <div>
              <h5 class="font-medium mb-2">Jack Daniels ì£¼ê°„ í›ˆë ¨ ë¹„ìœ¨</h5>
              <ul class="space-y-1 text-gray-600">
                <li>â€¢ Easy (E): 65-75%</li>
                <li>â€¢ Marathon (M): 15-20% (ë§ˆë¼í†¤ ì¤€ë¹„ì‹œ)</li>
                <li>â€¢ Threshold (T): 10%</li>
                <li>â€¢ Interval (I): 8%</li>
                <li>â€¢ Repetition (R): 5%</li>
              </ul>
            </div>
            <div>
              <h5 class="font-medium mb-2">Jack Daniels í›ˆë ¨ ì„¸ì…˜</h5>
              <ul class="space-y-1 text-gray-600">
                <li>â€¢ <strong>E:</strong> 30-150ë¶„ ì§€ì† (ì£¼ 2íšŒ ì¥ê±°ë¦¬)</li>
                <li>â€¢ <strong>M:</strong> 60-150ë¶„ (ë§ˆë¼í†¤ 16ì£¼ì „ë¶€í„°)</li>
                <li>â€¢ <strong>T:</strong> 20ë¶„ í…œí¬ ë˜ëŠ” 5ë¶„Ã—4 í¬ë£¨ì¦ˆ</li>
                <li>â€¢ <strong>I:</strong> 1000mÃ—5 ë˜ëŠ” 1200mÃ—4 (ë™ì¼íœ´ì‹)</li>
                <li>â€¢ <strong>R:</strong> 200mÃ—8 ë˜ëŠ” 400mÃ—6 (ì™„ì „íœ´ì‹)</li>
              </ul>
            </div>
          </div>
        </div>
      `;
      
      html += '</div>';
      resultsDiv.innerHTML = html;
      resultsDiv.classList.remove('hidden');
    }
    */
    
    // ë’¤ë¡œê°€ê¸°
    function goBack() {
      window.location.href = 'index.html';
    }

    // ì°¨íŠ¸ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ (ì•ˆì •í™” ë²„ì „)
    async function downloadChart(elementId, filename, format = 'png') {
      const element = document.getElementById(elementId);
      if (!element) {
        console.error('ì°¨íŠ¸ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', elementId);
        alert('ì°¨íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
      }
      
      try {
        const timestamp = new Date().toISOString().slice(0,10).replace(/-/g, '');
        const credit = 'AthleteTime_ì¥í˜¸ì¤€ì½”ì¹˜ì œì‘';
        const fullFilename = `${credit}_${filename}_${timestamp}`;
        
        // ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
        const downloadBtns = element.querySelectorAll('.download-btn');
        const originalDisplay = [];
        downloadBtns.forEach((btn, idx) => {
          originalDisplay[idx] = btn.style.display;
          btn.style.display = 'none';
        });
        
        // ì ì‹œ ëŒ€ê¸° (ë Œë”ë§ ì™„ë£Œë¥¼ ìœ„í•´)
        await new Promise(resolve => setTimeout(resolve, 100));
        
        if (format === 'pdf') {
          await downloadPDF(element, fullFilename);
        } else {
          await downloadPNG(element, fullFilename);
        }
        
        // ë²„íŠ¼ ë³µì›
        downloadBtns.forEach((btn, idx) => {
          btn.style.display = originalDisplay[idx] || 'flex';
        });
        
      } catch (error) {
        console.error('ì°¨íŠ¸ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨:', error);
        
        // ë²„íŠ¼ ë³µì›
        const downloadBtns = element.querySelectorAll('.download-btn');
        downloadBtns.forEach(btn => {
          btn.style.display = 'flex';
        });
        
        const errorMsg = format === 'pdf' 
          ? 'PDF ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\n\nPNG í˜•ì‹ìœ¼ë¡œ ì‹œë„í•´ë³´ì„¸ìš”.\n\nì˜¤ë¥˜: ' + error.message
          : 'ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\n\në‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\n\nì˜¤ë¥˜: ' + error.message;
        alert(errorMsg);
      }
    }
    
    // PNG ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜ (ê°œì„ ëœ ë²„ì „)
    async function downloadPNG(element, filename) {
      // ë‹¤ìš´ë¡œë“œìš© ì»¨í…Œì´ë„ˆ ìƒì„±
      const downloadContainer = document.createElement('div');
      downloadContainer.style.cssText = `
        position: absolute;
        left: -9999px;
        background: white;
        padding: 40px;
        width: 1200px;
        font-family: -apple-system, BlinkMacSystemFont, 'Malgun Gothic', sans-serif;
      `;
      
      // í—¤ë” ì¶”ê°€
      const header = document.createElement('div');
      header.style.cssText = 'margin-bottom: 30px; text-align: center;';
      const chartTitle = element.querySelector('h3')?.textContent || 'í˜ì´ìŠ¤ ì°¨íŠ¸';
      header.innerHTML = `
        <h1 style="font-size: 32px; font-weight: bold; color: #1a1a1a; margin-bottom: 10px;">
          ì• ìŠ¬ë¦¬íŠ¸ íƒ€ì„ í˜ì´ìŠ¤ ê³„ì‚°ê¸°
        </h1>
        <p style="color: #666; font-size: 16px;">
          ${chartTitle} | ${new Date().toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' })}
        </p>
        <div style="margin-top: 15px; padding-top: 15px; border-top: 3px solid #667eea;"></div>
      `;
      downloadContainer.appendChild(header);
      
      // ì»¨í…ì¸  ë³µì‚¬ ë° ìŠ¤íƒ€ì¼ ì •ë¦¬
      const contentClone = element.cloneNode(true);
      
      // ë¶ˆí•„ìš”í•œ ìš”ì†Œ ì œê±°
      contentClone.querySelectorAll('.download-btn, .no-print, button').forEach(el => el.remove());
      
      // í…Œì´ë¸” ìŠ¤íƒ€ì¼ ê°œì„ 
      contentClone.querySelectorAll('.table-container').forEach(container => {
        container.style.overflow = 'visible';
      });
      
      // sticky í•´ì œ
      contentClone.querySelectorAll('[style*="sticky"]').forEach(el => {
        el.style.position = 'relative';
      });
      
      downloadContainer.appendChild(contentClone);
      
      // í‘¸í„° ì¶”ê°€
      const footer = document.createElement('div');
      footer.style.cssText = 'margin-top: 40px; padding-top: 20px; border-top: 1px solid #e5e7eb; text-align: center;';
      footer.innerHTML = `
        <p style="color: #999; font-size: 14px;">
          Â© 2024 Athlete Time | í•œêµ­ ìœ¡ìƒì¸ì„ ìœ„í•œ í˜ì´ìŠ¤ ê³„ì‚°ê¸°<br>
          <span style="font-size: 12px;">www.athletetime.com</span>
        </p>
      `;
      downloadContainer.appendChild(footer);
      
      // DOMì— ì„ì‹œ ì¶”ê°€
      document.body.appendChild(downloadContainer);
      
      try {
        // ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
        const downloadBtns = element.querySelectorAll('.download-btn');
        downloadBtns.forEach(btn => btn.style.display = 'none');
        
        // html2canvas ì‚¬ìš© (ê°œì„ ëœ ì˜µì…˜)
        const canvas = await html2canvas(downloadContainer, {
          scale: 3,  // ê³ í•´ìƒë„
          backgroundColor: '#ffffff',
          logging: false,
          useCORS: true,
          allowTaint: true,
          windowWidth: 1200,
          windowHeight: 2000
        });
        
        // Blobìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ë‹¤ìš´ë¡œë“œ (ë” ë‚˜ì€ í’ˆì§ˆ)
        canvas.toBlob(blob => {
          const url = URL.createObjectURL(blob);
          const link = document.createElement('a');
          link.download = filename + '.png';
          link.href = url;
          link.click();
          URL.revokeObjectURL(url);
        }, 'image/png', 1.0);
        
        // ë²„íŠ¼ ë‹¤ì‹œ í‘œì‹œ
        downloadBtns.forEach(btn => btn.style.display = 'flex');
        
      } catch (error) {
        console.error('PNG ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:', error);
        // ë²„íŠ¼ ë‹¤ì‹œ í‘œì‹œ
        const downloadBtns = element.querySelectorAll('.download-btn');
        downloadBtns.forEach(btn => btn.style.display = 'flex');
        throw error;
      } finally {
        // ì„ì‹œ ìš”ì†Œ ì œê±°
        document.body.removeChild(downloadContainer);
      }
    }
    
    // PDF ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜ (ê°œì„ ëœ ë²„ì „)
    async function downloadPDF(element, filename) {
      try {
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF('l', 'mm', 'a4'); // A4 ê°€ë¡œ ë°©í–¥
        
        // ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
        const downloadBtns = element.querySelectorAll('.download-btn');
        downloadBtns.forEach(btn => btn.style.display = 'none');
        
        try {
          // html2canvasë¡œ ì´ë¯¸ì§€ ìƒì„±
          const canvas = await html2canvas(element, {
            scale: 2,
            backgroundColor: '#ffffff',
            logging: false,
            useCORS: true,
            allowTaint: true,
            width: element.scrollWidth,
            height: element.scrollHeight
          });
          
          const dataUrl = canvas.toDataURL('image/png', 1.0);
          
          // A4 ê°€ë¡œ í¬ê¸°: 297mm x 210mm
          // ì—¬ë°± ê³ ë ¤: ì¢Œìš° ê° 10mm
          const maxWidth = 277; // 297 - 20 (ì¢Œìš° ì—¬ë°±)
          const maxHeight = 190; // 210 - 20 (ìƒí•˜ ì—¬ë°±)
          
          // ì´ë¯¸ì§€ ë¹„ìœ¨ ê³„ì‚°
          const imgRatio = element.offsetHeight / element.offsetWidth;
          
          let finalWidth = maxWidth;
          let finalHeight = maxWidth * imgRatio;
          
          // ë†’ì´ê°€ ì´ˆê³¼í•˜ë©´ ë†’ì´ ê¸°ì¤€ìœ¼ë¡œ ì¬ê³„ì‚°
          if (finalHeight > maxHeight) {
            finalHeight = maxHeight;
            finalWidth = maxHeight / imgRatio;
          }
          
          // ì¤‘ì•™ ì •ë ¬ì„ ìœ„í•œ x, y ì¢Œí‘œ ê³„ì‚°
          const x = (297 - finalWidth) / 2;
          const y = (210 - finalHeight) / 2;
          
          // PDFì— ì´ë¯¸ì§€ ì¶”ê°€ (FAST ëª¨ë“œë¡œ ë” ë¹ ë¥´ê²Œ)
          pdf.addImage(dataUrl, 'PNG', x, y, finalWidth, finalHeight, undefined, 'FAST');
          
          // PDF ë©”íƒ€ë°ì´í„° ì„¤ì •
          pdf.setProperties({
            title: filename.replace(/_/g, ' '),
            subject: 'ATHLETE TIME ëŸ¬ë‹ í˜ì´ìŠ¤ ì°¨íŠ¸',
            author: 'ì¥í˜¸ì¤€ ì½”ì¹˜',
            keywords: 'running, pace, athlete time, ëŸ¬ë‹, í˜ì´ìŠ¤',
            creator: 'ATHLETE TIME - ì• ìŠ¬ë¦¬íŠ¸ íƒ€ì„'
          });
          
          // í•˜ë‹¨ ì €ì‘ê¶Œ ì •ë³´ ì¶”ê°€
          try {
            pdf.setFont('helvetica');
            pdf.setFontSize(8);
            pdf.setTextColor(100, 100, 100);
            
            // í•œê¸€ ë¬¸ì œë¡œ ì¸í•´ ì˜ë¬¸ìœ¼ë¡œ í‘œì‹œ
            const dateStr = new Date().toLocaleDateString('ko-KR');
            const footerText = `ATHLETE TIME - Coach Jang Ho Jun - ${dateStr}`;
            pdf.text(footerText, 148.5, 205, { align: 'center' });
          } catch (textError) {
            // í…ìŠ¤íŠ¸ ì¶”ê°€ ì˜¤ë¥˜ëŠ” ë¬´ì‹œ (ì´ë¯¸ì§€ëŠ” ì •ìƒ ì €ì¥)
            console.warn('PDF footer text error:', textError);
          }
          
          // PDF ì €ì¥
          pdf.save(filename + '.pdf');
          
          // ë²„íŠ¼ ë‹¤ì‹œ í‘œì‹œ
          downloadBtns.forEach(btn => btn.style.display = 'flex');
          
        } catch (innerError) {
          // ë²„íŠ¼ ë‹¤ì‹œ í‘œì‹œ
          downloadBtns.forEach(btn => btn.style.display = 'flex');
          throw innerError;
        }
        
      } catch (error) {
        console.error('PDF ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:', error);
        alert('PDF ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. PNG ë‹¤ìš´ë¡œë“œë¥¼ ì‹œë„í•´ì£¼ì„¸ìš”.');
      }
    }
    
    // ì°¨íŠ¸ ì¸ì‡„ í•¨ìˆ˜
    function printChart(elementId) {
      const element = document.getElementById(elementId);
      const printWindow = window.open('', 'PRINT', 'width=1200,height=800');
      
      const printHTML = `
        <!DOCTYPE html>
        <html>
          <head>
            <title>ì• ìŠ¬ë¦¬íŠ¸ íƒ€ì„ - í˜ì´ìŠ¤ ì°¨íŠ¸</title>
            <style>
              @page {
                size: A4 landscape;
                margin: 15mm;
              }
              body {
                font-family: -apple-system, BlinkMacSystemFont, 'Malgun Gothic', sans-serif;
                margin: 0;
                padding: 20px;
              }
              .download-btn { display: none !important; }
              .watermark-text { color: rgba(0,0,0,0.12) !important; }
              table {
                border-collapse: collapse;
                width: 100%;
              }
              th, td {
                border: 1px solid #ddd;
                padding: 6px;
                text-align: center;
              }
              th {
                background-color: #f3f4f6;
                font-weight: bold;
              }
              .highlight-row { background-color: #fef3c7; }
              .sub-highlight { background-color: #dbeafe; }
              @media print {
                body { 
                  print-color-adjust: exact; 
                  -webkit-print-color-adjust: exact;
                }
              }
            </style>
          </head>
          <body>
            ${element.innerHTML}
            <div style="text-align: center; margin-top: 30px; padding-top: 10px; border-top: 1px solid #ddd;">
              Â© ATHLETE TIME Â· ì œì‘: ì¥í˜¸ì¤€ ì½”ì¹˜ Â· ${new Date().toLocaleDateString('ko-KR')}
            </div>
          

</body>
        </html>
      `;
      
      printWindow.document.write(printHTML);
      printWindow.document.close();
      printWindow.focus();
      
      setTimeout(() => {
        printWindow.print();
        printWindow.close();
      }, 500);
    }


    // ëª¨ë°”ì¼ ê°ì§€ ë° ìŠ¤í¬ë¡¤ í‘œì‹œê¸° ì¶”ê°€
    function checkMobileAndScroll() {
      const isMobile = window.innerWidth <= 768;
      
      if (isMobile) {
        // ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ í…Œì´ë¸” í‘œì‹œ
        document.querySelectorAll('.table-container').forEach(container => {
          const table = container.querySelector('.pace-table');
          if (table && table.scrollWidth > container.clientWidth) {
            container.classList.add('scrollable');
          }
        });
        
        // ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ì¬ë°°ì¹˜
        document.querySelectorAll('.download-btn').forEach(btn => {
          const chartContainer = btn.closest('.chart-container');
          if (chartContainer) {
            const title = chartContainer.querySelector('h3');
            if (title && btn.parentElement === chartContainer) {
              title.insertAdjacentElement('afterend', btn);
            }
          }
        });
      }
    }
    
    // í™”ë©´ í¬ê¸° ë³€ê²½ ì‹œ ì²˜ë¦¬
    let resizeTimer;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(() => {
        checkMobileAndScroll();
      }, 250);
    });
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    window.addEventListener('DOMContentLoaded', () => {
      switchTab('chart');
      checkMobileAndScroll();
      
      // íŠ¸ë™ ë ˆì¸ ê³„ì‚°ê¸° ì´ˆê¸°í™”
      setTimeout(() => {
        if (document.getElementById('laneTargetTime') && document.getElementById('laneLaneSelector')) {
          // console.log('íŠ¸ë™ ë ˆì¸ ê³„ì‚°ê¸° ì´ˆê¸°í™” ì¤‘...'); // Production: removed
          calculateLaneAll();
        }
      }, 100);
      
      // ëª¨ë°”ì¼ì—ì„œ í…Œì´ë¸” í„°ì¹˜ ìŠ¤í¬ë¡¤ ê°œì„ 
      if ('ontouchstart' in window) {
        document.querySelectorAll('.table-container').forEach(container => {
          let isScrolling = false;
          let startX;
          let scrollLeft;
          
          container.addEventListener('touchstart', (e) => {
            isScrolling = true;
            startX = e.touches[0].pageX - container.offsetLeft;
            scrollLeft = container.scrollLeft;
          });
          
          container.addEventListener('touchmove', (e) => {
            if (!isScrolling) return;
            e.preventDefault();
            const x = e.touches[0].pageX - container.offsetLeft;
            const walk = (x - startX) * 2;
            container.scrollLeft = scrollLeft - walk;
          });
          
          container.addEventListener('touchend', () => {
            isScrolling = false;
          });
        });
      }
    });
    // ì±„íŒ… í†µí•©
    function initializeChatIntegration() {
      // ì±„íŒ… í”Œë¡œíŒ… ë²„íŠ¼ ì¶”ê°€
      if (!document.getElementById('chatFab')) {
        const chatFab = document.createElement('div');
        chatFab.id = 'chatFab';
        chatFab.className = 'chat-fab';
        chatFab.innerHTML = `
          <i class="fas fa-comments"></i>
          <div class="chat-badge" id="chatBadge" style="display: none;">0</div>
        `;
        chatFab.onclick = toggleMiniChat;
        document.body.appendChild(chatFab);
      }
      
      // ë¯¸ë‹ˆ ì±„íŒ…ì°½ ì¶”ê°€
      if (!document.getElementById('miniChat')) {
        const miniChat = document.createElement('div');
        miniChat.id = 'miniChat';
        miniChat.className = 'mini-chat';
        miniChat.innerHTML = `
          <div class="mini-chat-header">
            <span>ğŸ’¬ ëŸ¬ë‹í†¡</span>
            <span class="chat-online">â— ì˜¨ë¼ì¸</span>
            <button type="button" onclick="toggleMiniChat()" style="color: white;">âœ•</button>
          </div>
          <div class="mini-chat-messages" id="miniChatMessages">
            <div style="text-align: center; padding: 10px; color: #999;">
              ë‹¤ë¥¸ ëŸ¬ë„ˆë“¤ê³¼ ëŒ€í™”í•´ë³´ì„¸ìš”!
            </div>
          </div>
          <div class="mini-chat-input">
            <input type="text" id="miniChatInput" placeholder="ë©”ì‹œì§€ ì…ë ¥..." 
                   onkeypress="if(event.key==='Enter') sendMiniMessage()" aria-label="miniChatInputì— ì…ë ¥">
            <button type="button" onclick="sendMiniMessage()">ì „ì†¡</button>
          </div>
        `;
        document.body.appendChild(miniChat);
      }
      
      // WebSocket ì—°ê²° ì‹œë„
      connectChatWebSocket();
    }
    
    function toggleMiniChat() {
      const chat = document.getElementById('miniChat');
      const badge = document.getElementById('chatBadge');
      
      if (chat.classList.contains('active')) {
        chat.classList.remove('active');
      } else {
        chat.classList.add('active');
        badge.style.display = 'none';
        document.getElementById('miniChatInput').focus();
      }
    }
    
    function sendMiniMessage() {
      const input = document.getElementById('miniChatInput');
      const text = input.value.trim();
      if (!text) return;
      
      const username = (function() { try { return localStorage.getItem('username'); } catch(e) { console.error('Storage error:', e); return null; } })() || 'ë‚˜';
      
      // ë©”ì‹œì§€ í‘œì‹œ
      addMiniMessage(username, text, true);
      
      // WebSocketìœ¼ë¡œ ì „ì†¡ (ì—°ê²°ë˜ì–´ ìˆìœ¼ë©´)
      if (window.chatWs && window.chatWs.readyState === WebSocket.OPEN) {
        window.chatWs.send(JSON.stringify({
          type: 'message',
          data: { 
            text, 
            username,
            source: 'pace-calculator',
            timestamp: new Date().toISOString()
          }
        }));
      } else if (window.chatFallback) {
        // í´ë°± ëª¨ë“œ: ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
        const messages = JSON.parse((function() { try { return localStorage.getItem('fallbackMessages'); } catch(e) { console.error('Storage error:', e); return null; } })() || '[]');
        messages.push({ username, text, timestamp: new Date().toISOString() });
        if (messages.length > 100) messages.shift(); // ìµœëŒ€ 100ê°œ ë©”ì‹œì§€ ìœ ì§€
        (function() { try { return localStorage.setItem('fallbackMessages', JSON.stringify(messages)); } catch(e) { console.error('Storage error:', e); return null; } })();
      }
      
      input.value = '';
    }
    
    // ê³„ì‚°ê¸° í™œë™ì„ ì±„íŒ…ì— ìë™ìœ¼ë¡œ ê³µìœ í•˜ëŠ” í•¨ìˆ˜
    function shareToChat(activity, details) {
      if (!window.chatWs || window.chatWs.readyState !== WebSocket.OPEN) {
        return;
      }
      
      const username = (function() { try { return localStorage.getItem('username'); } catch(e) { console.error('Storage error:', e); return null; } })() || 'ìµëª… ëŸ¬ë„ˆ';
      let message = '';
      
      switch(activity) {
        case 'pace_calculated':
          message = `ğŸƒ ${details.distance}ì—ì„œ ${details.pace} í˜ì´ìŠ¤ë¡œ ë‹¬ë¦¬ë©´ ${details.time} ê±¸ë ¤ìš”!`;
          break;
        case 'split_generated':
          message = `ğŸ“Š ${details.distance} ìŠ¤í”Œë¦¿ ì°¨íŠ¸ë¥¼ ìƒì„±í–ˆì–´ìš”`;
          break;
        case 'lane_calculated':
          message = `ğŸŸï¸ ${details.lane}ë²ˆ ë ˆì¸ ê±°ë¦¬: ${details.distance}m`;
          break;
        case 'goal_set':
          message = `ğŸ¯ ëª©í‘œ ì„¤ì •: ${details.goal}`;
          break;
      }
      
      if (message) {
        // ìë™ ë©”ì‹œì§€ëŠ” ì¡°ìš©íˆ ì „ì†¡ (UIì—ëŠ” í‘œì‹œí•˜ì§€ ì•ŠìŒ)
        window.chatWs.send(JSON.stringify({
          type: 'activity',
          data: {
            text: message,
            username,
            activity,
            details,
            source: 'pace-calculator',
            timestamp: new Date().toISOString()
          }
        }));
      }
    }
    
    function addMiniMessage(username, text, isOwn = false) {
      const container = document.getElementById('miniChatMessages');
      const msgDiv = document.createElement('div');
      msgDiv.className = `mini-message ${isOwn ? 'own' : ''}`;
      msgDiv.innerHTML = `
        <strong>${username}:</strong> ${text}
      `;
      container.appendChild(msgDiv);
      container.scrollTop = container.scrollHeight;
      
      // ì±„íŒ…ì°½ì´ ë‹«í˜€ìˆìœ¼ë©´ ë°°ì§€ í‘œì‹œ
      if (!document.getElementById('miniChat').classList.contains('active') && !isOwn) {
        const badge = document.getElementById('chatBadge');
        const count = parseInt(badge.textContent || '0') + 1;
        badge.textContent = count;
        badge.style.display = 'block';
      }
    }
    
    let reconnectAttempts = 0;
    const maxReconnectAttempts = 5;
    let reconnectTimeout = null;
    
    function connectChatWebSocket() {
      try {
        const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
        window.chatWs = new WebSocket(`${protocol}//${window.location.hostname}:3002`);
        
        window.chatWs.onopen = () => {
          // console.log('ì±„íŒ… ì„œë²„ ì—°ê²°ë¨'); // Production: removed
          reconnectAttempts = 0;
          addMiniMessage('ì‹œìŠ¤í…œ', 'ì±„íŒ… ì„œë²„ ì—°ê²°ë¨ âœ…');
          
          // ì‚¬ìš©ìëª… ì„¤ì •
          const username = (function() { try { return localStorage.getItem('username'); } catch(e) { console.error('Storage error:', e); return null; } })() || `ëŸ¬ë„ˆ${Math.floor(Math.random() * 1000)}`;
          (function() { try { return localStorage.setItem('username', username); } catch(e) { console.error('Storage error:', e); return null; } })();
          
          window.chatWs.send(JSON.stringify({
            type: 'join',
            data: { username, page: 'pace-calculator' }
          }));
        };
        
        window.chatWs.onmessage = (event) => {
          try {
            const data = JSON.parse(event.data);
            
            switch(data.type) {
              case 'message':
                if (data.data) {
                  addMiniMessage(data.data.username || 'ìµëª…', data.data.text);
                }
                break;
                
              case 'user_joined':
                addMiniMessage('ì‹œìŠ¤í…œ', `${data.data.username}ë‹˜ì´ ì…ì¥í–ˆìŠµë‹ˆë‹¤ ğŸ‘‹`);
                break;
                
              case 'user_left':
                addMiniMessage('ì‹œìŠ¤í…œ', `${data.data.username}ë‹˜ì´ í‡´ì¥í–ˆìŠµë‹ˆë‹¤`);
                break;
                
              case 'users_online':
                updateOnlineCount(data.data.count);
                break;
            }
          } catch (e) {
            console.error('ë©”ì‹œì§€ íŒŒì‹± ì˜¤ë¥˜:', e);
          }
        };
        
        window.chatWs.onclose = () => {
          // console.log('ì±„íŒ… ì—°ê²° ì¢…ë£Œ'); // Production: removed
          addMiniMessage('ì‹œìŠ¤í…œ', 'ì±„íŒ… ì„œë²„ ì—°ê²° ëŠê¹€ âš ï¸');
          
          // ìë™ ì¬ì—°ê²°
          if (reconnectAttempts < maxReconnectAttempts) {
            reconnectAttempts++;
            const delay = Math.min(1000 * Math.pow(2, reconnectAttempts), 10000);
            
            reconnectTimeout = setTimeout(() => {
              // console.log(`ì¬ì—°ê²° ì‹œë„ ${reconnectAttempts}/${maxReconnectAttempts}`); // Production: removed
              connectChatWebSocket();
            }, delay);
          }
        };
        
        window.chatWs.onerror = (error) => {
          console.log('ì±„íŒ… ì—°ê²° ì˜¤ë¥˜:', error);
        };
        
      } catch (error) {
        console.log('WebSocket ë¯¸ì§€ì› ë˜ëŠ” ì—°ê²° ì˜¤ë¥˜:', error);
        addMiniMessage('ì‹œìŠ¤í…œ', 'ì±„íŒ… ì„œë²„ ì˜¤í”„ë¼ì¸ (ë¡œì»¬ ëª¨ë“œ)');
        useFallbackChat();
      }
    }
    
    function updateOnlineCount(count) {
      const onlineIndicator = document.querySelector('.chat-online');
      if (onlineIndicator) {
        onlineIndicator.textContent = `â— ì˜¨ë¼ì¸ (${count}ëª…)`;
      }
    }
    
    function useFallbackChat() {
      // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ê¸°ë°˜ í´ë°±
      window.chatFallback = true;
      
      // ê¸°ì¡´ ë©”ì‹œì§€ ë¡œë“œ
      const messages = JSON.parse((function() { try { return localStorage.getItem('fallbackMessages'); } catch(e) { console.error('Storage error:', e); return null; } })() || '[]');
      messages.forEach(msg => {
        addMiniMessage(msg.username, msg.text);
      });
    }
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', function() {
      // ì´ˆê¸° í…Œì´ë¸” ì—…ë°ì´íŠ¸
      updateKmPaceTable();
      updateGoalTable();
      
      // íŠ¸ë™ ë ˆì¸ ê³„ì‚°ê¸° ì´ˆê¸°í™”
      if (document.getElementById('trackLaneTime')) {
        document.getElementById('trackLaneTime').value = '50';
        calculateLaneDifferences();
      }
      
      // ì±„íŒ… ì´ˆê¸°í™”
      setTimeout(initializeChatIntegration, 1000);
    });
  </script>
  
  
  <style>
    /* ì±„íŒ… í†µí•© ìŠ¤íƒ€ì¼ */
    .chat-fab {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 56px;
      height: 56px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      transition: all 0.3s;
    }
    
    .chat-fab:hover {
      transform: scale(1.1);
    }
    
    .chat-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #ef4444;
      color: white;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: bold;
    }
    
    .mini-chat {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 320px;
      height: 450px;
      background: #1a1a1a;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      display: none;
      flex-direction: column;
      z-index: 999;
    }
    
    .mini-chat.active {
      display: flex;
    }
    
    .mini-chat-header {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 12px;
      border-radius: 12px 12px 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: bold;
    }
    
    .chat-online {
      font-size: 12px;
      color: #4ade80;
    }
    
    .mini-chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 12px;
      background: #0f0f0f;
    }
    
    .mini-message {
      margin: 8px 0;
      padding: 8px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      color: #e0e0e0;
      font-size: 14px;
    }
    
    .mini-message.own {
      background: rgba(102, 126, 234, 0.2);
      margin-left: 20%;
    }
    
    .mini-message strong {
      color: #667eea;
      font-size: 12px;
    }
    
    .mini-chat-input {
      display: flex;
      gap: 8px;
      padding: 12px;
      background: #1a1a1a;
      border-top: 1px solid #333;
      border-radius: 0 0 12px 12px;
    }
    
    .mini-chat-input input {
      flex: 1;
      padding: 8px 12px;
      background: #2a2a2a;
      border: 1px solid #444;
      border-radius: 20px;
      color: white;
      font-size: 14px;
      outline: none;
    }
    
    .mini-chat-input button {
      padding: 8px 16px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
    }
    
    .mini-chat-input button:hover {
      opacity: 0.9;
    }
    
    @media (max-width: 640px) {
      .mini-chat {
        width: 90%;
        right: 5%;
        left: 5%;
      }
    }
  </style>
</body>
</html>