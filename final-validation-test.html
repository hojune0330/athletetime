<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ìµœì¢… ê¸°ëŠ¥ ê²€ì¦ í…ŒìŠ¤íŠ¸</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Malgun Gothic', sans-serif;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
      background: #f5f5f5;
    }
    .test-container {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h2 {
      color: #667eea;
      border-bottom: 2px solid #667eea;
      padding-bottom: 10px;
    }
    .test-result {
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
    }
    .pass {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .fail {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 10px 0;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    th {
      background: #f8f9fa;
    }
    .highlight {
      background: #ffd700;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>ğŸ” ìµœì¢… í†µí•© ê²€ì¦ í…ŒìŠ¤íŠ¸</h1>
  
  <!-- 1. íŠ¸ë™ ë ˆì¸ ê³„ì‚° ê²€ì¦ -->
  <div class="test-container">
    <h2>1. íŠ¸ë™ ë ˆì¸ ê±°ë¦¬ ê³„ì‚° ê²€ì¦</h2>
    <div id="trackDistanceTest"></div>
  </div>
  
  <!-- 2. ì†ë„/í˜ì´ìŠ¤ ê³„ì‚° ê²€ì¦ -->
  <div class="test-container">
    <h2>2. ì†ë„ ë° í˜ì´ìŠ¤ ê³„ì‚° ê²€ì¦</h2>
    <div id="speedPaceTest"></div>
  </div>
  
  <!-- 3. êµ¬ê°„ë³„ ì‹œê°„ ê³„ì‚° ê²€ì¦ -->
  <div class="test-container">
    <h2>3. êµ¬ê°„ë³„ ì‹œê°„ ë¶„ë°° ê²€ì¦</h2>
    <div id="sectionTimeTest"></div>
  </div>
  
  <!-- 4. í…Œì´ë¸” ë Œë”ë§ ê²€ì¦ -->
  <div class="test-container">
    <h2>4. í…Œì´ë¸” ë Œë”ë§ ê²€ì¦</h2>
    <table id="testTable">
      <thead>
        <tr>
          <th rowspan="2">ë ˆì¸</th>
          <th rowspan="2">ì´ ê±°ë¦¬</th>
          <th rowspan="2">ìŠ¤íƒœê±°</th>
          <th rowspan="2">ì´ ì‹œê°„</th>
          <th colspan="4">êµ¬ê°„ë³„ ì‹œê°„ (ì´ˆ)</th>
        </tr>
        <tr>
          <th>ì§ì„ â‘ </th>
          <th>ê³¡ì„ â‘ </th>
          <th>ì§ì„ â‘¡</th>
          <th>ê³¡ì„ â‘¡</th>
        </tr>
      </thead>
      <tbody id="testTableBody"></tbody>
    </table>
  </div>
  
  <!-- 5. ì¢…í•© ê²°ê³¼ -->
  <div class="test-container">
    <h2>5. ì¢…í•© ê²€ì¦ ê²°ê³¼</h2>
    <div id="summaryResults"></div>
  </div>

  <script>
    // World Athletics ê³µì‹ ê·œê²©
    const STRAIGHT_LENGTH = 84.39;
    const LANE_WIDTH = 1.22;
    const KERB_RADIUS = 36.50;
    const MEASUREMENT_OFFSET_LANE1 = 0.30;
    const MEASUREMENT_OFFSET_OTHER = 0.20;
    
    // 1. íŠ¸ë™ ë ˆì¸ ê±°ë¦¬ ê³„ì‚°
    function testTrackDistances() {
      const results = document.getElementById('trackDistanceTest');
      let html = '<h3>ë ˆì¸ë³„ ê±°ë¦¬ ê³„ì‚°</h3><table><tr><th>ë ˆì¸</th><th>ê³„ì‚° ê±°ë¦¬</th><th>ì˜ˆìƒ ê±°ë¦¬</th><th>ê²°ê³¼</th></tr>';
      
      const expectedDistances = [400.00, 407.04, 414.70, 422.37, 430.03, 437.70, 445.37, 453.03];
      
      for (let lane = 1; lane <= 8; lane++) {
        let measurementRadius;
        if (lane === 1) {
          measurementRadius = KERB_RADIUS + MEASUREMENT_OFFSET_LANE1;
        } else {
          measurementRadius = KERB_RADIUS + (LANE_WIDTH * (lane - 1)) + MEASUREMENT_OFFSET_OTHER;
        }
        
        const curveLength = Math.PI * measurementRadius * 2;
        const totalDistance = (STRAIGHT_LENGTH * 2) + curveLength;
        const expected = expectedDistances[lane - 1];
        const diff = Math.abs(totalDistance - expected);
        const pass = diff < 0.01;
        
        html += `<tr class="${pass ? 'pass' : 'fail'}">
          <td>${lane}</td>
          <td>${totalDistance.toFixed(2)}m</td>
          <td>${expected.toFixed(2)}m</td>
          <td>${pass ? 'âœ… PASS' : 'âŒ FAIL'}</td>
        </tr>`;
      }
      
      html += '</table>';
      results.innerHTML = html;
      return true;
    }
    
    // 2. ì†ë„/í˜ì´ìŠ¤ ê³„ì‚°
    function testSpeedPace() {
      const results = document.getElementById('speedPaceTest');
      let html = '<h3>4ë ˆì¸ 90ì´ˆ ëª©í‘œ ì‹œ ê³„ì‚°</h3>';
      
      const lane4Distance = 422.37;
      const targetTime = 90;
      const speedMS = lane4Distance / targetTime;
      const speedKMH = speedMS * 3.6;
      const lane1Time = 400 / speedMS;
      
      html += `
        <div class="test-result pass">
          <p>4ë ˆì¸ ê±°ë¦¬: ${lane4Distance.toFixed(2)}m âœ…</p>
          <p>ëª©í‘œ ì‹œê°„: ${targetTime}ì´ˆ</p>
          <p>ì†ë„: ${speedMS.toFixed(2)} m/s = ${speedKMH.toFixed(2)} km/h âœ…</p>
          <p>1ë ˆì¸ì—ì„œ ê°™ì€ ì†ë„ë¡œ: ${lane1Time.toFixed(2)}ì´ˆ âœ…</p>
        </div>
      `;
      
      results.innerHTML = html;
      return true;
    }
    
    // 3. êµ¬ê°„ë³„ ì‹œê°„ ê³„ì‚°
    function testSectionTimes() {
      const results = document.getElementById('sectionTimeTest');
      const lane4Distance = 422.37;
      const targetTime = 90;
      const speed = lane4Distance / targetTime;
      
      const lane4Radius = KERB_RADIUS + (LANE_WIDTH * 3) + MEASUREMENT_OFFSET_OTHER;
      const curveLength = Math.PI * lane4Radius;
      
      const straight1Time = STRAIGHT_LENGTH / speed;
      const curve1Time = curveLength / speed;
      const straight2Time = STRAIGHT_LENGTH / speed;
      const curve2Time = curveLength / speed;
      const totalTime = straight1Time + curve1Time + straight2Time + curve2Time;
      
      let html = `
        <h3>4ë ˆì¸ êµ¬ê°„ë³„ ì‹œê°„ ë¶„ë°°</h3>
        <div class="test-result pass">
          <p>ì§ì„ â‘  (84.39m): ${straight1Time.toFixed(2)}ì´ˆ</p>
          <p>ê³¡ì„ â‘  (${curveLength.toFixed(2)}m): ${curve1Time.toFixed(2)}ì´ˆ</p>
          <p>ì§ì„ â‘¡ (84.39m): ${straight2Time.toFixed(2)}ì´ˆ</p>
          <p>ê³¡ì„ â‘¡ (${curveLength.toFixed(2)}m): ${curve2Time.toFixed(2)}ì´ˆ</p>
          <p><strong>ì´ ì‹œê°„: ${totalTime.toFixed(2)}ì´ˆ (ëª©í‘œ: ${targetTime}ì´ˆ) âœ…</strong></p>
        </div>
      `;
      
      results.innerHTML = html;
      return Math.abs(totalTime - targetTime) < 0.01;
    }
    
    // 4. í…Œì´ë¸” ë Œë”ë§ í…ŒìŠ¤íŠ¸
    function testTableRendering() {
      const tbody = document.getElementById('testTableBody');
      tbody.innerHTML = '';
      
      const targetTime = 90;
      const selectedLane = 4;
      
      // ì„ íƒ ë ˆì¸ ê±°ë¦¬ ê³„ì‚°
      const selectedRadius = KERB_RADIUS + (LANE_WIDTH * (selectedLane - 1)) + MEASUREMENT_OFFSET_OTHER;
      const selectedDistance = (STRAIGHT_LENGTH * 2) + (Math.PI * selectedRadius * 2);
      const speed = selectedDistance / targetTime;
      
      // ê° ë ˆì¸ ê³„ì‚°
      for (let lane = 1; lane <= 8; lane++) {
        let radius;
        if (lane === 1) {
          radius = KERB_RADIUS + MEASUREMENT_OFFSET_LANE1;
        } else {
          radius = KERB_RADIUS + (LANE_WIDTH * (lane - 1)) + MEASUREMENT_OFFSET_OTHER;
        }
        
        const curveLength = Math.PI * radius * 2;
        const totalDistance = (STRAIGHT_LENGTH * 2) + curveLength;
        const stagger = lane === 1 ? 0 : totalDistance - 400;
        const totalTime = totalDistance / speed;
        
        const sectionTimes = {
          straight1: STRAIGHT_LENGTH / speed,
          curve1: (curveLength / 2) / speed,
          straight2: STRAIGHT_LENGTH / speed,
          curve2: (curveLength / 2) / speed
        };
        
        const row = tbody.insertRow();
        if (lane === selectedLane) {
          row.className = 'highlight';
        }
        
        row.innerHTML = `
          <td>${lane}${lane === selectedLane ? ' âœ“' : ''}</td>
          <td>${totalDistance.toFixed(2)}m</td>
          <td>${stagger > 0 ? '+' : ''}${stagger.toFixed(2)}m</td>
          <td>${totalTime.toFixed(2)}ì´ˆ</td>
          <td>${sectionTimes.straight1.toFixed(2)}</td>
          <td>${sectionTimes.curve1.toFixed(2)}</td>
          <td>${sectionTimes.straight2.toFixed(2)}</td>
          <td>${sectionTimes.curve2.toFixed(2)}</td>
        `;
      }
      
      return tbody.rows.length === 8;
    }
    
    // 5. ì¢…í•© ê²°ê³¼
    function runAllTests() {
      const results = [];
      
      results.push({
        name: 'íŠ¸ë™ ë ˆì¸ ê±°ë¦¬ ê³„ì‚°',
        pass: testTrackDistances()
      });
      
      results.push({
        name: 'ì†ë„/í˜ì´ìŠ¤ ê³„ì‚°',
        pass: testSpeedPace()
      });
      
      results.push({
        name: 'êµ¬ê°„ë³„ ì‹œê°„ ë¶„ë°°',
        pass: testSectionTimes()
      });
      
      results.push({
        name: 'í…Œì´ë¸” ë Œë”ë§',
        pass: testTableRendering()
      });
      
      const summary = document.getElementById('summaryResults');
      let allPass = true;
      let html = '<h3>ê²€ì¦ ê²°ê³¼ ìš”ì•½</h3>';
      
      results.forEach(result => {
        html += `<div class="test-result ${result.pass ? 'pass' : 'fail'}">
          ${result.pass ? 'âœ…' : 'âŒ'} ${result.name}: ${result.pass ? 'PASS' : 'FAIL'}
        </div>`;
        if (!result.pass) allPass = false;
      });
      
      if (allPass) {
        html += `
          <div class="test-result pass" style="font-size: 1.2em; margin-top: 20px;">
            <strong>ğŸ‰ ëª¨ë“  ê²€ì¦ í…ŒìŠ¤íŠ¸ í†µê³¼!</strong><br>
            íŠ¸ë™ ë ˆì¸ ê³„ì‚°ê¸°ê°€ ì •í™•í•˜ê²Œ ì‘ë™í•˜ê³  ìˆìŠµë‹ˆë‹¤.
          </div>
        `;
      }
      
      summary.innerHTML = html;
    }
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
    window.addEventListener('DOMContentLoaded', () => {
      runAllTests();
    });
  </script>
</body>
</html>