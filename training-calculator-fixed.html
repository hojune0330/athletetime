<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì „ë¬¸ í›ˆë ¨ í˜ì´ìŠ¤ ê³„ì‚°ê¸° | Athlete Time</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .training-zone-easy { 
      background: linear-gradient(135deg, #10b981, #059669); 
    }
    .training-zone-marathon { 
      background: linear-gradient(135deg, #3b82f6, #2563eb); 
    }
    .training-zone-threshold { 
      background: linear-gradient(135deg, #f59e0b, #d97706); 
    }
    .training-zone-interval { 
      background: linear-gradient(135deg, #ef4444, #dc2626); 
    }
    .training-zone-repetition { 
      background: linear-gradient(135deg, #a855f7, #9333ea); 
    }
    
    .phase-card {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .phase-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    }
    
    .intensity-low { 
      border-left: 4px solid #10b981; 
      background: linear-gradient(to right, rgba(16, 185, 129, 0.05), transparent);
    }
    .intensity-medium { 
      border-left: 4px solid #3b82f6; 
      background: linear-gradient(to right, rgba(59, 130, 246, 0.05), transparent);
    }
    .intensity-high { 
      border-left: 4px solid #ef4444; 
      background: linear-gradient(to right, rgba(239, 68, 68, 0.05), transparent);
    }
    .intensity-rest { 
      border-left: 4px solid #6b7280; 
      background: linear-gradient(to right, rgba(107, 114, 128, 0.05), transparent);
    }
  </style>
</head>
<body class="bg-gray-50">
  <div class="max-w-7xl mx-auto p-6">
    <!-- Header -->
    <div class="gradient-bg text-white p-6 rounded-xl mb-6">
      <div class="flex justify-between items-start">
        <div>
          <h1 class="text-3xl font-bold mb-2">ì „ë¬¸ í›ˆë ¨ í˜ì´ìŠ¤ ê³„ì‚°ê¸°</h1>
          <p class="opacity-90">Jack Daniels VDOT ì‹œìŠ¤í…œ ê¸°ë°˜ ê³¼í•™ì  í›ˆë ¨</p>
        </div>
        <button onclick="window.location.href='index.html'" class="bg-white/20 hover:bg-white/30 p-3 rounded-lg transition">
          <i class="fas fa-home text-xl"></i>
        </button>
      </div>
    </div>

    <!-- Step 1: Athlete Profile -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
      <h2 class="text-2xl font-bold mb-6 flex items-center">
        <span class="bg-purple-100 text-purple-600 w-10 h-10 rounded-full flex items-center justify-center mr-3">1</span>
        ì„ ìˆ˜ í”„ë¡œí•„ ì„¤ì •
      </h2>
      
      <div class="grid md:grid-cols-3 gap-6">
        <!-- Basic Info -->
        <div>
          <h3 class="font-semibold mb-3 text-gray-700">ê¸°ë³¸ ì •ë³´</h3>
          
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">ì„±ë³„</label>
            <div class="grid grid-cols-2 gap-2">
              <button onclick="selectGender('male')" id="btn-male" 
                class="p-3 border-2 rounded-lg transition text-center hover:border-purple-500">
                <i class="fas fa-mars text-blue-500 text-xl"></i>
                <div class="text-sm mt-1">ë‚¨ì„±</div>
              </button>
              <button onclick="selectGender('female')" id="btn-female"
                class="p-3 border-2 rounded-lg transition text-center hover:border-purple-500">
                <i class="fas fa-venus text-pink-500 text-xl"></i>
                <div class="text-sm mt-1">ì—¬ì„±</div>
              </button>
            </div>
          </div>
          
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">ì—°ë ¹ëŒ€</label>
            <select id="ageGroup" class="w-full p-2 border rounded-lg">
              <option value="junior">ì£¼ë‹ˆì–´ (18ì„¸ ì´í•˜)</option>
              <option value="senior" selected>ì‹œë‹ˆì–´ (19-39ì„¸)</option>
              <option value="master40">ë§ˆìŠ¤í„°ì¦ˆ 40+ (40-49ì„¸)</option>
              <option value="master50">ë§ˆìŠ¤í„°ì¦ˆ 50+ (50-59ì„¸)</option>
              <option value="master60">ë§ˆìŠ¤í„°ì¦ˆ 60+ (60ì„¸ ì´ìƒ)</option>
            </select>
          </div>
        </div>

        <!-- Training Level -->
        <div>
          <h3 class="font-semibold mb-3 text-gray-700">í›ˆë ¨ ìˆ˜ì¤€</h3>
          
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">ê²½ë ¥</label>
            <select id="experience" class="w-full p-2 border rounded-lg">
              <option value="beginner">ì´ˆê¸‰ (1ë…„ ë¯¸ë§Œ)</option>
              <option value="intermediate" selected>ì¤‘ê¸‰ (1-3ë…„)</option>
              <option value="advanced">ê³ ê¸‰ (3-5ë…„)</option>
              <option value="elite">ì—˜ë¦¬íŠ¸ (5ë…„ ì´ìƒ)</option>
            </select>
          </div>
          
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">ì£¼ê°„ í›ˆë ¨ëŸ‰</label>
            <select id="weeklyVolume" class="w-full p-2 border rounded-lg">
              <option value="low">30km ì´í•˜</option>
              <option value="moderate" selected>30-60km</option>
              <option value="high">60-100km</option>
              <option value="very-high">100km ì´ìƒ</option>
            </select>
          </div>
        </div>

        <!-- Training Pattern -->
        <div>
          <h3 class="font-semibold mb-3 text-gray-700">í›ˆë ¨ íŒ¨í„´</h3>
          
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">í›ˆë ¨ ë¹ˆë„</label>
            <select id="frequency" class="w-full p-2 border rounded-lg">
              <option value="3-4">ì£¼ 3-4íšŒ</option>
              <option value="5-6" selected>ì£¼ 5-6íšŒ</option>
              <option value="7">ì£¼ 7íšŒ</option>
              <option value="double">2íšŒ/ì¼ (ì—˜ë¦¬íŠ¸)</option>
            </select>
          </div>
          
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">í˜„ì¬ í›ˆë ¨ ë‹¨ê³„</label>
            <select id="trainingPhase" class="w-full p-2 border rounded-lg">
              <option value="base">ê¸°ì´ˆ ì²´ë ¥ê¸°</option>
              <option value="build" selected>ì „ë¬¸ ì²´ë ¥ê¸°</option>
              <option value="peak">í”¼í‚¹ ë‹¨ê³„</option>
              <option value="taper">í…Œì´í¼ë§</option>
              <option value="recovery">íšŒë³µê¸°</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 2: Performance Input -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
      <h2 class="text-2xl font-bold mb-6 flex items-center">
        <span class="bg-purple-100 text-purple-600 w-10 h-10 rounded-full flex items-center justify-center mr-3">2</span>
        ê¸°ì¤€ ê¸°ë¡ ì…ë ¥
      </h2>
      
      <div class="grid md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm font-medium mb-2">ì¢…ëª© ì„ íƒ</label>
          <select id="eventDistance" class="w-full p-3 border rounded-lg mb-4">
            <option value="">ì¢…ëª©ì„ ì„ íƒí•˜ì„¸ìš”</option>
            <option value="800">800m</option>
            <option value="1500">1500m (1.5km)</option>
            <option value="3000">3000m (3km)</option>
            <option value="5000">5000m (5km)</option>
            <option value="10000">10000m (10km)</option>
            <option value="21097.5">í•˜í”„ë§ˆë¼í†¤ (21.0975km)</option>
            <option value="42195">í’€ë§ˆë¼í†¤ (42.195km)</option>
          </select>
        </div>
        
        <div>
          <label class="block text-sm font-medium mb-2">ê¸°ë¡ ì…ë ¥</label>
          <div class="grid grid-cols-3 gap-2">
            <input type="number" id="hours" placeholder="ì‹œ" min="0" max="23" 
              class="p-3 border rounded-lg text-center">
            <input type="number" id="minutes" placeholder="ë¶„" min="0" max="59" 
              class="p-3 border rounded-lg text-center">
            <input type="number" id="seconds" placeholder="ì´ˆ" min="0" max="59" step="0.1"
              class="p-3 border rounded-lg text-center">
          </div>
        </div>
      </div>
      
      <button onclick="calculateTraining()" 
        class="mt-6 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-8 py-3 rounded-lg font-semibold hover:shadow-lg transition">
        <i class="fas fa-calculator mr-2"></i>í›ˆë ¨ ê³„íš ìƒì„±
      </button>
    </div>

    <!-- Step 3: Special Conditions -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
      <h2 class="text-2xl font-bold mb-6 flex items-center">
        <span class="bg-purple-100 text-purple-600 w-10 h-10 rounded-full flex items-center justify-center mr-3">3</span>
        íŠ¹ë³„ ê³ ë ¤ì‚¬í•­ (ì„ íƒ)
      </h2>
      
      <div class="grid md:grid-cols-3 gap-4">
        <label class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer">
          <input type="checkbox" id="injury_recovery" class="mr-3 w-5 h-5">
          <div>
            <div class="font-medium">ë¶€ìƒ íšŒë³µì¤‘</div>
            <div class="text-xs text-gray-600">í›ˆë ¨ëŸ‰ 60%, ê°•ë„ 70%</div>
          </div>
        </label>
        
        <label class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer">
          <input type="checkbox" id="high_fatigue" class="mr-3 w-5 h-5">
          <div>
            <div class="font-medium">í”¼ë¡œ ëˆ„ì </div>
            <div class="text-xs text-gray-600">íšŒë³µ ìœ„ì£¼ í”„ë¡œê·¸ë¨</div>
          </div>
        </label>
        
        <label class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer">
          <input type="checkbox" id="altitude" class="mr-3 w-5 h-5">
          <div>
            <div class="font-medium">ê³ ì§€ëŒ€ í›ˆë ¨</div>
            <div class="text-xs text-gray-600">í˜ì´ìŠ¤ 3% ì¡°ì •</div>
          </div>
        </label>
        
        <label class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer">
          <input type="checkbox" id="hot_weather" class="mr-3 w-5 h-5">
          <div>
            <div class="font-medium">ê³ ì˜¨ë‹¤ìŠµ í™˜ê²½</div>
            <div class="text-xs text-gray-600">í˜ì´ìŠ¤ 5% ì¡°ì •</div>
          </div>
        </label>
        
        <label class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer">
          <input type="checkbox" id="weight_loss" class="mr-3 w-5 h-5">
          <div>
            <div class="font-medium">ì²´ì¤‘ ê°ëŸ‰ ëª©í‘œ</div>
            <div class="text-xs text-gray-600">ìœ ì‚°ì†Œ ë¹„ì¤‘ ì¦ê°€</div>
          </div>
        </label>
        
        <label class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer">
          <input type="checkbox" id="morning_only" class="mr-3 w-5 h-5">
          <div>
            <div class="font-medium">ì•„ì¹¨ í›ˆë ¨ë§Œ ê°€ëŠ¥</div>
            <div class="text-xs text-gray-600">ì›Œë°ì—… ì‹œê°„ ì¦ê°€</div>
          </div>
        </label>
      </div>
    </div>

    <!-- Results Section -->
    <div id="resultsSection" class="hidden">
      <!-- VDOT Score -->
      <div class="bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl p-6 mb-6">
        <div class="grid md:grid-cols-3 gap-6">
          <div class="text-center">
            <div class="text-5xl font-bold" id="vdotScore">--</div>
            <div class="text-sm opacity-90 mt-1">VDOT ì ìˆ˜</div>
            <div class="text-xs opacity-75 mt-1" id="vdotAdjustment"></div>
          </div>
          <div class="text-center">
            <div class="text-3xl font-semibold" id="performanceLevel">--</div>
            <div class="text-sm opacity-90 mt-1">ìˆ˜ì¤€ í‰ê°€</div>
          </div>
          <div class="text-center">
            <div class="text-2xl" id="predictedVO2max">--</div>
            <div class="text-sm opacity-90 mt-1">ì˜ˆìƒ VOâ‚‚max (ml/kg/min)</div>
          </div>
        </div>
      </div>

      <!-- Training Zones -->
      <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
        <h3 class="text-xl font-bold mb-4">í›ˆë ¨ êµ¬ì—­ë³„ í˜ì´ìŠ¤</h3>
        
        <div class="space-y-3">
          <!-- Easy Zone -->
          <div class="training-zone-easy text-white p-4 rounded-lg">
            <div class="flex justify-between items-center">
              <div>
                <div class="font-bold text-lg">Easy (E) - íšŒë³µ/ê¸°ì´ˆì§€êµ¬ë ¥</div>
                <div class="text-sm opacity-90">ìµœëŒ€ì‹¬ë°•ìˆ˜ì˜ 65-79% | í¸ì•ˆí•œ ëŒ€í™” ê°€ëŠ¥</div>
              </div>
              <div class="text-2xl font-bold" id="easyPace">--</div>
            </div>
          </div>
          
          <!-- Marathon Zone -->
          <div class="training-zone-marathon text-white p-4 rounded-lg">
            <div class="flex justify-between items-center">
              <div>
                <div class="font-bold text-lg">Marathon (M) - ë§ˆë¼í†¤ í˜ì´ìŠ¤</div>
                <div class="text-sm opacity-90">ìµœëŒ€ì‹¬ë°•ìˆ˜ì˜ 80-85% | 2-3ì‹œê°„ ìœ ì§€ ê°€ëŠ¥</div>
              </div>
              <div class="text-2xl font-bold" id="marathonPace">--</div>
            </div>
          </div>
          
          <!-- Threshold Zone -->
          <div class="training-zone-threshold text-white p-4 rounded-lg">
            <div class="flex justify-between items-center">
              <div>
                <div class="font-bold text-lg">Threshold (T) - ì –ì‚°ì—­ì¹˜</div>
                <div class="text-sm opacity-90">ìµœëŒ€ì‹¬ë°•ìˆ˜ì˜ 85-88% | 20-60ë¶„ ìœ ì§€ ê°€ëŠ¥</div>
              </div>
              <div class="text-2xl font-bold" id="thresholdPace">--</div>
            </div>
          </div>
          
          <!-- Interval Zone -->
          <div class="training-zone-interval text-white p-4 rounded-lg">
            <div class="flex justify-between items-center">
              <div>
                <div class="font-bold text-lg">Interval (I) - VOâ‚‚max í–¥ìƒ</div>
                <div class="text-sm opacity-90">ìµœëŒ€ì‹¬ë°•ìˆ˜ì˜ 95-100% | 3-8ë¶„ ë°˜ë³µ</div>
              </div>
              <div class="text-2xl font-bold" id="intervalPace">--</div>
            </div>
          </div>
          
          <!-- Repetition Zone -->
          <div class="training-zone-repetition text-white p-4 rounded-lg">
            <div class="flex justify-between items-center">
              <div>
                <div class="font-bold text-lg">Repetition (R) - ìŠ¤í”¼ë“œ/í¼</div>
                <div class="text-sm opacity-90">ìµœëŒ€ ìŠ¤í”¼ë“œì˜ 95%+ | ì™„ì „ íšŒë³µ í•„ìš”</div>
              </div>
              <div class="text-2xl font-bold" id="repetitionPace">--</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Weekly Plan -->
      <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
        <h3 class="text-xl font-bold mb-4">ì£¼ê°„ ë§ˆì´í¬ë¡œì‚¬ì´í´ (7ì¼)</h3>
        <div id="weeklyPlan" class="grid md:grid-cols-7 gap-2">
          <!-- Weekly plan will be inserted here -->
        </div>
      </div>

      <!-- Mesocycle Plan -->
      <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
        <h3 class="text-xl font-bold mb-4">ë©”ì¡°ì‚¬ì´í´ (4ì£¼ ë¸”ë¡)</h3>
        <div id="mesocyclePlan" class="grid md:grid-cols-4 gap-4">
          <!-- 4-week mesocycle will be inserted here -->
        </div>
      </div>

      <!-- Specific Workouts -->
      <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
        <h3 class="text-xl font-bold mb-4">í•µì‹¬ í›ˆë ¨ ì„¸ì…˜</h3>
        <div id="workoutDetails" class="grid md:grid-cols-2 gap-4">
          <!-- Detailed workouts will be inserted here -->
        </div>
      </div>

      <!-- Recommendations -->
      <div class="bg-white rounded-xl shadow-lg p-6">
        <h3 class="text-xl font-bold mb-4">ì „ë¬¸ê°€ ê¶Œì¥ì‚¬í•­</h3>
        <div id="recommendations" class="grid md:grid-cols-2 gap-4">
          <!-- Recommendations will be inserted here -->
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="text-center mt-8 text-gray-600">
      <p class="text-sm">ì œì‘ì: ì¥í˜¸ì¤€ ì½”ì¹˜</p>
      <p class="text-xs mt-1">Â© 2024 Athlete Time - ê³¼í•™ì  í›ˆë ¨ì˜ ì‹œì‘</p>
    </div>
  </div>

  <script>
    // User profile
    let userProfile = {
      gender: null,
      ageGroup: null,
      experience: null,
      weeklyVolume: null,
      frequency: null,
      trainingPhase: null,
      conditions: {},
      vdot: 0,
      adjustments: {
        pace: 1.0,
        volume: 1.0,
        intensity: 1.0
      }
    };

    // VDOT tables based on Jack Daniels' Running Formula (ê±°ë¦¬(m): ì‹œê°„(ì´ˆ))
    const vdotTables = {
      30: { 800: 316, 1500: 681, 3000: 1520, 5000: 2680, 10000: 5560, 21097.5: 12240, 42195: 25380 },
      35: { 800: 279, 1500: 598, 3000: 1330, 5000: 2340, 10000: 4860, 21097.5: 10680, 42195: 22140 },
      40: { 800: 249, 1500: 532, 3000: 1178, 5000: 2070, 10000: 4290, 21097.5: 9420, 42195: 19500 },
      45: { 800: 224, 1500: 477, 3000: 1053, 5000: 1845, 10000: 3825, 21097.5: 8400, 42195: 17400 },
      50: { 800: 203, 1500: 431, 3000: 948, 5000: 1658, 10000: 3435, 21097.5: 7530, 42195: 15600 },
      55: { 800: 185, 1500: 392, 3000: 859, 5000: 1500, 10000: 3105, 21097.5: 6810, 42195: 14100 },
      60: { 800: 169, 1500: 357, 3000: 781, 5000: 1362, 10000: 2820, 21097.5: 6180, 42195: 12780 },
      65: { 800: 155, 1500: 327, 3000: 713, 5000: 1242, 10000: 2565, 21097.5: 5625, 42195: 11625 },
      70: { 800: 143, 1500: 301, 3000: 654, 5000: 1137, 10000: 2346, 21097.5: 5145, 42195: 10620 },
      75: { 800: 132, 1500: 277, 3000: 601, 5000: 1044, 10000: 2154, 21097.5: 4725, 42195: 9750 },
      80: { 800: 122, 1500: 256, 3000: 554, 5000: 961, 10000: 1983, 21097.5: 4350, 42195: 8970 },
      85: { 800: 113, 1500: 237, 3000: 512, 5000: 888, 10000: 1830, 21097.5: 4020, 42195: 8280 }
    };

    function selectGender(gender) {
      userProfile.gender = gender;
      
      // Update UI
      document.getElementById('btn-male').classList.remove('border-purple-500', 'bg-purple-50');
      document.getElementById('btn-female').classList.remove('border-purple-500', 'bg-purple-50');
      
      if (gender === 'male') {
        document.getElementById('btn-male').classList.add('border-purple-500', 'bg-purple-50');
      } else {
        document.getElementById('btn-female').classList.add('border-purple-500', 'bg-purple-50');
      }
    }

    function calculateVDOT(distanceMeters, timeSeconds) {
      // Find closest VDOT value
      let closestVDOT = 30;
      let minDiff = Infinity;
      
      for (const [vdot, times] of Object.entries(vdotTables)) {
        if (times[distanceMeters]) {
          const diff = Math.abs(times[distanceMeters] - timeSeconds);
          if (diff < minDiff) {
            minDiff = diff;
            closestVDOT = parseInt(vdot);
          }
        }
      }
      
      // Interpolate for more accuracy
      const vdotKeys = Object.keys(vdotTables).map(v => parseInt(v)).sort((a, b) => a - b);
      for (let i = 0; i < vdotKeys.length - 1; i++) {
        const lowerVDOT = vdotKeys[i];
        const upperVDOT = vdotKeys[i + 1];
        
        if (vdotTables[lowerVDOT][distanceMeters] && vdotTables[upperVDOT][distanceMeters]) {
          const lowerTime = vdotTables[lowerVDOT][distanceMeters];
          const upperTime = vdotTables[upperVDOT][distanceMeters];
          
          if (timeSeconds <= lowerTime && timeSeconds >= upperTime) {
            const ratio = (lowerTime - timeSeconds) / (lowerTime - upperTime);
            closestVDOT = lowerVDOT + (upperVDOT - lowerVDOT) * ratio;
            break;
          }
        }
      }
      
      return Math.round(closestVDOT * 10) / 10;
    }

    function calculateTrainingPaces(vdot) {
      // Jack Daniels ê³µì‹ VDOT í˜ì´ìŠ¤ í…Œì´ë¸” (ì´ˆ/km)
      const vdotPaceTable = {
        30: { easy: { min: 417, max: 458 }, marathon: 374, threshold: 354, interval: 320, repetition: 296 },
        35: { easy: { min: 372, max: 409 }, marathon: 333, threshold: 315, interval: 285, repetition: 264 },
        40: { easy: { min: 337, max: 370 }, marathon: 301, threshold: 285, interval: 258, repetition: 239 },
        45: { easy: { min: 308, max: 339 }, marathon: 275, threshold: 260, interval: 236, repetition: 218 },
        50: { easy: { min: 284, max: 312 }, marathon: 253, threshold: 239, interval: 217, repetition: 201 },
        55: { easy: { min: 263, max: 290 }, marathon: 235, threshold: 222, interval: 201, repetition: 186 },
        60: { easy: { min: 246, max: 270 }, marathon: 219, threshold: 207, interval: 188, repetition: 174 },
        65: { easy: { min: 230, max: 253 }, marathon: 205, threshold: 194, interval: 176, repetition: 163 },
        70: { easy: { min: 217, max: 238 }, marathon: 193, threshold: 182, interval: 165, repetition: 153 },
        75: { easy: { min: 205, max: 225 }, marathon: 182, threshold: 172, interval: 156, repetition: 144 },
        80: { easy: { min: 194, max: 213 }, marathon: 172, threshold: 163, interval: 148, repetition: 137 },
        85: { easy: { min: 185, max: 203 }, marathon: 164, threshold: 155, interval: 140, repetition: 130 }
      };
      
      // VDOT ê°’ì— ê°€ì¥ ê°€ê¹Œìš´ í…Œì´ë¸” ê°’ ì°¾ê¸° ë° ë³´ê°„
      const vdotKeys = Object.keys(vdotPaceTable).map(k => parseInt(k)).sort((a, b) => a - b);
      let lowerVdot = 30, upperVdot = 30;
      
      for (let i = 0; i < vdotKeys.length - 1; i++) {
        if (vdot >= vdotKeys[i] && vdot <= vdotKeys[i + 1]) {
          lowerVdot = vdotKeys[i];
          upperVdot = vdotKeys[i + 1];
          break;
        }
      }
      
      if (vdot < 30) {
        lowerVdot = upperVdot = 30;
      } else if (vdot > 85) {
        lowerVdot = upperVdot = 85;
      }
      
      // ì„ í˜• ë³´ê°„ìœ¼ë¡œ ì •í™•í•œ í˜ì´ìŠ¤ ê³„ì‚°
      let paces;
      if (lowerVdot === upperVdot) {
        paces = JSON.parse(JSON.stringify(vdotPaceTable[lowerVdot]));
      } else {
        const ratio = (vdot - lowerVdot) / (upperVdot - lowerVdot);
        const lowerPaces = vdotPaceTable[lowerVdot];
        const upperPaces = vdotPaceTable[upperVdot];
        
        paces = {
          easy: {
            min: Math.round(lowerPaces.easy.min - (lowerPaces.easy.min - upperPaces.easy.min) * ratio),
            max: Math.round(lowerPaces.easy.max - (lowerPaces.easy.max - upperPaces.easy.max) * ratio)
          },
          marathon: Math.round(lowerPaces.marathon - (lowerPaces.marathon - upperPaces.marathon) * ratio),
          threshold: Math.round(lowerPaces.threshold - (lowerPaces.threshold - upperPaces.threshold) * ratio),
          interval: Math.round(lowerPaces.interval - (lowerPaces.interval - upperPaces.interval) * ratio),
          repetition: Math.round(lowerPaces.repetition - (lowerPaces.repetition - upperPaces.repetition) * ratio)
        };
      }
      
      // ì¡°ê±´ì— ë”°ë¥¸ ì¡°ì • ì ìš©
      const adj = userProfile.adjustments.pace;
      if (adj !== 1.0) {
        Object.keys(paces).forEach(key => {
          if (key === 'easy') {
            paces.easy.min = Math.round(paces.easy.min * adj);
            paces.easy.max = Math.round(paces.easy.max * adj);
          } else {
            paces[key] = Math.round(paces[key] * adj);
          }
        });
      }
      
      return paces;
    }

    function formatPace(secondsPerKm) {
      const minutes = Math.floor(secondsPerKm / 60);
      const seconds = Math.floor(secondsPerKm % 60);
      return `${minutes}:${seconds.toString().padStart(2, '0')}/km`;
    }

    function getPerformanceLevel(vdot) {
      if (vdot >= 75) return "ì—˜ë¦¬íŠ¸";
      if (vdot >= 65) return "ì¤€ì—˜ë¦¬íŠ¸";
      if (vdot >= 55) return "ìƒê¸‰ì";
      if (vdot >= 45) return "ì¤‘ê¸‰ì";
      if (vdot >= 35) return "ì´ˆê¸‰ì";
      return "ì…ë¬¸ì";
    }

    function calculateAdjustments() {
      // Reset adjustments
      userProfile.adjustments = {
        pace: 1.0,
        volume: 1.0,
        intensity: 1.0
      };
      
      // Age group adjustments
      switch(userProfile.ageGroup) {
        case 'junior':
          userProfile.adjustments.volume *= 0.8;
          userProfile.adjustments.intensity *= 0.9;
          break;
        case 'master40':
          userProfile.adjustments.pace *= 1.02;
          userProfile.adjustments.volume *= 0.95;
          break;
        case 'master50':
          userProfile.adjustments.pace *= 1.05;
          userProfile.adjustments.volume *= 0.9;
          break;
        case 'master60':
          userProfile.adjustments.pace *= 1.08;
          userProfile.adjustments.volume *= 0.85;
          userProfile.adjustments.intensity *= 0.9;
          break;
      }
      
      // Experience level adjustments (ì¤‘ê¸‰ìëŠ” ì¡°ì • ì—†ìŒ)
      switch(userProfile.experience) {
        case 'beginner':
          userProfile.adjustments.volume *= 0.7;
          userProfile.adjustments.intensity *= 0.85;
          break;
        case 'advanced':
          userProfile.adjustments.volume *= 1.1;
          userProfile.adjustments.intensity *= 1.05;
          break;
        case 'elite':
          userProfile.adjustments.volume *= 1.2;
          userProfile.adjustments.intensity *= 1.1;
          break;
      }
      
      // Training phase adjustments
      switch(userProfile.trainingPhase) {
        case 'base':
          userProfile.adjustments.volume *= 1.1;
          userProfile.adjustments.intensity *= 0.85;
          break;
        case 'peak':
          userProfile.adjustments.volume *= 0.9;
          userProfile.adjustments.intensity *= 1.1;
          break;
        case 'taper':
          userProfile.adjustments.volume *= 0.5;
          userProfile.adjustments.intensity *= 1.0; // ê°•ë„ ìœ ì§€
          break;
        case 'recovery':
          userProfile.adjustments.volume *= 0.6;
          userProfile.adjustments.intensity *= 0.7;
          break;
      }
      
      // Special conditions
      if (document.getElementById('injury_recovery').checked) {
        userProfile.adjustments.volume *= 0.6;
        userProfile.adjustments.intensity *= 0.7;
        userProfile.adjustments.pace *= 1.1;
      }
      
      if (document.getElementById('high_fatigue').checked) {
        userProfile.adjustments.volume *= 0.8;
        userProfile.adjustments.intensity *= 0.85;
      }
      
      if (document.getElementById('altitude').checked) {
        userProfile.adjustments.pace *= 1.03;
        userProfile.adjustments.intensity *= 0.9;
      }
      
      if (document.getElementById('hot_weather').checked) {
        userProfile.adjustments.pace *= 1.05;
      }
    }

    function generateWeeklyPlan(vdot) {
      const weeklyPlan = document.getElementById('weeklyPlan');
      const frequency = document.getElementById('frequency').value;
      const phase = document.getElementById('trainingPhase').value;
      
      let days = [];
      
      // Generate appropriate weekly plan based on frequency and phase
      if (frequency === '3-4') {
        days = [
          { day: 'ì›”', type: 'Easy', intensity: 'intensity-low', duration: '40-50ë¶„', description: 'E í˜ì´ìŠ¤ íšŒë³µëŸ°' },
          { day: 'í™”', type: 'Rest', intensity: 'intensity-rest', duration: 'íœ´ì‹', description: 'ì™„ì „ íœ´ì‹ ë˜ëŠ” í¬ë¡œìŠ¤íŠ¸ë ˆì´ë‹' },
          { day: 'ìˆ˜', type: 'Interval', intensity: 'intensity-high', duration: '45ë¶„', description: '400m x 6-8 @ I í˜ì´ìŠ¤' },
          { day: 'ëª©', type: 'Rest', intensity: 'intensity-rest', duration: 'íœ´ì‹', description: 'ì™„ì „ íœ´ì‹' },
          { day: 'ê¸ˆ', type: 'Tempo', intensity: 'intensity-medium', duration: '35ë¶„', description: '20ë¶„ T í˜ì´ìŠ¤' },
          { day: 'í† ', type: 'Rest', intensity: 'intensity-rest', duration: 'íœ´ì‹', description: 'ì™„ì „ íœ´ì‹' },
          { day: 'ì¼', type: 'Long', intensity: 'intensity-low', duration: '60-90ë¶„', description: 'E í˜ì´ìŠ¤ ì¥ê±°ë¦¬' }
        ];
      } else if (frequency === '5-6') {
        days = [
          { day: 'ì›”', type: 'Easy', intensity: 'intensity-low', duration: '50-60ë¶„', description: 'E í˜ì´ìŠ¤ íšŒë³µëŸ°' },
          { day: 'í™”', type: 'Interval', intensity: 'intensity-high', duration: '50ë¶„', description: '1000m x 4-5 @ I í˜ì´ìŠ¤' },
          { day: 'ìˆ˜', type: 'Easy', intensity: 'intensity-low', duration: '40ë¶„', description: 'E í˜ì´ìŠ¤ + ìŠ¤íŠ¸ë¼ì´ë“œ' },
          { day: 'ëª©', type: 'Tempo', intensity: 'intensity-medium', duration: '45ë¶„', description: '2 x 15ë¶„ T í˜ì´ìŠ¤' },
          { day: 'ê¸ˆ', type: 'Easy', intensity: 'intensity-low', duration: '30ë¶„', description: 'íšŒë³µ ì¡°ê¹…' },
          { day: 'í† ', type: 'Race Pace', intensity: 'intensity-medium', duration: '40ë¶„', description: 'ëª©í‘œ ë ˆì´ìŠ¤ í˜ì´ìŠ¤' },
          { day: 'ì¼', type: 'Long', intensity: 'intensity-low', duration: '90-120ë¶„', description: 'E/M í˜ì´ìŠ¤ ì¥ê±°ë¦¬' }
        ];
      } else if (frequency === '7') {
        days = [
          { day: 'ì›”', type: 'Easy+', intensity: 'intensity-low', duration: '60ë¶„', description: 'E í˜ì´ìŠ¤ + ì–¸ë•' },
          { day: 'í™”', type: 'Interval', intensity: 'intensity-high', duration: '60ë¶„', description: '1200m x 4-5 @ I í˜ì´ìŠ¤' },
          { day: 'ìˆ˜', type: 'Recovery', intensity: 'intensity-low', duration: '40ë¶„', description: 'íšŒë³µ ì¡°ê¹…' },
          { day: 'ëª©', type: 'Threshold', intensity: 'intensity-medium', duration: '50ë¶„', description: '30ë¶„ T í˜ì´ìŠ¤' },
          { day: 'ê¸ˆ', type: 'Easy', intensity: 'intensity-low', duration: '45ë¶„', description: 'E í˜ì´ìŠ¤' },
          { day: 'í† ', type: 'Repetition', intensity: 'intensity-high', duration: '45ë¶„', description: '200m x 8-10 @ R í˜ì´ìŠ¤' },
          { day: 'ì¼', type: 'Long', intensity: 'intensity-low', duration: '120-150ë¶„', description: 'Progressive ì¥ê±°ë¦¬' }
        ];
      } else { // double sessions
        days = [
          { day: 'ì›”', type: 'AM: Easy\nPM: Recovery', intensity: 'intensity-low', duration: 'AM: 50ë¶„\nPM: 30ë¶„', description: 'ì´ì¤‘ íšŒë³µ' },
          { day: 'í™”', type: 'AM: Interval\nPM: Easy', intensity: 'intensity-high', duration: 'AM: 60ë¶„\nPM: 30ë¶„', description: 'í•µì‹¬ ì„¸ì…˜ + íšŒë³µ' },
          { day: 'ìˆ˜', type: 'AM: Easy', intensity: 'intensity-low', duration: 'AM: 60ë¶„', description: 'ì‹±ê¸€ ì„¸ì…˜' },
          { day: 'ëª©', type: 'AM: Threshold\nPM: Easy', intensity: 'intensity-medium', duration: 'AM: 50ë¶„\nPM: 30ë¶„', description: 'T í˜ì´ìŠ¤ + íšŒë³µ' },
          { day: 'ê¸ˆ', type: 'AM: Recovery', intensity: 'intensity-low', duration: 'AM: 40ë¶„', description: 'íšŒë³µ ì¡°ê¹…' },
          { day: 'í† ', type: 'AM: Repetition', intensity: 'intensity-high', duration: 'AM: 50ë¶„', description: 'ìŠ¤í”¼ë“œ ì„¸ì…˜' },
          { day: 'ì¼', type: 'AM: Long\nPM: Recovery', intensity: 'intensity-low', duration: 'AM: 120ë¶„\nPM: 20ë¶„', description: 'ì¥ê±°ë¦¬ + ì¿¨ë‹¤ìš´' }
        ];
      }
      
      // Apply phase-specific modifications
      if (phase === 'base') {
        days = days.map(d => {
          if (d.type.includes('Interval') || d.type.includes('Repetition')) {
            d.type = d.type.replace(/Interval|Repetition/, 'Fartlek');
            d.intensity = 'intensity-medium';
            d.description = 'ë³€ì†ì£¼ (êµ¬ì¡°í™”ë˜ì§€ ì•Šì€)';
          }
          return d;
        });
      } else if (phase === 'taper') {
        days = days.map(d => {
          d.duration = d.duration.replace(/\d+/g, match => Math.round(parseInt(match) * 0.6));
          return d;
        });
      }
      
      // Render weekly plan
      weeklyPlan.innerHTML = days.map(d => `
        <div class="${d.intensity} p-3 rounded-lg">
          <div class="font-bold text-center mb-1">${d.day}</div>
          <div class="text-sm font-semibold">${d.type}</div>
          <div class="text-xs text-gray-600 mt-1">${d.duration}</div>
          <div class="text-xs text-gray-500 mt-1">${d.description}</div>
        </div>
      `).join('');
    }

    function generateMesocycle() {
      const mesocyclePlan = document.getElementById('mesocyclePlan');
      const phase = document.getElementById('trainingPhase').value;
      
      let weeks = [];
      
      switch(phase) {
        case 'base':
          weeks = [
            { week: '1ì£¼ì°¨', focus: 'ì ì‘', volume: '70%', keyWorkout: 'Easy ëŸ° ìœ„ì£¼, ì£¼ 2íšŒ Fartlek' },
            { week: '2ì£¼ì°¨', focus: 'ë³¼ë¥¨ ì¦ê°€', volume: '85%', keyWorkout: 'Long Run 10% ì¦ê°€, Tempo ë„ì…' },
            { week: '3ì£¼ì°¨', focus: 'ê°•ë„ ë„ì…', volume: '100%', keyWorkout: 'Threshold 20ë¶„ x 2íšŒ, Long Run ìœ ì§€' },
            { week: '4ì£¼ì°¨', focus: 'íšŒë³µ', volume: '60%', keyWorkout: 'Easy ëŸ° ìœ„ì£¼, í…ŒìŠ¤íŠ¸ íƒ€ì„íŠ¸ë¼ì´ì–¼' }
          ];
          break;
        case 'build':
          weeks = [
            { week: '1ì£¼ì°¨', focus: 'VOâ‚‚max', volume: '80%', keyWorkout: '800-1000m x 4-5 @ I pace, Tempo 25ë¶„' },
            { week: '2ì£¼ì°¨', focus: 'ì –ì‚°ì—­ì¹˜', volume: '90%', keyWorkout: 'Threshold 30ë¶„ ì—°ì†, 400m x 8 @ R pace' },
            { week: '3ì£¼ì°¨', focus: 'ì¢…í•©', volume: '100%', keyWorkout: '1200-1600m x 3-4 @ I pace, Long Run w/ M pace' },
            { week: '4ì£¼ì°¨', focus: 'íšŒë³µ/í…ŒìŠ¤íŠ¸', volume: '70%', keyWorkout: '3-5km í…ŒìŠ¤íŠ¸, Easy ëŸ°' }
          ];
          break;
        case 'peak':
          weeks = [
            { week: '1ì£¼ì°¨', focus: 'ë ˆì´ìŠ¤ ì‹œë®¬ë ˆì´ì…˜', volume: '90%', keyWorkout: 'ëª©í‘œ ê±°ë¦¬ 70-80% @ ëª©í‘œ í˜ì´ìŠ¤' },
            { week: '2ì£¼ì°¨', focus: 'ìŠ¤í”¼ë“œ', volume: '80%', keyWorkout: '200-400m x 8-10 @ R pace, ì§§ì€ Tempo' },
            { week: '3ì£¼ì°¨', focus: 'ë ˆì´ìŠ¤ ì¤€ë¹„', volume: '70%', keyWorkout: 'ëª©í‘œ í˜ì´ìŠ¤ í™•ì¸, ì „ëµ ì ê²€' },
            { week: '4ì£¼ì°¨', focus: 'ëŒ€íšŒ', volume: '50%', keyWorkout: 'ëŒ€íšŒ 3ì¼ì „ë¶€í„° í…Œì´í¼ë§' }
          ];
          break;
        default:
          weeks = [
            { week: '1ì£¼ì°¨', focus: 'ê¸°ì´ˆ', volume: '70%', keyWorkout: 'Easy ëŸ° ìœ„ì£¼' },
            { week: '2ì£¼ì°¨', focus: 'ë°œì „', volume: '85%', keyWorkout: 'ë‹¤ì–‘í•œ í˜ì´ìŠ¤ ê²½í—˜' },
            { week: '3ì£¼ì°¨', focus: 'ë„ì „', volume: '100%', keyWorkout: 'í•µì‹¬ ì„¸ì…˜ ì§‘ì¤‘' },
            { week: '4ì£¼ì°¨', focus: 'íšŒë³µ', volume: '60%', keyWorkout: 'ë‹¤ìŒ ì‚¬ì´í´ ì¤€ë¹„' }
          ];
      }
      
      mesocyclePlan.innerHTML = weeks.map((w, i) => `
        <div class="phase-card border-2 border-gray-200 rounded-lg p-4">
          <h4 class="font-bold text-lg mb-2">${w.week}</h4>
          <div class="text-sm text-gray-600 mb-2">
            <span class="font-semibold">ì´ˆì :</span> ${w.focus}
          </div>
          <div class="text-sm text-gray-600 mb-2">
            <span class="font-semibold">ë³¼ë¥¨:</span> ${w.volume}
          </div>
          <div class="text-xs text-gray-500">
            <span class="font-semibold">í•µì‹¬í›ˆë ¨:</span> ${w.keyWorkout}
          </div>
        </div>
      `).join('');
    }

    function generateWorkoutDetails(vdot, paces) {
      const workoutDetails = document.getElementById('workoutDetails');
      const experience = document.getElementById('experience').value;
      
      let workouts = [];
      
      // Interval workout
      const intervalWorkout = {
        title: 'VOâ‚‚max ì¸í„°ë²Œ',
        warmup: '20ë¶„ Easy + 4x100m ìŠ¤íŠ¸ë¼ì´ë“œ',
        main: experience === 'beginner' ? '400m x 6-8 @ I í˜ì´ìŠ¤ (íšŒë³µ 2-3ë¶„)' :
              experience === 'intermediate' ? '800m x 5-6 @ I í˜ì´ìŠ¤ (íšŒë³µ 2-3ë¶„)' :
              experience === 'advanced' ? '1000m x 5 @ I í˜ì´ìŠ¤ (íšŒë³µ 2ë¶„)' :
              '1200-1600m x 4-5 @ I í˜ì´ìŠ¤ (íšŒë³µ 90ì´ˆ)',
        cooldown: '15ë¶„ Easy + ìŠ¤íŠ¸ë ˆì¹­',
        tips: 'ì¼ì •í•œ í˜ì´ìŠ¤ ìœ ì§€, ë§ˆì§€ë§‰ ë°˜ë³µê¹Œì§€ ì—¬ìœ  ìˆê²Œ',
        pace: formatPace(paces.interval)
      };
      
      // Threshold workout
      const thresholdWorkout = {
        title: 'ì –ì‚°ì—­ì¹˜ í›ˆë ¨',
        warmup: '15ë¶„ Easy + ë™ì  ìŠ¤íŠ¸ë ˆì¹­',
        main: experience === 'beginner' ? '20ë¶„ ì—°ì† @ T í˜ì´ìŠ¤' :
              experience === 'intermediate' ? '2 x 15ë¶„ @ T í˜ì´ìŠ¤ (íœ´ì‹ 1ë¶„)' :
              experience === 'advanced' ? '30ë¶„ ì—°ì† @ T í˜ì´ìŠ¤' :
              '2 x 20ë¶„ @ T í˜ì´ìŠ¤ (íœ´ì‹ 1ë¶„)',
        cooldown: '10ë¶„ Easy',
        tips: 'í¸ì•ˆí•˜ê²Œ í˜ë“  ì •ë„, ì§§ì€ ë¬¸ì¥ ëŒ€í™” ê°€ëŠ¥',
        pace: formatPace(paces.threshold)
      };
      
      // Long run workout
      const longRunWorkout = {
        title: 'ì¥ê±°ë¦¬ í›ˆë ¨',
        warmup: 'ì²œì²œíˆ ì‹œì‘',
        main: experience === 'beginner' ? '60-75ë¶„ @ E í˜ì´ìŠ¤' :
              experience === 'intermediate' ? '90-105ë¶„ @ E/M í˜ì´ìŠ¤' :
              experience === 'advanced' ? '105-120ë¶„, ë§ˆì§€ë§‰ 20-30ë¶„ M í˜ì´ìŠ¤' :
              '120-150ë¶„ Progressive (Eâ†’Mâ†’T)',
        cooldown: '5-10ë¶„ ë§¤ìš° ì²œì²œíˆ',
        tips: 'ìˆ˜ë¶„ê³¼ ì—ë„ˆì§€ ë³´ì¶©, ì¼ì •í•œ í˜ì´ìŠ¤',
        pace: `${formatPace(paces.easy.max)}-${formatPace(paces.easy.min)}`
      };
      
      // Repetition workout
      const repetitionWorkout = {
        title: 'ìŠ¤í”¼ë“œ/í¼ í›ˆë ¨',
        warmup: '20ë¶„ Easy + ë“œë¦´',
        main: experience === 'beginner' ? '200m x 6-8 @ R í˜ì´ìŠ¤ (ì™„ì „íšŒë³µ)' :
              experience === 'intermediate' ? '400m x 5-6 @ R í˜ì´ìŠ¤ (ì™„ì „íšŒë³µ)' :
              experience === 'advanced' ? '400m x 4 + 200m x 4 @ R í˜ì´ìŠ¤' :
              '600m x 5-6 @ R í˜ì´ìŠ¤ (ì™„ì „íšŒë³µ)',
        cooldown: '15ë¶„ Easy',
        tips: 'í¼ì— ì§‘ì¤‘, ì™„ì „ íšŒë³µ í›„ ë‹¤ìŒ ë°˜ë³µ',
        pace: formatPace(paces.repetition)
      };
      
      workouts = [intervalWorkout, thresholdWorkout, longRunWorkout, repetitionWorkout];
      
      workoutDetails.innerHTML = workouts.map(w => `
        <div class="border rounded-lg p-4">
          <h4 class="font-bold text-lg mb-3 text-purple-700">${w.title}</h4>
          <div class="space-y-2 text-sm">
            <div>
              <span class="font-semibold">ì›Œë°ì—…:</span> ${w.warmup}
            </div>
            <div>
              <span class="font-semibold">ë©”ì¸ì„¸íŠ¸:</span> ${w.main}
            </div>
            <div>
              <span class="font-semibold">ì¿¨ë‹¤ìš´:</span> ${w.cooldown}
            </div>
            <div class="bg-purple-50 p-2 rounded">
              <span class="font-semibold">ëª©í‘œ í˜ì´ìŠ¤:</span> ${w.pace}
            </div>
            <div class="text-xs text-gray-600 italic">
              ğŸ’¡ ${w.tips}
            </div>
          </div>
        </div>
      `).join('');
    }

    function generateRecommendations() {
      const recommendations = document.getElementById('recommendations');
      const recs = [];
      
      // Gender-specific (ì—¬ì„± VDOT í‘œì‹œë¡œ ì¶©ë¶„, í˜ì´ìŠ¤ ì¡°ì •ì€ í•˜ì§€ ì•ŠìŒ)
      if (userProfile.gender === 'female') {
        recs.push({
          title: 'ì—¬ì„± ëŸ¬ë„ˆ ê¶Œì¥ì‚¬í•­',
          items: [
            'ì² ë¶„ ìˆ˜ì¹˜ ì •ê¸° ì²´í¬ (í˜ë¦¬í‹´ 50ng/ml ì´ìƒ ìœ ì§€)',
            'ì›”ê²½ ì£¼ê¸° ê³ ë ¤í•œ í›ˆë ¨ ê°•ë„ ì¡°ì ˆ',
            'ì¹¼ìŠ˜ê³¼ ë¹„íƒ€ë¯¼ D ì¶©ë¶„íˆ ì„­ì·¨',
            'ê³¨ë°€ë„ ê²€ì‚¬ ì—° 1íšŒ'
          ]
        });
      }
      
      // Age-specific
      if (userProfile.ageGroup && userProfile.ageGroup.includes('master')) {
        recs.push({
          title: 'ë§ˆìŠ¤í„°ì¦ˆ ëŸ¬ë„ˆ ê¶Œì¥ì‚¬í•­',
          items: [
            'íšŒë³µ ì‹œê°„ 1.5-2ë°° í™•ë³´',
            'ì£¼ 2íšŒ ì´ìƒ ê·¼ë ¥ ìš´ë™ í•„ìˆ˜',
            'ê³ ê°•ë„ í›ˆë ¨ ì „ ì¶©ë¶„í•œ ì›Œë°ì—… (20ë¶„ ì´ìƒ)',
            'ìœ ì—°ì„± ìš´ë™ ë§¤ì¼ 15ë¶„',
            'ì •ê¸° ê±´ê°•ê²€ì§„ (ì‹¬í˜ˆê´€ê³„ í¬í•¨)'
          ]
        });
      }
      
      // Training phase specific
      const phase = document.getElementById('trainingPhase').value;
      if (phase === 'base') {
        recs.push({
          title: 'ê¸°ì´ˆ ì²´ë ¥ê¸° ê¶Œì¥ì‚¬í•­',
          items: [
            'ì£¼ê°„ ë§ˆì¼ë¦¬ì§€ 10% ì´ë‚´ ì¦ê°€',
            'ì†ë„ë³´ë‹¤ ì‹œê°„/ê±°ë¦¬ì— ì§‘ì¤‘',
            'ì£¼ 1-2íšŒ í¬ë¡œìŠ¤íŠ¸ë ˆì´ë‹',
            'ì½”ì–´ ê°•í™” ìš´ë™ ì£¼ 3íšŒ'
          ]
        });
      } else if (phase === 'peak' || phase === 'taper') {
        recs.push({
          title: 'ëŒ€íšŒ ì¤€ë¹„ ê¶Œì¥ì‚¬í•­',
          items: [
            'ìƒˆë¡œìš´ ì¥ë¹„ë‚˜ ìŒì‹ ì‹œë„ ê¸ˆì§€',
            'ì¶©ë¶„í•œ ìˆ˜ë©´ (8ì‹œê°„ ì´ìƒ)',
            'íƒ„ìˆ˜í™”ë¬¼ ë¹„ì¤‘ 60-70%ë¡œ ì¦ê°€',
            'ëŒ€íšŒ 3ì¼ ì „ë¶€í„° ì¹´í˜ì¸ ì„­ì·¨ ì œí•œ',
            'ë ˆì´ìŠ¤ í˜ì´ìŠ¤ ì‹œë®¬ë ˆì´ì…˜'
          ]
        });
      }
      
      // Condition-specific
      if (document.getElementById('injury_recovery').checked) {
        recs.push({
          title: 'ë¶€ìƒ íšŒë³µ í”„ë¡œí† ì½œ',
          items: [
            'Pain Scale 3/10 ì´í•˜ì—ì„œë§Œ í›ˆë ¨',
            'ì•„ì´ì‹±ê³¼ ì••ë°• ë§¤ì¼ ì‹¤ì‹œ',
            'í•­ì—¼ì¦ ìŒì‹ ì„­ì·¨ (ì˜¤ë©”ê°€-3, ê°•í™©)',
            'ëŒ€ì²´ ìš´ë™ìœ¼ë¡œ ìœ ì‚°ì†Œ ìœ ì§€ (ìˆ˜ì˜, ìì „ê±°)',
            'ë¬¼ë¦¬ì¹˜ë£Œì‚¬ ìƒë‹´ ê¶Œì¥'
          ]
        });
      }
      
      // General nutrition
      recs.push({
        title: 'ì˜ì–‘ ì„­ì·¨ ê°€ì´ë“œ',
        items: [
          'í›ˆë ¨ ì „: íƒ„ìˆ˜í™”ë¬¼ 30-50g (1-2ì‹œê°„ ì „)',
          'í›ˆë ¨ ì¤‘: 60ë¶„ ì´ìƒ ì‹œ ì‹œê°„ë‹¹ 30-60g íƒ„ìˆ˜í™”ë¬¼',
          'í›ˆë ¨ í›„ 30ë¶„ ë‚´: íƒ„ìˆ˜í™”ë¬¼:ë‹¨ë°±ì§ˆ = 3:1 ë¹„ìœ¨',
          'ì¼ì¼ ìˆ˜ë¶„ ì„­ì·¨: ì²´ì¤‘(kg) x 35ml + í›ˆë ¨ ì†ì‹¤ëŸ‰',
          'ì „í•´ì§ˆ ë³´ì¶©: ë‚˜íŠ¸ë¥¨ 300-700mg/ì‹œê°„'
        ]
      });
      
      recommendations.innerHTML = recs.map(r => `
        <div class="border rounded-lg p-4 bg-gray-50">
          <h4 class="font-bold mb-2 text-purple-700">
            <i class="fas fa-check-circle mr-2"></i>${r.title}
          </h4>
          <ul class="text-sm space-y-1">
            ${r.items.map(item => `<li class="flex items-start"><span class="text-purple-500 mr-2">â€¢</span>${item}</li>`).join('')}
          </ul>
        </div>
      `).join('');
    }

    function calculateTraining() {
      // Get user inputs
      const distance = parseFloat(document.getElementById('eventDistance').value);
      const hours = parseInt(document.getElementById('hours').value) || 0;
      const minutes = parseInt(document.getElementById('minutes').value) || 0;
      const seconds = parseFloat(document.getElementById('seconds').value) || 0;
      
      if (!distance || (hours === 0 && minutes === 0 && seconds === 0)) {
        alert('ì¢…ëª©ê³¼ ê¸°ë¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      if (!userProfile.gender) {
        alert('ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }
      
      // Update profile
      userProfile.ageGroup = document.getElementById('ageGroup').value;
      userProfile.experience = document.getElementById('experience').value;
      userProfile.weeklyVolume = document.getElementById('weeklyVolume').value;
      userProfile.frequency = document.getElementById('frequency').value;
      userProfile.trainingPhase = document.getElementById('trainingPhase').value;
      
      // Calculate adjustments
      calculateAdjustments();
      
      // Calculate VDOT
      const totalSeconds = hours * 3600 + minutes * 60 + seconds;
      let vdot = calculateVDOT(distance, totalSeconds);
      
      // ì—¬ì„±ì˜ ê²½ìš° VDOT í‘œì‹œë§Œ ì¡°ì • (í˜ì´ìŠ¤ ê³„ì‚°ì€ ì‹¤ì œ VDOT ì‚¬ìš©)
      const displayVDOT = userProfile.gender === 'female' ? vdot * 0.88 : vdot;
      
      // Display VDOT
      document.getElementById('vdotScore').textContent = displayVDOT.toFixed(1);
      document.getElementById('performanceLevel').textContent = getPerformanceLevel(displayVDOT);
      document.getElementById('predictedVO2max').textContent = (displayVDOT * 1.05).toFixed(1);
      
      if (userProfile.gender === 'female') {
        document.getElementById('vdotAdjustment').textContent = 'ì—¬ì„± ë³´ì • ì ìš© (ì‹¤ì œ VDOT: ' + vdot.toFixed(1) + ')';
      } else {
        document.getElementById('vdotAdjustment').textContent = '';
      }
      
      // Calculate training paces using actual VDOT
      const paces = calculateTrainingPaces(vdot);
      
      // Display paces
      document.getElementById('easyPace').textContent = 
        `${formatPace(paces.easy.max)} - ${formatPace(paces.easy.min)}`;
      document.getElementById('marathonPace').textContent = formatPace(paces.marathon);
      document.getElementById('thresholdPace').textContent = formatPace(paces.threshold);
      document.getElementById('intervalPace').textContent = formatPace(paces.interval);
      document.getElementById('repetitionPace').textContent = formatPace(paces.repetition);
      
      // Generate training plans
      generateWeeklyPlan(vdot);
      generateMesocycle();
      generateWorkoutDetails(vdot, paces);
      generateRecommendations();
      
      // Show results
      document.getElementById('resultsSection').classList.remove('hidden');
      document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
      // Set default values
      document.getElementById('ageGroup').value = 'senior';
      document.getElementById('experience').value = 'intermediate';
      document.getElementById('weeklyVolume').value = 'moderate';
      document.getElementById('frequency').value = '5-6';
      document.getElementById('trainingPhase').value = 'build';
    });
  </script>
</body>
</html>